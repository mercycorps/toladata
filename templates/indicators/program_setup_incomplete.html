{% extends "base.html" %}
{% load i18n mytags static %}
{% block title %}{% trans "Program setup" %} | {% endblock %}
{% block page_title %}{{ program.name }}{% endblock %}

{% block content %}
<div class="">
    {% blocktrans with id=program.id %}
    <span class="program-period__link--{{ id }}"></span>
    {% endblocktrans %}
</div>
{% include 'indicators/indicator_reportingperiod_modal.html' with close_only=True %}
{% endblock content %}


{% block extra_js_in_body %}
    <script>
        var reporting_period_submitting = false;
        function hide_reporting_modal(event) {
            if (reporting_period_submitting == true) {
                // show a loading circle here?
            } else {
                window.location.replace('/');
            }
        }
        $(document).ready(function() {
            $('#id_reporting_period_modal').data('program', '{{ program.id }}')
                .data('progstart', "{{ program.start_date }}")
                .data('progend', "{{program.end_date}}")
                .data('rptstart', "{{program.reporting_period_start}}")
                .data('rptend', "{{program.reporting_period_end}}");
            $('#id_reporting_period_modal').modal('show');
            $('#id_reporting_period_modal').on('hide.bs.modal', hide_reporting_modal);
        });
    </script>


{% endblock %}
