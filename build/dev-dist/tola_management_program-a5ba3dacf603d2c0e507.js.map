{"version":3,"file":"tola_management_program-a5ba3dacf603d2c0e507.js","sources":["webpack:///./js/pages/tola_management_pages/program/index.js","webpack:///./js/components/virtualized-react-select.js","webpack:///./js/pages/tola_management_pages/program/components/program_history.js","webpack:///./js/components/loading-spinner.js","webpack:///./js/pages/tola_management_pages/program/api.js","webpack:///./js/components/expander.js","webpack:///./js/components/changelog.js","webpack:///./js/pages/tola_management_pages/program/components/edit_program_profile.js","webpack:///./js/components/pagination.js","webpack:///./js/components/management-table.js","webpack:///./js/general_utilities.js","webpack:///./js/api.js","webpack:///./js/components/checkboxed-multi-select.js","webpack:///./js/pages/tola_management_pages/program/views.js","webpack:///./js/pages/tola_management_pages/program/components/program_editor.js","webpack:///./js/components/folding-sidebar.js","webpack:///./js/constants.js","webpack:///./js/pages/tola_management_pages/program/components/program_settings.js","webpack:///./js/pages/tola_management_pages/program/models.js"],"sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {ProgramStore} from './models';\nimport {IndexView} from './views';\nimport api from './api';\n\nconst app_root = '#app_root'\n\n\n/*\n * Model/Store setup\n */\n\nconst {\n    country_filter,\n    organization_filter,\n    users_filter,\n    allCountries,\n    countries,\n    organizations,\n    users,\n    programFilterPrograms,\n    sectors,\n} = jsContext\n\n/* formatting filters to be used by the ProgramStore */\nconst makeCountryOptions = (country_ids) => country_ids.map(id => countries[id]).map(country => ({label: country.name, value: country.id}))\nconst makeOrganizationOptions = (org_ids) => org_ids.map(id => organizations[id]).map(org => ({label: org.name, value: org.id}))\nconst makeUserOptions = (user_ids) => user_ids.map(id => users[id]).map(user => ({label: user.name, value: user.id}))\n\nconst filters = {\n    countries: makeCountryOptions(country_filter),\n    organizations: makeOrganizationOptions(organization_filter),\n    users: makeUserOptions(users_filter)\n}\n\nconst initialData = {\n    countries,\n    allCountries,\n    organizations,\n    programFilterPrograms,\n    sectors,\n    filters,\n    users\n}\nconst store = new ProgramStore(\n    api,\n    initialData,\n);\n\n\nReactDOM.render(\n    <IndexView store={store} />,\n    document.querySelector(app_root)\n);\n","import React from 'react'\nimport {List, AutoSizer, CellMeasurer, CellMeasurerCache} from 'react-virtualized'\nimport Select, {components} from 'react-select'\n\nexport class VirtualizedMenuList extends React.PureComponent {\n    constructor(props) {\n        super(props)\n        this.cache = new CellMeasurerCache({\n            fixedWidth: true,\n            defaultHeight: 35,\n        })\n        this.filter_val = \"\"\n    }\n\n    render() {\n        const {options, children, maxHeight, getValue, selectProps} = this.props\n        const rowCount = children.length || 0\n\n        //gotta be a way to improve this. it's ok after the first couple of\n        //characters search, but it's slow prior to that\n        if(selectProps.inputValue !== this.filter_val) {\n            this.filter_val = selectProps.inputValue\n            this.cache.clearAll()\n        }\n\n        return (\n            <div style={{display: \"flex\", height: `100vh`, maxHeight: maxHeight+\"px\"}}>\n                <div style={{flex: \"1 1 auto\"}}>\n                    <AutoSizer>\n                    {({width, height}) => {\n                        return <List\n                                height={height}\n                                width={width}\n                                deferredMeasurementCache={this.cache}\n                                rowCount={rowCount}\n                                rowHeight={this.cache.rowHeight}\n                                noRowsRenderer={() => <div>No selections available</div>}\n                                rowRenderer={\n                                    ({index, parent, key, style}) =>\n                                        <CellMeasurer key={key} cache={this.cache} parent={parent} columnIndex={0} rowIndex={index}>\n                                            <div style={style}>{children[index]}</div>\n                                        </CellMeasurer>\n                                }/>\n                    }}\n                    </AutoSizer>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst VirtualizedSelect = props => (\n    <Select\n        components={{\n            VirtualizedMenuList,\n        }}\n        {...props} />\n)\n\nexport default VirtualizedSelect\n","import React from 'react'\nimport Select from 'react-select'\nimport {AutoSizer, Table, Column, CellMeasurer, CellMeasurerCache} from 'react-virtualized'\nimport { observer } from 'mobx-react';\nimport Expander from 'components/expander'\nimport ChangeLog from 'components/changelog'\n\nconst status_options = [\n    {value: 'Funded', label: gettext('Active')},\n    {value: 'Completed', label: gettext('Inactive')}\n]\n\n@observer\nexport class ProgramHistory extends React.Component {\n\n    constructor(props) {\n        super(props)\n        const {program_data} = props\n        this.state = {\n            managed_status: Object.assign({}, program_data),\n            original_status: Object.assign({}, program_data)\n        }\n    }\n\n    hasUnsavedDataAction() {\n        this.props.onIsDirtyChange(JSON.stringify(this.state.managed_status) != JSON.stringify(this.state.original_status))\n    }\n\n    onStatusChange(selection) {\n        let value = selection.value\n        this.setState({\n            managed_status: Object.assign(this.state.managed_status, {'funding_status': value})\n        }, () => this.hasUnsavedDataAction())\n    }\n\n    onSave() {\n        this.props.onSave(this.state.original_status.id, this.state.managed_status)\n    }\n\n    onReset() {\n        this.setState({\n            managed_status: this.state.original_status,\n        }, () => this.hasUnsavedDataAction())\n    }\n\n    render() {\n        const {history, store} = this.props\n        const changelog_expanded_rows = store.changelog_expanded_rows;\n        const currentStatusSelection = status_options.find(x=> x.value == this.state.managed_status.funding_status);\n        return <div className=\"tab-pane--react admin-edit-pane\">\n            <h2 className=\"no-bold\">{this.props.program_data.name ? this.props.program_data.name+': ' : ''}{gettext(\"Status and History\")}</h2>\n            <div className=\"form-group\">\n                <label htmlFor=\"status-input\" className=\"label--required\" required>{gettext(\"Status\")}</label>\n                <Select\n                    isSearchable={false}\n                    options={status_options}\n                    value={currentStatusSelection}\n                    onChange={(new_value) => this.onStatusChange(new_value)}\n                />\n            </div>\n            <div className=\"row\">\n                <div className=\"col\">\n                    <div className=\"form-group btn-row\">\n                        <button className=\"btn btn-primary\" type=\"button\" onClick={() => this.onSave()}>{gettext(\"Save Changes\")}</button>\n                        <button className=\"btn btn-reset\" type=\"button\" onClick={() => this.onReset()}>{gettext(\"Reset\")}</button>\n                    </div>\n                </div>\n            </div>\n\n            <ChangeLog data={history} expanded_rows={changelog_expanded_rows} toggle_expando_cb={(row_id) => store.toggleChangeLogRowExpando(row_id)} />\n\n        </div>\n    }\n}\n\nexport default ProgramHistory\n","\nimport React from 'react'\n\nconst LoadingSpinner = ({children, isLoading, className, ...props}) => {\n    const loading = (isLoading)?'loading':''\n    return <div className={'loading-spinner__container '+loading+' '+(className || '')} {...props}>\n        <div className='loading-spinner__overlay'>\n            <div className='loading-spinner__spinner'></div>\n        </div>\n        {children}\n    </div>\n}\n\nexport default LoadingSpinner\n","import {api} from '../../../api';\n\n\nexport const fetchPrograms = (page, filters) => {\n    return api.get('/tola_management/program/', {params: {page: page, ...filters}}).then(response => {\n        let data = response.data\n        let results = data.results\n        let total_results = data.count\n        let total_pages = data.page_count\n        let next_page = data.next\n        let prev_page = data.previous\n\n        return {\n            results,\n            total_results,\n            total_pages,\n            next_page,\n            prev_page,\n        }\n    })\n}\n\nexport const fetchProgramsForFilter = (filters) => {\n    return api.get('/tola_management/program/program_filter_options', {params: {...filters}})\n}\n\nexport const createProgram = (data) => api.post('/tola_management/program/', data)\n\nexport const updateProgram = (id, data) => api.put(`/tola_management/program/${id}/`, data)\n\n// endpoint to check if gait ID is unique and return a GAIT link to view similar programs if it is not.\nexport const validateGaitId = (gaitId, id) => api.get(`/tola_management/program/${id}/gait/${gaitId}/`)\n\nexport const updateProgramFundingStatusBulk = (ids, funding_status) => {\n    return api.post('/tola_management/program/bulk_update_status/', {ids, funding_status})\n}\n\nexport const fetchProgramHistory = (id) => api.get(`/tola_management/program/${id}/history/`)\n\nexport const syncGAITDates = (id) => api.put(`/tola_management/program/${id}/sync_gait_dates/`)\n\n\nexport default {\n    fetchPrograms,\n    fetchProgramsForFilter,\n    fetchProgramHistory,\n    createProgram,\n    updateProgram,\n    updateProgramFundingStatusBulk,\n    validateGaitId,\n    syncGAITDates\n}\n","import React from 'react'\n\nclass Expander extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            expanded: false,\n            overflowing: false,\n        }\n        this.ref = React.createRef()\n    }\n\n    componentDidMount() {\n        if(this.ref.current.scrollHeight > this.ref.current.clientHeight) {\n            this.setState({overflowing: true})\n        }\n    }\n\n    toggleExpanded(e) {\n        e.preventDefault()\n        this.setState({\n            expanded: !this.state.expanded\n        })\n    }\n\n    render() {\n        return <div className=\"changelog-entry\">\n            <div ref={this.ref} className=\"changelog-entry__expanding\" style={{height: !this.state.expanded && (this.props.height || 50)}}>\n                {this.props.children}\n            </div>\n            {this.state.overflowing &&\n            <div className=\"changelog-entry__expand-trigger\">\n                <a href=\"\" onClick={(e) => this.toggleExpanded(e)}>{(this.state.expanded)?'Show Less':'Show More'}</a>\n            </div>\n            }\n        </div>\n    }\n}\n\nexport default Expander\n","import React from 'react'\nimport { observer } from 'mobx-react';\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport { toJS } from 'mobx'\nimport { EM_DASH } from '../constants';\n\n\nexport const ChangeField = ({name, data, extraTitleText=null}) => {\n    const extraTitle = extraTitleText ? <h4 className=\"disagg-type__title, text-small\" >{extraTitleText}</h4> : null;\n    if (name===\"Disaggregation categories\" && typeof data === 'object' && data !== null) {\n        const sorted_labels = Object.values(data).sort((a,b) => a.custom_sort - b.custom_sort);\n        return <React.Fragment>\n            <strong>{name}: </strong>\n            {extraTitle}\n            <ul className=\"no-list-style\">\n                {sorted_labels.map( (entry, index) => {\n                    return <li key={index}>{(entry.label !== undefined && entry.label !== null) ? entry.label : \"\"}</li>\n                })}\n            </ul>\n        </React.Fragment>\n    }\n\n    else {\n        var change_value;\n        if (data !== undefined && data !== null && data !== \"N/A\") {\n            change_value = <span className=\"change__field__value\">\n            {\n                [\"true\", \"false\"].includes(data.toString())\n                    ? data.toString().replace(\"t\", \"T\").replace(\"f\", \"F\")\n                    : data.toString()\n            }\n            </span>\n        } else {\n            change_value = <span className=\"change__field__value empty-value\">{ EM_DASH }</span>\n        }\n        return <div className=\"change__field\">\n            <strong className=\"change__field__name\">{name}</strong>: {change_value}\n        </div>\n    }\n};\n\nconst ChangeLogEntryHeader = ({data, is_expanded, toggle_expando_cb}) => {\n    // TODO: apply is-expanded dynamically\n    return <tr className={is_expanded ? 'changelog__entry__header is-expanded' : 'changelog__entry__header'} onClick={() => toggle_expando_cb(data.id)}>\n        <td className=\"text-nowrap text-action\">\n            <FontAwesomeIcon icon={is_expanded ? 'caret-down' : 'caret-right'} />&nbsp;<strong>{data.date}</strong>\n        </td>\n        <td className=\"text-nowrap\">{data.admin_user}</td>\n        <td className=\"text-nowrap\">{data.pretty_change_type}</td>\n        <td></td>\n        <td></td>\n    </tr>\n};\n\nconst ChangeLogEntryRow = (props) => {\n    return <tr key={props.id} className=\"changelog__entry__row\">\n                <td></td>\n                <td></td>\n                <td></td>\n                <td>\n                    <div className=\"changelog__change--prev\">\n                        {props.previous}\n                    </div>\n                </td>\n                <td>\n                    <div className=\"changelog__change--new\">\n                        {props.new}\n                    </div>\n                </td>\n            </tr>\n\n};\n\nconst ChangeLogEntryRowBuilder = ({data}) => {\n\n    let allRows = [];\n\n    // We should never need this but just in case someone manages to store a log entry without actual diffs, give them\n    // a soft place to land.\n    const nullRow = <ChangeLogEntryRow previous={gettext(\"No differences found\")} new={null} id={1} key={1}/>\n\n    // If they manage to store a log without any diffs at all, send them to the soft landing place.\n    if ((Array.isArray(data.diff_list) && data.diff_list.length === 0) || (Object.keys(data.diff_list || {}).length === 0)) {\n        allRows.push(nullRow);\n        return allRows\n    }\n\n    if (data.change_type === 'user_programs_updated') {\n        // Create multiple row for program/country changes:\n        if (data.diff_list.base_country) {\n            const previousEntry = <ChangeField name={data.diff_list.base_country.pretty_name} data={data.diff_list.base_country.prev} />\n            const newEntry = <ChangeField name={data.diff_list.base_country.pretty_name} data={data.diff_list.base_country.new} />\n                \n            allRows.push(<ChangeLogEntryRow previous={previousEntry} new={newEntry} id={\"base_country\"} key={\"base_country\"} />);\n        }\n        Object.entries(data.diff_list.countries).forEach( ([id, country]) => {\n            const key = `${id}_${country}`;\n            const previousEntry = <React.Fragment>\n                <ChangeField name={gettext(\"Country\")} data={country.prev.country} />\n                {/* # Translators:  Role references a user's permission level when accessing data (i.e. User or Admin) */}\n                <ChangeField name={gettext(\"Role\")} data={country.prev.role} />\n            </React.Fragment>;\n            const newEntry = <React.Fragment>\n                <ChangeField name={gettext(\"Country\")} data={country.new.country} />\n                <ChangeField name={gettext(\"Role\")} data={country.new.role} />\n            </React.Fragment>;\n\n            allRows.push(<ChangeLogEntryRow previous={previousEntry} new={newEntry} id={key} key={key} />);\n        });\n        Object.entries(data.diff_list.programs).forEach(([id, program]) => {\n            const key = `${id}_${program}`;\n            const previousEntry = <React.Fragment>\n                <ChangeField name={gettext(\"Program\")} data={program.prev.program} />\n                <ChangeField name={gettext(\"Country\")} data={program.prev.country} />\n                <ChangeField name={gettext(\"Role\")} data={program.prev.role} />\n            </React.Fragment>;\n            const newEntry = <React.Fragment>\n                <ChangeField name={gettext(\"Program\")} data={program.new.program} />\n                <ChangeField name={gettext(\"Country\")} data={program.new.country} />\n                <ChangeField name={gettext(\"Role\")} data={program.new.role} />\n            </React.Fragment>;\n\n            allRows.push(<ChangeLogEntryRow previous={previousEntry} new={newEntry} id={key} key={key} />);\n        })\n\n    }\n    else {\n        let extraTitleText = null;\n        let skipDisaggType = false;\n        if (data.pretty_change_type === \"Country disaggregation updated\") {\n            const diff_list = data.diff_list;\n            const disaggType = diff_list.filter((diff) => diff.name === \"disaggregation_type\");\n            if (disaggType[0].prev === disaggType[0].new) {\n                extraTitleText = disaggType[0].prev;\n                skipDisaggType = true;\n            }\n\n        }\n        data.diff_list.forEach((changeSet, id) => {\n            const key = `${id}_${changeSet.pretty_name}`;\n            if (!(changeSet.name === \"disaggregation_type\" && skipDisaggType)) {\n                const previousEntry = <React.Fragment>\n                    <ChangeField key={id} name={changeSet.pretty_name} data={changeSet.prev} id={id}\n                                 extraTitleText={extraTitleText}/>\n                </React.Fragment>;\n                const newEntry = <React.Fragment>\n                    <ChangeField key={id} name={changeSet.pretty_name} data={changeSet.new} id={id}\n                                 extraTitleText={extraTitleText}/>\n                </React.Fragment>;\n\n                allRows.push(<ChangeLogEntryRow previous={previousEntry} new={newEntry} id={key} key={key}/>);\n            }\n        });\n    }\n\n    // If they manage to store a log with identical values in diffs, send them to the soft landing place.  Hopefully\n    // the system will refuse to log no-difference diffs.\n    if (allRows.length === 0){\n        allRows.push(nullRow)\n    }\n    return allRows;\n\n};\n\nconst ChangeLogEntry = ({data, is_expanded, toggle_expando_cb}) => {\n    return <tbody className=\"changelog__entry\" key={data.id}>\n        <ChangeLogEntryHeader data={data} is_expanded={is_expanded} toggle_expando_cb={toggle_expando_cb} />\n        {is_expanded &&\n        <ChangeLogEntryRowBuilder data={data}/>\n        }\n    </tbody>\n};\n\nconst ChangeLog = observer(({data, expanded_rows, toggle_expando_cb}) => {\n    // If expanded_rows is not null/undefined then use it to control expansion/collapse of entries\n    // otherwise, default it to \"open\"\n    return <table className=\"table table-sm bg-white table-bordered text-small changelog\">\n        <thead>\n            <tr>\n                <th className=\"text-nowrap\">{gettext(\"Date\")}</th>\n                <th className=\"text-nowrap\">{gettext(\"Admin\")}</th>\n                <th className=\"text-nowrap\">{gettext(\"Change Type\")}</th>\n                <th className=\"text-nowrap td--half-stretch\">{gettext(\"Previous Entry\")}</th>\n                <th className=\"text-nowrap td--half-stretch\">{gettext(\"New Entry\")}</th>\n            </tr>\n        </thead>\n        {data.map((entry) => {\n            let is_expanded = true;\n            if (expanded_rows) {\n                is_expanded = expanded_rows.has(entry.id);\n            }\n            return <ChangeLogEntry key={entry.id} data={entry} is_expanded={is_expanded} toggle_expando_cb={toggle_expando_cb} />\n        })}\n    </table>\n});\n\nexport default ChangeLog\n","import React from 'react'\nimport Select from 'react-select'\nimport { observer } from \"mobx-react\"\nimport CheckboxedMultiSelect from 'components/checkboxed-multi-select'\nimport classNames from 'classnames'\n\n\nconst ErrorFeedback = observer(({errorMessages}) => {\n    if (!errorMessages) {\n        return null\n    }\n    return (\n    <div className=\"invalid-feedback\">\n        {errorMessages.map((message, index) =>\n            <span key={index}>{message}</span>\n        )}\n    </div>\n    )\n})\n@observer\nexport default class EditProgramProfile extends React.Component {\n    constructor(props) {\n        super(props)\n        const {program_data} = props\n\n        this.state = {\n            original_data: Object.assign({}, program_data),\n            managed_data: Object.assign({}, program_data)\n        }\n    }\n\n    hasUnsavedDataAction() {\n        this.props.onIsDirtyChange(JSON.stringify(this.state.managed_data) != JSON.stringify(this.state.original_data))\n    }\n\n    save() {\n        const program_id = this.props.program_data.id\n        const program_data = this.state.managed_data\n        this.props.onUpdate(program_id, program_data)\n    }\n\n    saveNew(e) {\n        e.preventDefault()\n        const program_data = this.state.managed_data\n        this.props.onCreate(program_data)\n    }\n\n    updateFormField(fieldKey, val) {\n        this.setState({\n            managed_data: Object.assign(this.state.managed_data, {[fieldKey]: val})\n        }, () => this.hasUnsavedDataAction())\n    }\n\n    resetForm() {\n        this.setState({\n            managed_data: Object.assign({}, this.state.original_data)\n        }, () => this.hasUnsavedDataAction())\n    }\n\n    formErrors(fieldKey) {\n        return this.props.errors[fieldKey]\n    }\n\n    render() {\n        const formdata = this.state.managed_data\n        const selectedCountries = formdata.country.map(x=>this.props.countryOptions.find(y=>y.value==x))\n        const selectedSectors = formdata.sector.map(x=>this.props.sectorOptions.find(y=>y.value==x))\n        return (\n            <div className=\"tab-pane--react\">\n                <h2 className=\"no-bold\">{this.props.program_data.name ? this.props.program_data.name+': ' : ''}{gettext(\"Profile\")}</h2>\n                <form className=\"form\">\n                    <div className=\"form-group\">\n                        <label className=\"label--required\" htmlFor=\"program-name-input\">{gettext(\"Program name\")}</label>\n                        <input\n                            type=\"text\"\n                            value={formdata.name}\n                            onChange={(e) => this.updateFormField('name', e.target.value) }\n                            className={classNames('form-control', { 'is-invalid': this.formErrors('name') })}\n                            id=\"program-name-input\"\n                            required />\n                        <ErrorFeedback errorMessages={this.formErrors('name')} />\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"program-gait-input\">{gettext(\"GAIT ID\")}</label>\n                        <input\n                            type=\"tel\"\n                            value={formdata.gaitid}\n                            onChange={(e) => this.updateFormField('gaitid', e.target.value) }\n                            className={classNames('form-control', { 'is-invalid': this.formErrors('gaitid') })}\n                            id=\"program-gait-input\"\n                            disabled={!this.props.new}\n                            />\n                        <ErrorFeedback errorMessages={this.formErrors('gaitid')} />\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"program-fund-code-input\">{gettext(\"Fund Code\")}</label>\n                        <input\n                            type=\"tel\"\n                            value={formdata.fundCode}\n                            onChange={(e) => this.updateFormField('fundCode', e.target.value) }\n                            className={classNames('form-control', { 'is-invalid': this.formErrors('fundCode') })}\n                            id=\"program-fund-code-input\"\n                            disabled={!this.props.new}\n                            />\n                        <ErrorFeedback errorMessages={this.formErrors('fundCode')} />\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"program-description-input\">{gettext(\"Description\")}</label>\n                        <textarea\n                            value={formdata.description || ''}\n                            onChange={(e) => this.updateFormField('description', e.target.value) }\n                            className={classNames('form-control', { 'is-invalid': this.formErrors('description') })}\n                            id=\"program-description-input\"\n                            />\n                        <ErrorFeedback errorMessages={this.formErrors('description')} />\n                    </div>\n                    <div className=\"form-group react-multiselect-checkbox\">\n                        <label htmlFor=\"program-county-input\" className=\"label--required\">{gettext(\"Countries\")}</label>\n                        <CheckboxedMultiSelect\n                            value={selectedCountries}\n                            options={this.props.countryOptions}\n                            onChange={(e) => this.updateFormField('country', e.map(x=>x.value)) }\n                            className={classNames('react-select', {'is-invalid': this.formErrors('country')})}\n                            id=\"program-country-input\"\n                            />\n                        <ErrorFeedback errorMessages={this.formErrors('country')} />\n                    </div>\n                    <div className=\"form-group react-multiselect-checkbox\">\n                        <label htmlFor=\"program-sectors-input\">{gettext(\"Sectors\")}</label>\n                        <CheckboxedMultiSelect\n                            value={selectedSectors}\n                            options={this.props.sectorOptions}\n                            onChange={(e) => this.updateFormField('sector', e.map(x=>x.value)) }\n                            className={classNames('react-select', {'is-invalid': this.formErrors('sector')})}\n                            id=\"program-sectors-input\"\n                            />\n                        <ErrorFeedback errorMessages={this.formErrors('sector')} />\n                    </div>\n                    {this.props.new &&\n                    <div className=\"form-group btn-row\">\n                        <button className=\"btn btn-primary\" type=\"button\" onClick={(e) => this.saveNew(e)}>{gettext(\"Save Changes\")}</button>\n                        {/* <button className=\"btn btn-primary\" onClick={(e) => this.saveNewAndAddAnother(e)}>Save And Add Another</button> */}\n                        <button className=\"btn btn-reset\" type=\"button\" onClick={() => this.resetForm()}>{gettext(\"Reset\")}</button>\n                    </div>\n                    }\n                    {!this.props.new &&\n                    <div className=\"form-group btn-row\">\n                        <button className=\"btn btn-primary\" type=\"button\" onClick={(e) => this.save(e)}>{gettext(\"Save Changes\")}</button>\n                        <button className=\"btn btn-reset\" type=\"button\" onClick={() => this.resetForm()}>{gettext(\"Reset\")}</button>\n                    </div>\n                    }\n                </form>\n            </div>\n        )\n    }\n}\n","import React from 'react'\nimport ReactPaginate from 'react-paginate'\nimport { observer } from \"mobx-react\"\n\n/***\n    Props:\n\n    - pageCount: total number of pages\n    - initialPage: which page should be highlighted as active initially\n    - onPageChange: a function to receive the newly selected page\n*/\nconst Pagination = (props) => {\n    return <ReactPaginate\n            previousLabel={'‹'}\n            previousClassName={'page-item previous'}\n            previousLinkClassName={'page-link'}\n            nextLabel={'›'}\n            nextClassName={'page-item next'}\n            nextLinkClassName={'page-link'}\n            breakLabel={\"...\"}\n            disabledClassName={'disabled'}\n            breakClassName={'page-item disabled'}\n            breakLinkClassName={'page-link'}\n            pageClassName={'page-item'}\n            pageLinkClassName={'page-link'}\n            marginPagesDisplayed={2}\n            pageRangeDisplayed={5}\n            containerClassName={\"pagination\"}\n            activeClassName={\"active\"}\n            {...props}/>\n}\n\nexport default Pagination\n","import { observer } from \"mobx-react\"\nimport React from 'react';\nimport classNames from 'classnames';\n\n// TODO: \"size\" is no longer used\nconst ColumnComponent = ({className, size, ...props}) => <td className={[\"mgmt-table__col\", className].join(' ')}  {...props}>{props.children}</td>\n\n// TODO: this is redundant with ColumnComponent\nconst HeaderColumnComponent = ({className, size, ...props}) => <th className={[\"mgmt-table__col\", `mgmt-table__col__width-${size}`, className].join(' ')}  {...props}>{props.children}</th>\n\nconst InnerRowComponent = ({className, ...props}) => <tr className={[\"mgmt-table__row\", className].join(' ')} {...props}>{props.children}</tr>\n\n// TODO: this is redundant with InnerRowComponent\nconst HeaderRowComponent = ({className, ...props}) => <tr className={[\"mgmt-table__row table-header\", className].join(' ')} {...props}>{props.children}</tr>\n\n/***\n    A wrapper for the rendering of the given row renderer, it takes and expando\n    renderer used to render expanded content\n\n    Props:\n    - expanded: whether the expando content is shown or not\n    - Expando: The content to render when the expando is shown\n*/\nconst RowComponent = observer(({className, expanded, Expando, ...props}) => {\n    if(Expando) {\n        const ObservedExpando = observer(Expando)\n        return <tbody className={\n                classNames([\"mgmt-table__body\", className].join(' '), { \"is-expanded\": expanded })\n            } {...props} >\n            <InnerRowComponent>{props.children}</InnerRowComponent>\n            {expanded && <ObservedExpando Wrapper={ExpandoWrapper} />}\n        </tbody>\n    } else {\n        return <tbody className={[\"mgmt-table__body\", className].join(' ')} {...props} >\n            <InnerRowComponent>{props.children}</InnerRowComponent>\n        </tbody>\n    }\n})\nconst ExpandoWrapper = ({className, ...props}) => <tr className={[\"mgmt-table__row--expanded\", className].join(' ')} {...props}><td colSpan=\"5\">{props.children}</td></tr>\n\nconst RowList = observer(({data, Row, keyField, ...props}) => {\n    const ObservedRow = observer(Row)\n    return data.map(row_data => <ObservedRow key={row_data[keyField]} data={row_data} Col={ColumnComponent} Row={RowComponent} />)\n})\n\n/*\n   Props:\n\n   - HeaderRow: a function to render the header row. it receives a component\n   prop to render the header column and row\n\n   - Row: a function used to render each row. it receives a component prop to\n    render the row (see RowComponent), it receives the relevant data for that\n    row as a prop: data\n\n   - data: the dataset used to render the table, it must be an array\n\n   - keyField: field to use for key on rows and expando checking\n\n */\nconst ManagementTable = observer(({HeaderRow, className, ...props}) => {\n    const ObservedHeaderRow = observer(HeaderRow)\n    return <table className={['table bg-white', className].join(' ')} >\n        <thead>\n            <ObservedHeaderRow Col={HeaderColumnComponent} Row={HeaderRowComponent}/>\n        </thead>\n        <RowList {...props} />\n    </table>\n})\nexport default ManagementTable\n","const SPANISH = 'es';\nconst FRENCH = 'fr';\nconst ENGLISH = 'en';\n\nfunction flattenArray(arr, depth = 1) {\n    if (depth == 5) {\n        return arr;\n    }\n    let flattened = [];\n    arr.forEach(item => {\n        if (Array.isArray(item)) {\n            flattened = flattened.concat(flattenArray(item, depth+1));\n        } else {\n            flattened.push(item);\n        }\n    });\n    return flattened;\n}\n\nfunction ensureNumericArray(value) {\n    if (!Array.isArray(value)) {\n        value = parseInt(value);\n        if (value && !isNaN(value)) {\n            return [value];\n        }\n        return false;\n    }\n    let arr = value.map(x => parseInt(x)).filter(x => !isNaN(x));\n    if (arr && Array.isArray(arr) && arr.length > 0) {\n        return arr;\n    }\n    return false;\n}\n\n/*\n * Are we loading a cached page? If so, reload to avoid displaying stale indicator data\n * See ticket #1423\n */\nfunction reloadPageIfCached() {\n    // moving the cache check to after page load as firefox calculates transfer size at the end\n    $(function () {\n        let isCached = window.performance.getEntriesByType(\"navigation\")[0].transferSize === 0;\n        //adding a second check to ensure that if for whatever reason teh transfersize reads wrong, we don't reload on\n        //a reload:\n        let isReload = window.performance.getEntriesByType(\"navigation\")[0].type === \"reload\";\n        if (isCached && !isReload) {\n            window.location.reload();\n        }\n    });\n}\n\nconst indicatorManualNumberSort = (levelFunc, numberFunc) => {\n    return (indicatorA, indicatorB) => {\n        let levelA = levelFunc(indicatorA);\n        let levelB = levelFunc(indicatorB);\n        if (levelA && !levelB) {\n            return 1;\n        }\n        if (levelB && !levelA) {\n            return -1;\n        }\n        if (levelA != levelB) {\n            return parseInt(levelA) - parseInt(levelB);\n        }\n        let numberA = (numberFunc(indicatorA) || '').split('.');\n        let numberB = (numberFunc(indicatorB) || '').split('.');\n        for (let i=0; i < Math.max(numberA.length, numberB.length); i++) {\n            if (numberA[i] && numberB[i]) {\n                for (let j=0; j < Math.max(numberA[i].length, numberB[i].length); j++) {\n                    if (numberA[i][j] && numberB[i][j]) {\n                        if (numberA[i].charCodeAt(j) != numberB[i].charCodeAt(j)) {\n                            return numberA[i].charCodeAt(j) - numberB[i].charCodeAt(j);\n                        }\n                    } else if (numberA[i][j]) {\n                        return 1;\n                    } else if (numberB[i][j]) {\n                        return -1;\n                    }\n                }\n            } else if (numberA[i]) {\n                return 1;\n            } else if (numberB[i]) {\n                return -1;\n            }\n        }\n        return 0;\n    }\n}\n\nconst localizeNumber = (val) => {\n    if (val === undefined || val === null || isNaN(parseFloat(val))) {\n        return null;\n    }\n    var intPart = val.toString();\n    var floatPart = null;\n    if (val.toString().includes(\",\")) {\n        intPart = val.toString().split(\",\")[0];\n        floatPart = val.toString().split(\",\").length > 1 ? val.toString().split(\",\")[1 ] : null;\n    } else if (val.toString().includes(\".\")) {\n        intPart = val.toString().split(\".\")[0];\n        floatPart = val.toString().split(\".\").length > 1 ? val.toString().split(\".\")[1 ] : null;\n    }\n    floatPart = (floatPart && floatPart.length > 0) ? floatPart : null;\n    var displayValue;\n    switch(window.userLang) {\n        case SPANISH:\n            displayValue = intPart.replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\n            if (floatPart) {\n                displayValue += `,${floatPart}`;\n            }\n        break;\n        case FRENCH:\n            displayValue = intPart.replace(/\\B(?=(\\d{3})+(?!\\d))/g, String.fromCharCode(160)); //nbsp\n            if (floatPart) {\n                displayValue += `,${floatPart}`;\n            }\n        break;\n        case ENGLISH:\n        default:\n            displayValue = intPart.replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n            if (floatPart) {\n                displayValue += `.${floatPart}`;\n            }\n        break;\n    }\n    return displayValue;\n};\n\nconst localizePercent = (val) => {\n    if (val === undefined || val === null || isNaN(parseFloat(val))) {\n        return null;\n    }\n    let percent = localizeNumber(Math.round(val * 10000)/100);\n    return (percent === null) ? null : `${percent}%`;\n}\n\nconst sortObjectListByValue = (objects, key='label') => objects.sort((a, b) => {\n    return a[key].toUpperCase() > b[key].toUpperCase() ? 1 : -1\n})\n\nexport { flattenArray, ensureNumericArray, reloadPageIfCached, indicatorManualNumberSort,\n          localizeNumber, localizePercent, sortObjectListByValue };\n","import axios from 'axios';\n\nexport const api = axios.create({\n    withCredentials: true,\n    baseURL: '/api/',\n    headers: {\n        \"X-CSRFToken\": document.cookie.replace(/(?:(?:^|.*;\\s*)csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$/, \"$1\")\n    }\n});\n","import React from 'react'\nimport Select, {components} from 'react-select'\nimport {VirtualizedMenuList as MenuList} from './virtualized-react-select'\nimport ReactMultiSelectCheckboxes from 'react-multiselect-checkboxes';\nimport CheckboxGroup from 'react-multiselect-checkboxes/lib/CheckboxGroup';\nimport { css } from 'emotion';\nimport {observer} from 'mobx-react'\n\n\n/* JSX Element to display, e.g. \"4 selected\" in a multiselect dropdown */\nconst CountLabel = props => {\n    return (\n        <div className=\"count__label\">\n            {props.children}\n            {(props.clearable &&\n                <div onClick={ props.clearSelect }>\n                    <i className=\"fa fa-times\" aria-hidden=\"true\" />\n                </div>\n              )}\n        </div>\n    );\n        \n}\n\n/*\n * CheckboxGroup drop in replacement that delivers a heading without a checkbox if the optgroup has\n * the attribute \"selectable: false\"\n * Also adds a vertical divider above any optgroup with the attribute divider: true\n */\nfunction Group(props) {\n    if (props.data.selectable === false) {\n        const {\n            children,\n            className,\n            cx,\n            getStyles,\n            Heading,\n            setValue,\n            data,\n            label,\n            getValue,\n            theme,\n            selectProps: { getOptionValue },\n          } = props;\n          let headingProps = {getStyles: getStyles, cx: cx, theme: theme, indeterminate: false, checked: false};\n          return (\n            <div className={cx(css(getStyles('group', props)), { group: true }, className)}>\n                <div className={cx(css(getStyles('groupHeading', {...headingProps})),\n                    {'group-heading': true}, className)}>{props.data.label}</div>\n                <div>{props.children}</div>\n            </div>);\n    }\n    if (props.data.divider === true) {\n        return (<React.Fragment>\n                <hr style={{ margin: '3px 0px 0px 0px' }} />\n                <CheckboxGroup {... props} />\n                </React.Fragment>);\n    }\n    return <CheckboxGroup {... props} />;\n}\n\n\n/*\n *  A wrapper for react-multiselect-checkboxes which implements:\n *      - translated \"n selected\" if multiple options are selected (including a \"noList\" attribute for uncounted selections\n *      - optgroups without checkboxes if {selectable: false} applied to optgroup object\n *      - virtualization (??) - this functionality from external vendor needs verification\n */\n@observer\nclass CheckboxedMultiSelect extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n    clearSelect = (e) => {\n        e.stopPropagation();\n        this.props.onChange([]);;\n    }\n\n    makeLabel = (_ref3) => {\n        var placeholderButtonLabel = _ref3.placeholderButtonLabel,\n            thisValue = _ref3.value;\n        if (!thisValue) {\n          return <CountLabel clearable={false}>\n                    {placeholderButtonLabel}\n                </CountLabel>;\n        }\n    \n        if (Array.isArray(thisValue)) {\n            // don't count options with the option attribute noList: true\n            let filteredValues = thisValue.filter(option => !option.noList);\n          if (filteredValues.length === 0) {\n            return <CountLabel clearable={false}>\n                        {placeholderButtonLabel}\n                    </CountLabel>\n          }\n    \n          if (filteredValues.length === 1) {\n            return <CountLabel clearable={true} clearSelect={this.clearSelect}>\n                        {filteredValues[0].label}\n                    </CountLabel>;\n          }\n          return (\n           <CountLabel clearable={true} clearSelect={this.clearSelect}>\n                {\n                    // # Translators: prefixed with a number, as in \"4 selected\" displayed on a multi-select\n                    \"\".concat(filteredValues.length,\" \", gettext(\"selected\"))}\n            </CountLabel>\n            );\n        }\n    \n        return <CountLabel clearable={false}>\n                    {thisValue.label}\n               </CountLabel>;\n      };\n      render() {\n        return <ReactMultiSelectCheckboxes\n                { ...this.props}\n                placeholder={\n                    // # Translators: placeholder text in a search box\n                    gettext(\"Search\")}\n                placeholderButtonLabel={ this.props.placeholder }\n                getDropdownButtonLabel={ this.makeLabel }\n                components={{MenuList, Group }}\n                />;\n      }\n}\n\nexport default CheckboxedMultiSelect\n","import React from 'react'\nimport { observer } from \"mobx-react\"\nimport Select from 'react-select'\nimport CheckboxedMultiSelect from 'components/checkboxed-multi-select'\nimport ManagementTable from 'components/management-table'\nimport Pagination from 'components/pagination'\nimport ProgramEditor from './components/program_editor'\nimport EditProgramProfile from './components/edit_program_profile'\nimport ProgramSettings from './components/program_settings'\nimport ProgramHistory from './components/program_history'\nimport LoadingSpinner from 'components/loading-spinner'\nimport FoldingSidebar from 'components/folding-sidebar'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { sortObjectListByValue } from '../../../general_utilities'\n\nconst UserFilter = observer(({store, filterOptions}) => {\n    return <div className=\"form-group react-multiselect-checkbox\">\n        <label htmlFor=\"users_filter\">{gettext(\"Users\")}</label>\n        <CheckboxedMultiSelect\n            value={store.filters.users}\n            options={filterOptions}\n            onChange={(e) => store.changeFilter('users', e)}\n            placeholder={gettext(\"None Selected\")}\n            id=\"users_filter\" />\n    </div>\n})\n\nconst CountryFilter = observer(({store, filterOptions}) => {\n    return <div className=\"form-group react-multiselect-checkbox\">\n        <label htmlFor=\"countries_filter\">{gettext(\"Countries\")}</label>\n        <CheckboxedMultiSelect\n            value={store.filters.countries}\n            options={filterOptions}\n            onChange={(e) => store.changeFilter('countries', e)}\n            placeholder={gettext(\"None Selected\")}\n            id=\"countries_filter\" />\n    </div>\n})\n\nconst OrganizationFilter = observer(({store, filterOptions}) => {\n    return <div className=\"form-group react-multiselect-checkbox\">\n        <label htmlFor=\"organizations_filter\">{gettext(\"Organizations\")}</label>\n        <CheckboxedMultiSelect\n            value={store.filters.organizations}\n            options={filterOptions}\n            onChange={(e) => store.changeFilter('organizations', e)}\n            placeholder={gettext(\"None Selected\")}\n            id=\"organizations_filter\" />\n    </div>\n})\n\nconst SectorFilter = observer(({store, filterOptions}) => {\n    return <div className=\"form-group react-multiselect-checkbox\">\n        <label htmlFor=\"sector-filter\">{gettext(\"Sectors\")}</label>\n        <CheckboxedMultiSelect\n            value={store.filters.sectors}\n            options={filterOptions}\n            onChange={(e) => store.changeFilter('sectors', e)}\n            placeholder={gettext(\"None Selected\")}\n            id=\"sector-filter\" />\n    </div>\n})\n\nconst ProgramStatusFilter = observer(({store}) => {\n    const statusFilterOptions = [\n        {value: 'Active', label: gettext('Active')},\n        {value: 'Inactive', label: gettext('Inactive')},\n    ]\n    return <div className=\"form-group\">\n        <label htmlFor=\"program-status-filter\">{gettext(\"Status\")}</label>\n        <Select\n            isMulti={false}\n            value={store.filters.programStatus}\n            options={statusFilterOptions}\n            onChange={(e) => store.changeFilter('programStatus', e)}\n            placeholder={gettext(\"None Selected\")}\n            id=\"program-status-filter\" />\n    </div>\n})\n\nconst ProgramFilter = observer(({store, filterOptions}) => {\n    return <div className=\"form-group react-multiselect-checkbox\">\n        <label htmlFor=\"programs-filter\">{gettext(\"Find a Program\")}</label>\n        <CheckboxedMultiSelect\n            value={store.filters.programs}\n            options={filterOptions}\n            onChange={(e) => store.changeFilter('programs', e)}\n            placeholder={gettext(\"None Selected\")}\n            id=\"programs-filter\" />\n    </div>\n})\n\n\nclass BulkActions extends React.Component {\n    constructor(props) {\n        super(props)\n        this.active_child = React.createRef()\n        this.state = {\n            current_action: null,\n            current_vals: []\n        }\n    }\n\n    onActionChanged(new_action) {\n        this.setState({\n            current_action: new_action.value\n        })\n    }\n\n    onChange(vals) {\n        this.setState({\n            current_vals: vals\n        })\n    }\n\n    onApply() {\n        const selected = this.props.secondaryOptions[this.state.current_action]\n        if(selected) {\n            selected.onApply(this.state.current_vals)\n        }\n    }\n\n    render() {\n        const selected = this.props.secondaryOptions[this.state.current_action]\n        const SecondaryComponent = selected && selected.component\n        return <div className=\"controls__bulk-actions\">\n            <div className=\"bulk__select\">\n                <Select\n                placeholder={gettext(\"Bulk Actions\")}\n                value={this.props.primaryOptions.find((o) => o.value == this.state.current_action)}\n                options={this.props.primaryOptions} onChange={(val) => this.onActionChanged(val)} />\n            </div>\n            {selected &&\n            <div className=\"bulk__select\">\n                <SecondaryComponent placeholder={gettext(\"Select...\")} value={this.state.current_vals} onChange={(vals) => this.onChange(vals)}/>\n            </div>\n            }\n            {!selected &&\n            <div className=\"bulk__select\">\n                <Select placeholder=\"---\"  noOptionsMessage={() => gettext('No options')}/>\n            </div>\n            }\n            <button className=\"btn btn-secondary\" disabled={!this.state.current_action} onClick={() => this.onApply()}>{gettext(\"Apply\")}</button>\n        </div>\n    }\n}\n\nexport const IndexView = observer(\n    ({store}) => {\n\n        const allCountryOptions = sortObjectListByValue(Object.entries(store.allCountries).map(([id, country]) => ({value: country.id, label: country.name})))\n        const countryFilterOptions = sortObjectListByValue(Object.entries(store.countries).map(([id, country]) => ({value: country.id, label: country.name})))\n        const organizationFilterOptions = sortObjectListByValue(Object.entries(store.organizations).map(([id, org]) => ({value: org.id, label: org.name})))\n        const sectorFilterOptions = sortObjectListByValue(store.sectors.map(x => ({value: x.id, label: x.name})))\n        const programFilterOptions = sortObjectListByValue(Object.entries(store.programFilterPrograms).map(([id, program]) => ({value: program.id, label: program.name})))\n        const userFilterOptions = sortObjectListByValue(Object.entries(store.users).map(([id, user]) => ({value: user.id, label: user.name})))\n        const bulkProgramStatusOptions = [\n            {value: 'Funded', label: gettext('Active')},\n            {value: 'Completed', label: gettext('Inactive')},\n        ]\n\n        // See #1479 as to why this makes sense\n        const fundingStatusDisplayStr = (funding_status_str) =>\n            funding_status_str.toLowerCase() === 'funded' ? gettext('Active') : gettext('Inactive');\n\n        const bulk_actions = {\n            primary_options: [\n                {label: gettext('Set program status'), value: 'set_program_status'},\n            ],\n            secondary_options: {\n                set_program_status: {\n                    component: (props) => <Select options={bulkProgramStatusOptions} {...props} />,\n                    onApply: (option) => store.bulkUpdateProgramStatus(option.value)\n                },\n            }\n        };\n\n        const organizationColumn = (data) => {\n            if (data.organizations) {\n                return (\n                    <a href={`/tola_management/organization/?programs[]=${data.id}`}>\n                        <i className=\"fas fa-building\"/>&nbsp;\n                        { data.onlyOrganizationId ? store.organizations[data.onlyOrganizationId].name : `${data.organizations} organizations` }\n                    </a>\n                )\n            }\n            return \"---\"\n        };\n\n        return <div id=\"program-management-index-view\" className=\"row\">\n            <FoldingSidebar>\n                <div className=\"filter-section\">\n                    <CountryFilter store={store} filterOptions={countryFilterOptions} />\n                    <UserFilter store={store} filterOptions={userFilterOptions} />\n                    <OrganizationFilter store={store} filterOptions={organizationFilterOptions} />\n                    <SectorFilter store={store} filterOptions={sectorFilterOptions} />\n                    <ProgramStatusFilter store={store} />\n                </div>\n                <div className=\"filter-section filter-buttons\">\n                    <button className=\"btn btn-primary\" onClick={() => store.applyFilters()}>{gettext(\"Apply\")}</button>\n                    <button className=\"btn btn-reset\" onClick={() => store.clearFilters()}>{gettext(\"Reset\")}</button>\n                </div>\n            </FoldingSidebar>\n            <div className=\"col admin-list\">\n                <header className=\"page-title\">\n                    <h1>{gettext(\"Admin:\")} <small>{gettext(\"Programs\")}</small></h1>\n                </header>\n                <div className=\"admin-list__controls\">\n                    <BulkActions primaryOptions={bulk_actions.primary_options} secondaryOptions={bulk_actions.secondary_options}/>\n                    <div className=\"controls__buttons\">\n                        <a href=\"#\" className=\"btn btn-link btn-add\" tabIndex=\"0\" onClick={() => store.createProgram()}>\n                            <i className=\"fas fa-plus-circle\"/>{gettext(\"Add Program\")}\n                        </a>\n                    </div>\n                </div>\n                <div className=\"admin-list__top-filter\">\n                    <ProgramFilter store={store} filterOptions={programFilterOptions} />\n                </div>\n                <LoadingSpinner isLoading={store.fetching_main_listing || store.applying_bulk_updates }>\n                    <div className=\"admin-list__table\">\n                        <ManagementTable\n                            newData={store.new_program}\n                            data={store.programs}\n                            keyField=\"id\"\n                            HeaderRow={({Col, Row}) =>\n                                <Row>\n                                    <Col size=\"0.5\">\n                                        <input type=\"checkbox\" checked={store.bulk_targets_all} onChange={() => store.toggleBulkTargetsAll()}/>\n                                    </Col>\n                                    <Col size=\"2\" className=\"td--stretch\">{gettext(\"Program\")}</Col>\n                                    <Col>{gettext(\"Organizations\")}</Col>\n                                    <Col>{gettext(\"Users\")}</Col>\n                                    <Col>{gettext(\"Status\")}</Col>\n                                </Row>\n                            }\n                            Row={({Col, Row, data}) =>\n                            <Row\n                                expanded={data.id == store.editing_target}\n                                Expando={observer(({Wrapper}) =>\n                                    <Wrapper>\n                                        <ProgramEditor\n                                            new={data.id == 'new'}\n                                            active_pane={store.active_editor_pane}\n                                            notifyPaneChange={(new_pane) => store.onProfilePaneChange(new_pane)}\n                                            ProfileSection={observer(() =>\n                                                <LoadingSpinner isLoading={store.saving}>\n                                                    <EditProgramProfile\n                                                        onIsDirtyChange={is_dirty => store.setActiveFormIsDirty(is_dirty)}\n                                                        new={data.id == 'new'}\n                                                            program_data={data}\n                                                            onUpdate={(id, data) => store.updateProgram(id, data)}\n                                                            onCreate={(new_program_data) => store.saveNewProgram(new_program_data)}\n                                                            sectorOptions={sectorFilterOptions}\n                                                            countryOptions={allCountryOptions}\n                                                            errors={store.editing_errors} />\n                                                </LoadingSpinner>\n                                            )}\n                                            SettingsSection={observer(() =>\n                                                <LoadingSpinner isLoading={store.saving}>\n                                                    <ProgramSettings\n                                                        program_data={data}\n                                                        store={store}\n                                                        onSave={ (id, data) => store.updateProgram(id, data) } />\n                                                </LoadingSpinner>\n                                            )}\n                                            HistorySection={observer(() =>\n                                                <LoadingSpinner isLoading={store.saving}>\n                                                    <ProgramHistory\n                                                        store={store}\n                                                        onIsDirtyChange={is_dirty => store.setActiveFormIsDirty(is_dirty)}\n                                                        program_data={data}\n                                                        fetching_history={store.fetching_editing_history}\n                                                        history={store.editing_history}\n                                                        saving={store.saving}\n                                                        onSave={(id, data) => store.updateProgram(id, data)} />\n                                                </LoadingSpinner>\n                                            )}\n                                        />\n                                    </Wrapper>\n                                )}>\n                                    <Col size=\"0.5\">\n                                            <input type=\"checkbox\" disabled={data.id=='new'} checked={store.bulk_targets.get(data.id) || false} onChange={() => store.toggleBulkTarget(data.id) }/>\n                                    </Col>\n                                    <Col size=\"2\" className=\"td--stretch\">\n                                        {data.id == 'new' &&\n                                            <div className=\"expando-toggle icon__disabled\">\n                                                <div className=\"expando-toggle__icon\">\n                                                    <FontAwesomeIcon icon={(store.editing_target == data.id) ? 'caret-down' : 'caret-right'} />\n                                                </div>\n                                                <div className=\"expando-toggle__label\">\n                                                    <i className=\"fas fa-cube\"/>&nbsp;\n                                                    {data.name ||\n                                                    // # Translators: Label for a freshly created program before the name is entered\n                                                    gettext(\"New Program\")}\n                                                </div>\n                                            </div>\n                                        }\n                                        {data.id != 'new' &&\n                                            <div className=\"expando-toggle icon__clickable\" onClick={() => store.toggleEditingTarget(data.id)} >\n                                                <div className=\"expando-toggle__icon\">\n                                                    <FontAwesomeIcon icon={(store.editing_target == data.id) ? 'caret-down' : 'caret-right'} />\n                                                </div>\n                                                <div className=\"expando-toggle__label\">\n                                                    <i className=\"fas fa-cube\"/>&nbsp;\n                                                    {data.name ||\n                                                    // # Translators: Label for a freshly created program before the name is entered\n                                                    gettext(\"New Program\")}\n                                                </div>\n                                            </div>\n                                        }\n                                    </Col>\n                                    <Col>\n                                        { organizationColumn(data)}\n                                    </Col>\n                                    <Col className=\"text-nowrap\">\n                                        {data.program_users ?\n                                            <a href={`/tola_management/user/?programs[]=${data.id}`}>\n                                                <i className=\"fas fa-users\"/>&nbsp; {\n                                                    // # Translators: preceded by a number, i.e. \"3 users\" or \"1 user\"\n                                                    interpolate(ngettext(\"%s user\", \"%s users\", data.program_users), [data.program_users])\n                                                }</a>\n                                    : <span><i className=\"fas fa-users\" />&nbsp;{\n                                        // # Translators: when no users are connected to the item\n                                        gettext(\"0 users\")\n                                    }</span>}\n                                    </Col>\n                                    <Col>{fundingStatusDisplayStr(data.funding_status)}</Col>\n                                </Row>\n                            }\n                        />\n                    </div>\n                </LoadingSpinner>\n                <div className=\"admin-list__metadata\">\n                    <div className=\"metadata__count text-small text-muted\">{store.program_count ? `${store.program_count} ${gettext(\"programs\")}`:`---`}</div>\n                    <div className=\"metadata__controls\">\n                        {store.total_pages &&\n                         <Pagination\n                            pageCount={store.total_pages}\n                            initialPage={store.current_page}\n                            onPageChange={page => store.changePage(page)} />\n                        }\n                    </div>\n                </div>\n            </div>\n        </div>\n    }\n)\n","import React from 'react'\nimport { observer } from \"mobx-react\"\n\n@observer\nexport default class ProgramEditor extends React.Component {\n\n    updateActivePage(new_page) {\n        if(!this.props.new) {\n            this.props.notifyPaneChange(new_page)\n        }\n    }\n\n    render() {\n        const {ProfileSection, SettingsSection, HistorySection, active_pane} = this.props\n\n        const profile_active_class = (active_pane == 'profile')?'active':''\n        const settings_active_class = (active_pane == 'settings')?'active':''\n        const history_active_class = (active_pane == 'status_and_history')?'active':''\n        const new_class = (this.props.new)?'disabled':''\n\n        return (\n            <div className=\"user-editor tab-set--vertical\">\n                <ul className=\"nav nav-tabs\">\n                    <li className=\"nav-item\">\n                        <a href=\"#\" className={`nav-link ${profile_active_class}`}\n                            onClick={(e) => { e.preventDefault(); this.updateActivePage('profile');}}>\n                            {gettext(\"Profile\")}\n                        </a>\n                    </li>\n                    <li className=\"nav-item\">\n                        <a href=\"#\" className={`nav-link ${settings_active_class} ${new_class}`}\n                            onClick={(e) => { e.preventDefault(); this.updateActivePage('settings');}}>\n                            {gettext(\"Settings\")}\n                        </a>\n                    </li>\n                    <li className=\"nav-item\">\n                        <a href=\"#\" className={`nav-link ${history_active_class} ${new_class}`}\n                            onClick={(e) => { e.preventDefault(); this.updateActivePage('status_and_history')}}>\n                            {gettext(\"Status and History\")}\n                        </a>\n                    </li>\n                </ul>\n                <div className=\"tab-content\">\n                    {active_pane == 'profile' &&\n                    <ProfileSection />\n                    }\n                    {active_pane == 'settings' &&\n                    <SettingsSection />\n                    }\n                    {active_pane == 'status_and_history' &&\n                    <HistorySection />\n                    }\n                </div>\n            </div>\n        )\n    }\n}\n","import React from 'react'\n\n/* Sidebar expando/collapso mimicking bootstrap behavior\n * CSS in components/_folding_sidebar.scss\n * Usage: <FoldingSidebar>\n *          children to be hidden when toggle is clicked\n *         </FoldingSidebar>\n */\n\nclass FoldingSidebar extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            folding: false,\n            folded: false,\n            resize: false\n        };\n        this.contentsContainer = React.createRef();\n    }\n\n    componentDidMount() {\n        this.contentWidth = this.contentsContainer.current.offsetWidth;\n        window.addEventListener(\"resize\", this.updateDimensions);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener(\"resize\", this.updateDimensions);\n    }\n\n    updateDimensions = () => {\n        if (!this.state.folded && !this.state.folding) {\n            this.setState(() => ({resize: true}),\n                          () => {\n                            this.contentWidth = this.contentsContainer.current.offsetWidth;\n                            this.setState({resize: false});\n                          });\n        }\n    }\n\n    toggleFolded() {\n        if (!this.state.folding) {\n            this.setState(\n                {folding: true,\n                 folded: !this.state.folded});\n        } else {\n            this.foldComplete();\n        }\n    }\n\n    foldComplete() {\n        this.setState(() => ({folding: false}), this.updateDimensions);\n    }\n\n    render() {\n        const {className, ...props} = this.props\n        const icon = this.state.folded\n                     ? this.state.folding\n                        ? \"fa-angle-double-left\" : \"fa-chevron-right\"\n                     : this.state.folding\n                        ? \"fa-angle-double-right\" : \"fa-chevron-left\";\n        const width = this.state.folded ? \"0px\" : this.state.resize ? \"auto\" : this.contentWidth + \"px\";\n        const overflow = (this.state.folded || this.state.folding) ? \"hidden\" : \"visible\";\n        return (\n        <div className={\"folding-sidebar \"+(className || '')} {...props}>\n            <div className={\"folding-sidebar__contents\"}\n                 onTransitionEnd={() => this.foldComplete()}\n                 ref={this.contentsContainer}\n                style={{width: width, overflow: overflow }}\n            >\n                <React.Fragment>{this.props.children}</React.Fragment>\n            </div>\n            <div className=\"folding-sidebar__trigger\" onClick={() => this.toggleFolded()}>\n                <i key={icon}><span className={\"fa \"+icon}></span></i>\n            </div>\n        </div>\n        );\n    }\n}\n\nexport default FoldingSidebar\n","/* Site-wide constants */\n\n\n/**\n * JS_GLOBALS is in base.html (base Tola template) - delivered by middleware from the backend\n * this function returns the global constant for a given key (i.e. 'reason_for_change_options')\n */\n\nfunction getGlobal(key) {\n    if ((typeof JS_GLOBALS !== 'undefined')  && JS_GLOBALS.hasOwnProperty(key)) {\n        return JS_GLOBALS[key];\n    }\n    return null;\n}\n\n\n/**\n * IPTT Constants:\n */\nconst BLANK_LABEL = '---------';\nconst BLANK_OPTION = {\n    value: null,\n    label: BLANK_LABEL\n};\nconst EM_DASH = \"—\";\nconst BLANK_TABLE_CELL = EM_DASH;\n\n\nconst TVA = 1;\nconst TIMEPERIODS = 2;\n\nconst TIME_AWARE_FREQUENCIES = [3, 4, 5, 6, 7];\nconst IRREGULAR_FREQUENCIES = [1, 2];\n\nconst TVA_FREQUENCY_LABELS = Object.freeze(\n    {\n        1: gettext(\"Life of Program (LoP) only\"),\n        2: gettext(\"Midline and endline\"),\n        3: gettext(\"Annual\"),\n        4: gettext(\"Semi-annual\"),\n        5: gettext(\"Tri-annual\"),\n        6: gettext(\"Quarterly\"),\n        7: gettext(\"Monthly\")\n    }\n);\n\nconst TIMEPERIODS_FREQUENCY_LABELS = Object.freeze(\n    {\n        3: gettext(\"Years\"),\n        4: gettext(\"Semi-annual periods\"),\n        5: gettext(\"Tri-annual periods\"),\n        6: gettext(\"Quarters\"),\n        7: gettext(\"Months\")\n    }\n);\n\nexport { BLANK_OPTION, BLANK_LABEL, BLANK_TABLE_CELL, EM_DASH, TVA, TIMEPERIODS, TIME_AWARE_FREQUENCIES,\n         IRREGULAR_FREQUENCIES, TVA_FREQUENCY_LABELS, TIMEPERIODS_FREQUENCY_LABELS };\n\nconst GROUP_BY_CHAIN = 1;\nconst GROUP_BY_LEVEL = 2;\n\nexport { GROUP_BY_CHAIN, GROUP_BY_LEVEL };\n\nconst _gettext = (typeof gettext !== 'undefined') ?  gettext : (s) => s;\n\nfunction getPeriodLabels() {\n    return {\n        targetperiodLabels: {\n            1: _gettext(\"Life of Program (LoP) only\"),\n            3: _gettext(\"Annual\"),\n            2: _gettext(\"Midline and endline\"),\n            5: _gettext(\"Tri-annual\"),\n            4: _gettext(\"Semi-annual\"),\n            7: _gettext(\"Monthly\"),\n            6: _gettext(\"Quarterly\")\n        },\n        timeperiodLabels: {\n            3: _gettext(\"Years\"),\n            5: _gettext(\"Tri-annual periods\"),\n            4: _gettext(\"Semi-annual periods\"),\n            7: _gettext(\"Months\"),\n            6: _gettext(\"Quarters\")\n        }\n    };\n}\n\nexport {getPeriodLabels};\n\nexport const STATUS_CODES = {\n    NO_INDICATOR_IN_UPDATE: 1\n};\n\nexport const IndicatorFilterType = Object.freeze({\n    noFilter: 0,\n    missingTarget: 1,\n    missingResults: 2,\n    missingEvidence: 3,\n\n    aboveTarget: 5,\n    belowTarget: 6,\n    onTarget: 7,\n    nonReporting: 8\n});\n\nexport const RFC_OPTIONS = getGlobal('reason_for_change_options') ?? [];","import React from 'react';\nimport { observer } from 'mobx-react';\n\n@observer\nexport default class ProgramSettings extends React.Component {\n    constructor(props) {\n        super(props);\n        let grouping = props.program_data._using_results_framework === undefined ?\n                false : props.program_data._using_results_framework;\n        let autonumber = grouping === 1 ? null : props.program_data.auto_number_indicators;\n        this.state = {\n            autonumber: autonumber,\n            grouping: grouping\n        };\n        const originalState = {\n            autonumber: autonumber,\n            grouping: grouping\n        };\n        this.resetForm = () => {\n            this.setState(originalState);\n        }\n        this.formDirty = () => {\n            return this.state.autonumber != originalState.autonumber || this.state.grouping != originalState.grouping;\n        }\n    }\n    \n    autonumberChange = (e) => {\n        if (e.target.value == \"2\") {\n            this.setState({\n                autonumber: false\n            });\n        } else {\n            this.setState({\n                autonumber: true\n            });\n        } \n    }\n    \n    groupingChange = (e) => {\n        if (e.target.checked) {\n            this.setState({grouping: 2});\n        } else {\n            this.setState({grouping: 1});\n        }\n    }\n    \n    save = (e) => {\n        e.preventDefault();\n        let data = { ...this.props.program_data,\n                     };\n        if (this.state.grouping !== false) {\n            data._using_results_framework = this.state.grouping;\n        }\n        if (this.state.autonumber !== null) {\n            data.auto_number_indicators = this.state.autonumber;\n        }\n        this.props.onSave(this.props.program_data.id, data);\n    }\n\n    \n    render() {\n        return (\n            <div className=\"tab-pane--react\">\n                <h2 className=\"no-bold\">{this.props.program_data.name ? this.props.program_data.name+': ' : ''}{gettext(\"Settings\")}</h2>\n                <div className=\"d-flex flex-column w-75 pr-5\">\n                    <form className=\"form\">\n                        { this.state.grouping !== false &&\n                        <React.Fragment>\n                        <h4>{ gettext(\"Indicator grouping\") }</h4>\n                         <div className=\"form-check mb-3\">\n                            <input\n                                className=\"form-check-input\"\n                                type=\"checkbox\"\n                                name=\"grouping\"\n                                id=\"grouping\"\n                                checked={ this.state.grouping == 2 }\n                                onChange={ this.groupingChange }\n                                />\n                            <label className=\"form-check-label\" htmlFor=\"grouping\">\n                            <strong>{gettext('Group indicators according to the results framework')}:</strong>\n                            <span>\n                                &nbsp; {gettext('After you have set a results framework for this program and assigned indicators to it, ' +\n                                'select this option to retire the original indicator levels and view indicators grouped by ' +\n                                'results framework levels instead.  This setting affects the program page, indicator plan, ' +\n                                'and IPTT reports.')}\n                            </span>\n                            </label>        \n                        </div>\n                        </React.Fragment>}\n                        { this.state.autonumber !== null &&\n                        <React.Fragment>\n                        <h4>{ gettext(\"Indicator numbering\") }</h4>\n                        <div className=\"form-check mb-3\">\n                            <input\n                                className=\"form-check-input\"\n                                type=\"radio\"\n                                value=\"1\"\n                                name=\"autonumber\"\n                                id=\"autonumber_on\"\n                                checked={ this.state.autonumber }\n                                onChange={ this.autonumberChange }\n                                />\n                            <label className=\"form-check-label\" htmlFor=\"autonumber_on\">\n                            <strong>{\n                                // # Translators: Auto-number meaning the system will do this automatically\n                                gettext('Auto-number indicators (recommended)')\n                            }:</strong>\n                            &nbsp; {gettext('Indicator numbers are automatically determined by their results framework assignments.')}\n                            </label>        \n                        </div>\n                        <div className=\"form-check mb-5\">\n                            <input\n                                className=\"form-check-input\"\n                                type=\"radio\"\n                                value=\"2\"\n                                name=\"autonumber\"\n                                id=\"autonumber_off\"\n                                checked={ !this.state.autonumber }\n                                onChange={ this.autonumberChange }\n                                />\n                            <label className=\"form-check-label\" htmlFor=\"autonumber_off\">\n                            <strong>{gettext('Manually number indicators')}:</strong>\n                            &nbsp; {gettext('If your donor requires a special numbering convention, you can enter a custom number for each indicator.')}\n                            <strong className=\"text-danger\">&nbsp; {gettext('Manually entered numbers do not affect the order in which indicators are listed; they are purely for display purposes.')}</strong>\n                            </label>        \n                        </div>\n                        </React.Fragment>\n                        }\n                        <div className=\"form-group btn-row\">\n                            <button disabled={!this.formDirty()} className=\"btn btn-primary\" type=\"button\" onClick={(e) => this.save(e)}>{gettext(\"Save Changes\")}</button>\n                            <button className=\"btn btn-reset\" type=\"button\" onClick={() => this.resetForm()}>{gettext(\"Reset\")}</button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        )\n    }\n}","import { observable, computed, action, runInAction } from \"mobx\";\nimport {sortObjectListByValue} from \"../../../general_utilities\";\n\n\nexport class ProgramStore {\n\n    //filter options\n    @observable countries = {}\n    @observable allCountries = {}\n    @observable organizations = {}\n    @observable users = {}\n    @observable sectors = []\n\n    @observable filters = {\n        countries: [],\n        organizations: [],\n        sectors: [],\n        programStatus: null,\n        programs: [],\n        users: []\n    }\n\n    @observable appliedFilters = {\n    }\n\n    @observable programFilterPrograms = []\n    @observable programs = []\n    @observable program_count = 0\n    @observable new_program = null\n    @observable fetching_main_listing = false\n    @observable current_page = 0\n    @observable total_pages = null\n    @observable bulk_targets = new Map()\n    @observable bulk_targets_all = false\n\n    @observable editing_target = null\n    @observable editing_errors = {}\n    @observable fetching_editing_history = true\n    @observable editing_history = []\n    @observable saving = false\n\n    @observable applying_bulk_updates = false\n\n    @observable active_editor_pane = 'profile'\n\n    // UI state - track what history rows are expanded\n    @observable changelog_expanded_rows = new Set();\n\n    active_pane_is_dirty = false\n\n    constructor(\n        api,\n        initialData,\n    ) {\n        this.api = api\n        Object.assign(this, initialData)\n        this.appliedFilters = {...this.filters}\n        this.fetchPrograms()\n    }\n\n    marshalFilters(filters) {\n        return Object.entries(filters).reduce((xs, [filterKey, filterValue]) => {\n            if (Array.isArray(filterValue)) {\n                xs[filterKey] = filterValue.map(x => x.value)\n            } else if (filterValue) {\n                xs[filterKey] = filterValue.value\n            }\n            return xs\n        }, {})\n    }\n\n    dirtyConfirm() {\n        return !this.active_pane_is_dirty || (this.active_pane_is_dirty && confirm(gettext(\"You have unsaved changes. Are you sure you want to discard them?\")))\n    }\n\n    @action\n    onProfilePaneChange(new_pane) {\n        if(this.dirtyConfirm()) {\n            this.active_editor_pane = new_pane\n            this.active_pane_is_dirty = false\n        }\n    }\n\n    setActiveFormIsDirty(is_dirty) {\n        this.active_pane_is_dirty = is_dirty\n    }\n\n    setActivePaneSaveAction(action) {\n        this.active_pane_save = action\n    }\n\n    @action\n    fetchPrograms() {\n        if(this.dirtyConfirm()) {\n            this.fetching_main_listing = true\n            this.api.fetchPrograms(this.current_page + 1, this.marshalFilters(this.appliedFilters)).then(results => {\n                runInAction(() => {\n                    this.fetching_main_listing = false\n                    this.programs = sortObjectListByValue(results.results, 'name')\n                    this.program_count = results.total_results\n                    this.total_pages = results.total_pages\n                    this.next_page =results.next_page\n                    this.previous_page = results.previous_page\n                    this.active_editor_pane = 'profile'\n                    this.active_pane_is_dirty = false\n                })\n            })\n            this.api.fetchProgramsForFilter(this.marshalFilters(this.appliedFilters)).then(response => {\n                runInAction(() => {\n                    this.programFilterPrograms = response.data\n                })\n            })\n        }\n\n    }\n\n    @action\n    applyFilters() {\n        this.appliedFilters = {...this.filters}\n        this.current_page = 0\n        this.fetchPrograms()\n    }\n\n    @action\n    changePage(page) {\n        if (page.selected == this.current_page) {\n            return\n        }\n        this.current_page = page.selected\n        this.bulk_targets = new Map()\n        this.bulk_targets_all = false;\n        this.fetchPrograms()\n    }\n\n    @action\n    changeFilter(filterKey, value) {\n        this.filters = Object.assign(this.filters, {[filterKey]: value})\n        if (filterKey == 'programs') {\n            // \"Find a program\" filter should immediately activate filters:\n            this.applyFilters();\n        }\n    }\n\n    @action\n    clearFilters() {\n        let clearFilters = {\n            countries: [],\n            organizations: [],\n            sectors: [],\n            programStatus: null,\n            programs: this.filters.programs || [],\n            users: []\n        }\n        this.filters = Object.assign(this.filters, clearFilters);\n    }\n\n    @action\n    toggleEditingTarget(id) {\n        if(this.dirtyConfirm()) {\n            if(this.editing_target == 'new') {\n                this.programs.shift()\n                this.editing_errors = {}\n            }\n            this.active_editor_pane = 'profile'\n\n            if(this.editing_target == id) {\n                this.editing_target = false\n                this.editing_errors = {}\n            } else {\n                this.editing_target = id\n                this.fetching_editing_history = true\n                this.api.fetchProgramHistory(id).then(resp => {\n                    runInAction(() => {\n                        this.fetching_editing_history = false\n                        this.editing_history = resp.data\n                    })\n                })\n            }\n        }\n    }\n\n    updateLocalPrograms(updated) {\n        this.programs = this.programs.reduce((acc, current) => {\n            if (current.id == updated.id) {\n                acc.push(updated)\n            } else {\n                acc.push(current)\n            }\n            return acc\n        }, [])\n    }\n\n    onSaveSuccessHandler() {\n        PNotify.success({text: gettext(\"Successfully saved\"), delay: 5000})\n    }\n\n    onSaveErrorHandler() {\n        PNotify.error({text: gettext(\"Saving failed\"), delay: 5000})\n    }\n\n    onGAITDatesSyncSuccess() {\n        // # Translators: Notify user that the program start and end date were successfully retrieved from the GAIT service and added to the newly saved Program\n        PNotify.success({text: gettext(\"Successfully synced GAIT program start and end dates\"), delay: 5000})\n    }\n\n    onGAITDatesSyncFailure(reason, program_id) {\n        PNotify.notice({\n            // # Translators: Notify user that the program start and end date failed to be retrieved from the GAIT service with a specific reason appended after the :\n            text: gettext(\"Failed to sync GAIT program start and end dates: \") + reason,\n            hide: false,\n            modules: {\n                Confirm: {\n                    confirm: true,\n                    buttons: [\n                        {\n                            // # Translators: A request failed, ask the user if they want to try the request again\n                            text: gettext('Retry'),\n                            primary: true,\n                            click: (notice) => {\n                                this.syncGAITDates(program_id);\n                                notice.close();\n                            }\n                        },\n                        {\n                            // # Translators: button label - ignore the current warning modal on display\n                            text: gettext('Ignore'),\n                            click: (notice) => {\n                                notice.close();\n                            }\n                        }\n                    ]\n                }\n            },\n        })\n    }\n\n    @action\n    createProgram() {\n        if(this.dirtyConfirm()) {\n            if(this.editing_target == 'new') {\n                this.programs.shift()\n            }\n            this.active_editor_pane = 'profile'\n            this.active_pane_is_dirty = false\n\n            let new_program_data = {\n                id: \"new\",\n                name: \"\",\n                gaitid: \"\",\n                fundcode: \"\",\n                funding_status: \"Funded\",\n                description: \"\",\n                country: [],\n                sector: [],\n            }\n            this.programs.unshift(new_program_data)\n            this.editing_target = 'new'\n        }\n    }\n\n    /*\n     * if there is no GAIT Id, resolve and move on,\n     * if there is a GAIT ID, call to see if it is unique, and if not confirm that the user wants to enter a\n     * duplicate GAIT ID for this program (displaying the link to view programs with the same ID in GAIT)\n     */\n\n    validateGaitId(program_data) {\n        if (program_data.gaitid) {\n            let id = program_data.id || 0;\n            return new Promise((resolve, reject) => {\n                    this.api.validateGaitId(program_data.gaitid, id).then(response => {\n                        if (response.data.unique === false) {\n                        let message_intro = gettext('The GAIT ID for this program is shared with at least one other program.')\n                        let link_text = gettext('View programs with this ID in GAIT.');\n                        let preamble_text = `${message_intro} <a href=\"${response.data.gait_link}\" target=\"_blank\">${link_text}</a>`;\n                        window.create_unified_changeset_notice({\n                            header: gettext('Warning'),\n                            show_icon: true,\n                            rationale_required: false,\n                            include_rationale: false,\n                            message_text: gettext('Are you sure you want to continue?'),\n                            notice_type: 'error',\n                            on_submit: resolve,\n                            on_cancel: reject,\n                            preamble: preamble_text\n                        });\n                        } else {\n                            resolve();\n                        }\n                    }\n                ).catch(e => reject(e))\n            });\n        } else {\n            return new Promise((resolve, reject) => resolve());\n        }\n    }\n\n    /*\n     * Returns a promise that requests that GAIT start/end dates are synced to the\n     * existing program with the given program id\n     */\n\n    syncGAITDates(program_id) {\n        // get GAIT dates into the program model on the server\n        return this.api.syncGAITDates(program_id).then((gaitSyncResponse) => {\n            let gait_error = gaitSyncResponse.data.gait_error;\n            if (! gait_error) {\n                this.onGAITDatesSyncSuccess();\n            } else {\n                this.onGAITDatesSyncFailure(gait_error, program_id);\n            }\n        }).catch(error => {\n            // # Translators: error message when trying to connect to the server\n            this.onGAITDatesSyncFailure(gettext('There was a network or server connection error.'), program_id)\n\n            return Promise.reject('Request error to sync GAIT dates')\n        })\n    }\n\n    @action\n    saveNewProgram(program_data) {\n        program_data.id = null\n        this.saving = true\n        this.validateGaitId(\n            program_data\n        ).then(() => {\n            // create program\n            return this.api.createProgram(program_data).catch(error => {\n                // form validation error handling\n                if (error.response) {\n                    runInAction(() => {\n                        this.editing_errors = error.response.data\n                    })\n                }\n\n                // propagate error to avoid trying to continue\n                return Promise.reject('program creation failed')\n            })\n        }).then(response => {\n            // now pull history data of newly created program\n            return Promise.all([response, this.api.fetchProgramHistory(response.data.id)])\n        }).then(([response, history]) => {\n            // update the model\n            runInAction(() => {\n                this.editing_errors = {};\n                this.editing_target = response.data.id;\n                this.editing_target_data = response.data;\n                this.editing_history = history.data;\n                this.programs.shift();\n                this.programs.unshift(response.data);\n                this.programFilterPrograms.unshift(response.data);\n                this.active_pane_is_dirty = false;\n                this.onSaveSuccessHandler();\n            })\n\n            return response\n        }).then((response) => {\n            // don't try to sync gait dates without an id\n            if (! response.data.gaitid) {\n                return Promise.reject('No GAIT id on program')\n            }\n\n            return this.syncGAITDates(response.data.id);\n        }).finally(() => {\n            runInAction(() => {\n                this.saving = false\n            })\n        }).catch(error => {\n            console.log(\"There was an error in saving a new program\");\n        })\n    }\n\n    @action updateProgram(id, program_data) {\n        this.saving = true\n        this.api.updateProgram(id, program_data)\n            .then(response => this.api.fetchProgramHistory(id)\n                .then(history =>\n                    runInAction(() => {\n                        this.saving = false;\n                        this.editing_errors = {};\n                        this.active_pane_is_dirty = false;\n                        this.editing_target_data = program_data;\n                        this.updateLocalPrograms(response.data);\n                        this.editing_history = history.data;\n                        this.onSaveSuccessHandler();\n                    })))\n            .catch((errors) => {\n                runInAction(() => {\n                    this.saving = false\n                    this.editing_errors = errors.response.data\n                    this.onSaveErrorHandler()\n                })\n            })\n    }\n\n    @action\n    toggleBulkTarget(target_id) {\n        this.bulk_targets.set(target_id, !this.bulk_targets.get(target_id))\n    }\n\n    @action\n    toggleBulkTargetsAll() {\n        this.bulk_targets_all = !this.bulk_targets_all\n        this.bulk_targets = new Map(this.programs.map(program => [program.id, this.bulk_targets_all]))\n    }\n\n    postBulkUpdateLocalPrograms(updatedPrograms) {\n        let updatedProgramsById = new Map(updatedPrograms.map(program => [program.id, program]))\n        this.programs = this.programs.reduce((acc, current) => {\n            let updated = updatedProgramsById.get(current.id)\n            if (updated) {\n                acc.push(Object.assign(current, updated))\n            } else {\n                acc.push(current)\n            }\n            return acc\n        }, [])\n    }\n\n    @action\n    bulkUpdateProgramStatus(new_status) {\n        let ids = Array.from(this.bulk_targets.entries()).filter(([id, targeted]) => targeted).map(([id, targeted]) => id)\n        if (ids.length && new_status) {\n            this.applying_bulk_updates = true\n            this.api.updateProgramFundingStatusBulk(ids, new_status).then(response => {\n                let updatedPrograms = response.data\n                runInAction(() => {\n                    this.postBulkUpdateLocalPrograms(updatedPrograms)\n                    this.applying_bulk_updates = false\n                    this.onSaveSuccessHandler()\n                })\n            }).catch(error => {\n                runInAction(() => {\n                    this.applying_bulk_updates = false\n                    this.onSaveErrorHandler()\n                })\n            })\n        }\n    }\n\n    @action\n    toggleChangeLogRowExpando(row_id) {\n        if (this.changelog_expanded_rows.has(row_id)) {\n            this.changelog_expanded_rows.delete(row_id);\n        } else {\n            this.changelog_expanded_rows.add(row_id);\n        }\n    }\n}\n"],"mappings":"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;;;;;;;;;;ACvCA;AACA;AACA;AACA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAGA;AAAA;AAEA;AAAA;AAAA;AACA;AAGA;AAGA;AACA;AAAA;AACA;AAAA;AAAA;AAOA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AACA;AAAA;AAIA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAKA;AAAA;AAKA;AAAA;AAMA;AACA;AACA;AAAA;AAEA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAGA;AACA;AACA;AADA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAnBA;AACA;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAFA;AACA;;;;;;;;;;;;;ACzIA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AADA;AAHA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAAA;AACA;AACA;AAAA;AAGA;AAAA;AACA;AAAA;AAAA;AAMA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AA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DA;AACA;AAAA;AACA;AAFA;AAoBA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AA1BA;AACA;AACA;AACA;AAHA;AAKA;AAPA;AAQA;AACA;;;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;;;AAYA;AACA;AACA;AACA;AACA;AADA;AAEA;AACA;AACA;AACA;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAEA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AACA;AAKA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAHA;AAOA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAIA;;;;AAnEA;AACA;AAqEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/EA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAGA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAWA;AAEA;AACA;AACA;AACA;AACA;AALA;AASA;AAGA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AACA;AACA;AACA;AACA;AACA;AALA;AAVA;AAkBA;AACA;AACA;AAEA;AACA;AADA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AATA;AAYA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzGA;AACA;AACA;AAEA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAsBA;AACA;AACA;AADA;AAGA;AACA;AACA;AADA;AAGA;AACA;AACA;AAhCA;AAkCA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAxCA;AA0CA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAnDA;AAEA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AACA;AAGA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAnBA;AAmBA;AACA;;;AAmCA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAIA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AAAA;AAAA;AAcA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AAAA;AAAA;AAGA;AAKA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AASA;AAAA;AAAA;AAGA;AAAA;AAKA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;;;;AApIA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACLA;AACA;AAGA;AAEA;AAuCA;AAKA;AAGA;AACA;AADA;AACA;AADA;AACA;AADA;AACA;AADA;AACA;AADA;AACA;AADA;AACA;AADA;AACA;AADA;AACA;AADA;AACA;AADA;AACA;AADA;AACA;AADA;AACA;AADA;AACA;AADA;AACA;AADA;AACA;AADA;AACA;AADA;AACA;AADA;AACA;AADA;AACA;AADA;AACA;AADA;AACA;AADA;AACA;AADA;AACA;AADA;AACA;AADA;AACA;AACA;AACA;AACA;AACA;AACA;AAvDA;AAAA;AAAA;AAyDA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAjEA;AAAA;AAAA;AAoEA;AACA;AArEA;AAAA;AAAA;AAyEA;AACA;AACA;AACA;AACA;AA7EA;AAAA;AAAA;AAgFA;AACA;AAjFA;AAAA;AAAA;AAoFA;AACA;AArFA;AAAA;AAAA;AAwFA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AA9GA;AAAA;AAAA;AAkHA;AACA;AACA;AACA;AArHA;AAAA;AAAA;AAyHA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAhIA;AAAA;AAAA;AAoIA;AACA;AAAA;AACA;AACA;AACA;AACA;AAzIA;AAAA;AAAA;AA6IA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AAtJA;AAAA;AAAA;AAyJA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/KA;AAAA;AAAA;AAkLA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AA1LA;AAAA;AAAA;AA6LA;AAAA;AAAA;AAAA;AACA;AA9LA;AAAA;AAAA;AAiMA;AAAA;AAAA;AAAA;AACA;AAlMA;AAAA;AAAA;AAqMA;AACA;AAAA;AAAA;AAAA;AACA;AAvMA;AAAA;AAAA;AAyMA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAPA;AAUA;AACA;AACA;AACA;AACA;AALA;AAZA;AADA;AAJA;AA4BA;AAtOA;AAAA;AAAA;AA0OA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAUA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AArQA;AAAA;AAAA;AAsQA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAWA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAzSA;AAAA;AAAA;AA0SA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzTA;AAAA;AAAA;AA4TA;AACA;AAAA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9WA;AAAA;AAAA;AAgXA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AATA;AADA;AAYA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AArYA;AAAA;AAAA;AAyYA;AACA;AA1YA;AAAA;AAAA;AA6YA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAhZA;AAAA;AAAA;AAmZA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AA7ZA;AAAA;AAAA;AAgaA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAlbA;AAAA;AAAA;AAsbA;AACA;AACA;AACA;AACA;AACA;AA3bA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AACA;AACA;AACA;AACA;AANA;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;A","sourceRoot":""}