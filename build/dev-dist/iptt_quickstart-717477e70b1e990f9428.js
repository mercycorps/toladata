(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"+aul":function(e,t,r){"use strict";r.r(t);var n=r("q1tI"),o=r.n(n),i=r("i8i4"),a=r.n(i),c=r("okNM"),s=r("2vnA"),u=r("1d5Q"),l=r("OtFd");function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=Object(l.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{periods:e.periods}})),m=Object(u.a)(u.d,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{frequencies:Object(s.n)(new Set((e.frequencies||[]).map((function(e){return parseInt(e)})).filter((function(e){return!isNaN(e)})))),periodRanges:Object(s.n)(new Map(Object.entries(e.period_date_ranges||{}).map((function(e){var t=p(e,2),r=t[0],n=t[1],o=parseInt(r);return[o,d({frequency:o,periods:n})]})))),validFrequency:function(e){return!isNaN(parseInt(e))&&this.frequencies.has(parseInt(e))},_getPeriods:function(e){return!(isNaN(parseInt(e))||!this.periodRanges.has(parseInt(e)))&&this.periodRanges.get(parseInt(e))},periodCount:function(e){var t=this._getPeriods(e);return!!t&&t.periodCount},currentPeriod:function(e){var t=this._getPeriods(e);return!!t&&t.currentPeriod+1}}}));function h(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var b,v,O,w,P,_,I,S,k,j,C=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootStore=t,this.programs=new Map((r||[]).map((function(e){var t=new m(e);return[t.pk,t]})).sort((function(e,t){return e[1].name.toUpperCase()<t[1].name.toUpperCase()?-1:e[1].name.toUpperCase()>t[1].name.toUpperCase()?1:0})))}var t,r,n;return t=e,(r=[{key:"getProgram",value:function(e){return this.programs.get(e)}},{key:"programList",get:function(){return h(this.programs.values())}}])&&y(t.prototype,r),n&&y(t,n),e}();function R(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,t,r,n,o){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var L,F,N,x={value:null,label:"---------"},D=(v=T((b=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,"tvaProgramId",v,this),E(this,"timeperiodsProgramId",O,this),E(this,"frequencyId",w,this),E(this,"showAll",P,this),E(this,"mostRecent",_,this),E(this,"mostRecentCount",I,this),E(this,"setMostRecent",S,this),E(this,"setMostRecentCount",k,this),E(this,"setShowAll",j,this),this.programStore=new C(this,t.programs),this.periodLabels={1:gettext("Life of Program (LoP) only"),2:gettext("Midline and endline"),3:gettext("Annual"),4:gettext("Semi-annual"),5:gettext("Tri-annual"),6:gettext("Quarterly"),7:gettext("Monthly")},this.iptt_url=t.iptt_url;Object(s.o)((function(){return r.tvaProgramId}),(function(e){null===e||null===r.frequencyId||r.programStore.getProgram(e).frequencies.has(r.frequencyId)||r.setFrequency(null)}));this.setTVAProgram(t.initial_selected_program_id),this.setTimeperiodsProgram(t.initial_selected_program_id)}var t,r,n;return t=e,(r=[{key:"setTVAProgram",value:function(e){isNaN(parseInt(e))?this.tvaProgramId=null:this.tvaProgramId=parseInt(e)}},{key:"setTimeperiodsProgram",value:function(e){isNaN(parseInt(e))?this.timeperiodsProgramId=null:this.timeperiodsProgramId=parseInt(e)}},{key:"setFrequency",value:function(e){this.frequencyId=e}},{key:"timeperiodsProgramOptions",get:function(){return this.programStore.programList.map((function(e){return{value:e.pk,label:e.name}}))}},{key:"tvaProgramOptions",get:function(){return this.programStore.programList.filter((function(e){return e.frequencies.size>0})).map((function(e){return{value:e.pk,label:e.name}}))}},{key:"frequencyOptions",get:function(){var e=this;return null===this.tvaProgramId?[x]:R(this.programStore.getProgram(this.tvaProgramId).frequencies).map((function(t){return{value:t,label:e.periodLabels[t]}}))}},{key:"selectedTVAProgram",get:function(){return null===this.tvaProgramId?x:{value:this.tvaProgramId,label:this.programStore.getProgram(this.tvaProgramId).name}}},{key:"selectedTimeperiodsProgram",get:function(){return null===this.timeperiodsProgramId?x:{value:this.timeperiodsProgramId,label:this.programStore.getProgram(this.timeperiodsProgramId).name}}},{key:"selectedFrequency",get:function(){return null===this.tvaProgramId||null===this.frequencyId?x:{value:this.frequencyId,label:this.periodLabels[this.frequencyId]}}},{key:"periodCountDisabled",get:function(){return null===this.tvaProgramId||-1==[3,4,5,6,7].indexOf(this.frequencyId)}},{key:"mostRecentCountDisplay",get:function(){return!this.periodCountDisabled&&this.mostRecent?this.mostRecentCount:""}},{key:"mostRecentCountAccurate",get:function(){return!(!this.mostRecent||!this.mostRecentCount)&&Math.min(this.mostRecentCount,this.programStore.getProgram(this.tvaProgramId).currentPeriod(this.frequencyId))}},{key:"tvaURL",get:function(){if(null!==this.tvaProgramId&&null!==this.frequencyId){var e=this.programStore.getProgram(this.tvaProgramId),t="".concat(this.iptt_url).concat(e.pk,"/targetperiods/?frequency=").concat(this.frequencyId);if(1==this.frequencyId||2==this.frequencyId)return t;if(this.showAll)return"".concat(t,"&start=0&end=").concat(e.periodCount(this.frequencyId)-1);if(this.mostRecent&&this.mostRecentCount){var r=e.currentPeriod(this.frequencyId)-1,n=r-Math.max(this.mostRecentCountAccurate,1)+1,o="".concat(t,"&start=").concat(n,"&end=").concat(r);return e.currentPeriod(this.frequencyId)==e.periodCount(this.frequencyId)&&0==n?"".concat(o,"&mr=1"):o}}return!1}},{key:"timeperiodsURL",get:function(){if(null!==this.timeperiodsProgramId){var e=this.programStore.getProgram(this.timeperiodsProgramId).currentPeriod(7)-1;return"".concat(this.iptt_url).concat(this.timeperiodsProgramId,"/timeperiods/")+"?frequency=7&start=".concat(e-1,"&end=").concat(e)}return!1}}])&&q(t.prototype,r),n&&q(t,n),e}()).prototype,"tvaProgramId",[s.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=T(b.prototype,"timeperiodsProgramId",[s.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=T(b.prototype,"frequencyId",[s.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=T(b.prototype,"showAll",[s.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_=T(b.prototype,"mostRecent",[s.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=T(b.prototype,"mostRecentCount",[s.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),T(b.prototype,"frequencyOptions",[s.f],Object.getOwnPropertyDescriptor(b.prototype,"frequencyOptions"),b.prototype),T(b.prototype,"selectedTVAProgram",[s.f],Object.getOwnPropertyDescriptor(b.prototype,"selectedTVAProgram"),b.prototype),T(b.prototype,"selectedTimeperiodsProgram",[s.f],Object.getOwnPropertyDescriptor(b.prototype,"selectedTimeperiodsProgram"),b.prototype),T(b.prototype,"selectedFrequency",[s.f],Object.getOwnPropertyDescriptor(b.prototype,"selectedFrequency"),b.prototype),T(b.prototype,"periodCountDisabled",[s.f],Object.getOwnPropertyDescriptor(b.prototype,"periodCountDisabled"),b.prototype),T(b.prototype,"mostRecentCountDisplay",[s.f],Object.getOwnPropertyDescriptor(b.prototype,"mostRecentCountDisplay"),b.prototype),T(b.prototype,"mostRecentCountAccurate",[s.f],Object.getOwnPropertyDescriptor(b.prototype,"mostRecentCountAccurate"),b.prototype),T(b.prototype,"setTVAProgram",[s.d],Object.getOwnPropertyDescriptor(b.prototype,"setTVAProgram"),b.prototype),T(b.prototype,"setTimeperiodsProgram",[s.d],Object.getOwnPropertyDescriptor(b.prototype,"setTimeperiodsProgram"),b.prototype),T(b.prototype,"setFrequency",[s.d],Object.getOwnPropertyDescriptor(b.prototype,"setFrequency"),b.prototype),S=T(b.prototype,"setMostRecent",[s.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.showAll=!1,e.mostRecent=!0,e.mostRecentCount=""}}}),k=T(b.prototype,"setMostRecentCount",[s.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.setMostRecent(),e.mostRecentCount=t}}}),j=T(b.prototype,"setShowAll",[s.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.mostRecent=!1,e.showAll=!0,e.mostRecentCount=""}}}),T(b.prototype,"tvaURL",[s.f],Object.getOwnPropertyDescriptor(b.prototype,"tvaURL"),b.prototype),T(b.prototype,"timeperiodsURL",[s.f],Object.getOwnPropertyDescriptor(b.prototype,"timeperiodsURL"),b.prototype),b),M=r("Cs6D");function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $(e,t,r){return t&&V(e.prototype,t),r&&V(e,r),e}function Q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=B(e);if(t){var o=B(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Y(this,r)}}function Y(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var G,H=function(e){return o.a.createElement("div",{className:"form-row mb-3"},o.a.createElement("label",{className:"col-form-label text-uppercase"},e.label),e.children)},K=Object(c.b)("rootStore")(L=Object(c.c)(L=function(e){Q(r,e);var t=J(r);function r(){var e;U(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).selectProgram=function(t){e.props.rootStore.setTVAProgram(t.value)},e}return $(r,[{key:"render",value:function(){return o.a.createElement(H,{label:gettext("Program")},o.a.createElement(M.a,{options:this.props.rootStore.tvaProgramOptions,value:this.props.rootStore.selectedTVAProgram,onChange:this.selectProgram,className:"tola-react-select"}))}}]),r}(o.a.Component))||L)||L,W=Object(c.b)("rootStore")(F=Object(c.c)(F=function(e){Q(r,e);var t=J(r);function r(){var e;U(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).selectProgram=function(t){e.props.rootStore.setTimeperiodsProgram(t.value)},e}return $(r,[{key:"render",value:function(){return o.a.createElement(H,{label:gettext("Program")},o.a.createElement(M.a,{options:this.props.rootStore.timeperiodsProgramOptions,value:this.props.rootStore.selectedTimeperiodsProgram,onChange:this.selectProgram,className:"tola-react-select"}))}}]),r}(o.a.Component))||F)||F,Z=Object(c.b)("rootStore")(N=Object(c.c)(N=function(e){Q(r,e);var t=J(r);function r(){var e;U(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).selectFrequency=function(t){e.props.rootStore.setFrequency(t.value)},e}return $(r,[{key:"render",value:function(){return o.a.createElement(H,{label:gettext("Target periods")},o.a.createElement(M.a,{options:this.props.rootStore.frequencyOptions,value:this.props.rootStore.selectedFrequency,onChange:this.selectFrequency,className:"tola-react-select"}))}}]),r}(o.a.Component))||N)||N,ee=r("TSYQ"),te=r.n(ee);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ce(e);if(t){var o=ce(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ae(this,r)}}function ae(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var se=Object(c.b)("rootStore")(G=Object(c.c)(G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(a,e);var t,r,n,i=ie(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).setMostRecentCount=function(e){var r=e.target.value.replace(/^0+/,"").replace(/[^0-9]*/gi,"");t.props.rootStore.setMostRecentCount(r)},t}return t=a,(r=[{key:"render",value:function(){return o.a.createElement("div",{className:"form-group d-lg-flex pb-4"},o.a.createElement("div",{className:te()("form-check","form-check-inline","pt-1","pr-2",{"form-check-inline--is-disabled":this.props.rootStore.periodCountDisabled})},o.a.createElement("span",{className:"form-check-input"},o.a.createElement("input",{type:"radio",checked:this.props.rootStore.showAll,disabled:this.props.rootStore.periodCountDisabled,onChange:this.props.rootStore.setShowAll,id:"id_targetperiods-timeframe_0"})),o.a.createElement("label",{className:"form-check-label",htmlFor:"id_targetperiods-timeframe_0"},gettext("Show all"))),o.a.createElement("div",{className:te()("form-check","form-check-inline","pt-1",{"form-check-inline--is-disabled":this.props.rootStore.periodCountDisabled})},o.a.createElement("span",{className:"form-check-input"},o.a.createElement("input",{type:"radio",checked:this.props.rootStore.mostRecent,disabled:this.props.rootStore.periodCountDisabled,onChange:this.props.rootStore.setMostRecent,id:"id_targetperiods-timeframe_1"})),o.a.createElement("label",{className:"form-check-label",htmlFor:"id_targetperiods-timeframe_1"},gettext("Most recent"))),o.a.createElement("div",null,o.a.createElement("input",{type:"text",className:"form-control",value:this.props.rootStore.mostRecentCountDisplay,disabled:this.props.rootStore.periodCountDisabled,placeholder:gettext("enter a number"),onChange:this.setMostRecentCount})))}}])&&ne(t.prototype,r),n&&ne(t,n),a}(o.a.Component))||G)||G,ue=Object(c.b)("rootStore")(Object(c.c)((function(e){var t=e.url,r=e.rootStore;return o.a.createElement("div",{className:"d-flex justify-content-center mb-1"},o.a.createElement("button",{className:"btn btn-primary",onClick:function(){return window.location.href=r[t]},disabled:!r[t],style:{width:"100%"}},gettext("View report")))}))),le=function(e){var t=e.children;return o.a.createElement("div",{className:"col-sm-6"},o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-body"},t)))},pe=function(){return o.a.createElement(le,null,o.a.createElement("h5",{className:"card-title"},gettext("Periodic targets vs. actuals")),o.a.createElement("p",{className:"card-subtitle text-muted mb-2"},gettext("View results organized by target period for indicators that share the same target frequency")),o.a.createElement(K,null),o.a.createElement(Z,null),o.a.createElement(se,null),o.a.createElement(ue,{url:"tvaURL"}))},fe=function(){return o.a.createElement(le,null,o.a.createElement("h5",{className:"card-title"},gettext("Recent progress for all indicators")),o.a.createElement("p",{className:"card-subtitle text-muted mb-2"},gettext("View the most recent two months of results. (You can customize your time periods.) This report does not include periodic targets")),o.a.createElement(W,null),o.a.createElement(ue,{url:"timeperiodsURL"}))},de=function(){return o.a.createElement("div",{className:"row"},o.a.createElement(pe,null),o.a.createElement(fe,null))},me=new D(jsContext);a.a.render(o.a.createElement(c.a,{rootStore:me},o.a.createElement(de,null)),document.querySelector("#id_div_top_quickstart_iptt"))},"1d5Q":function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"d",(function(){return l})),r.d(t,"b",(function(){return p})),r.d(t,"c",(function(){return f}));var n=r("2vnA"),o=r("5/4V");function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c="undefined"!=typeof gettext?gettext:function(e){return e},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{pk:parseInt(e.pk),name:e.name,resultsFramework:Boolean(e.results_framework),_resultChainFilterLabel:e.by_result_chain||c("by Outcome chain"),get resultChainFilterLabel(){return this.resultsFramework?this._resultChainFilterLabel:null}}},u=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[s].concat(t).reduce((function(t,r){return Object(n.i)(t,r(e))}),{})}},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{reportingPeriodStart:new Date(e.reporting_period_start_iso),reportingPeriodEnd:new Date(e.reporting_period_end_iso)}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{_indicatorsLevelOrder:Object(n.n)(e.indicator_pks_level_order||[]),_indicatorsChainOrder:Object(n.n)(e.indicator_pks_chain_order||[]),_applyOrderUpdate:function(e){var t=this;Object(n.p)((function(){return t._indicatorsLevelOrder=e.indicator_pks_level_order||[],t._indicatorsChainOrder=e.indicator_pks_chain_order||[],Object.entries(e.indicators||{}).forEach((function(e){var r=i(e,2),n=r[0],o=r[1];!isNaN(parseInt(n))&&t.indicators.has(parseInt(n))&&t.indicators.get(parseInt(n)).updateData(o)})),e}))},updateOrder:function(){return o.a.programLevelOrdering(this.pk).then(this._applyOrderUpdate.bind(this))},get indicatorsInLevelOrder(){var e=this;return this._indicatorsLevelOrder.map((function(t){return e.indicators.get(t)}))},get indicatorsInChainOrder(){var e=this;return this.hasOwnProperty("resultsFramework")&&!1===this.resultsFramework?this.indicatorsInLevelOrder:this._indicatorsChainOrder.map((function(t){return e.indicators.get(t)}))}}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{_levelsLevelOrder:Object(n.n)(e.level_pks_level_order||[]),_levelsChainOrder:Object(n.n)(e.level_pks_chain_order||[]),_unassignedIndicators:Object(n.n)(e.unassigned_indicator_pks||[]),levelIndicators:Object(n.n)(new Map((e.indicator_pks_for_level||[]).map((function(e){return[e.pk,e.indicator_pks]})))),updateOrder:function(){var e=this;return o.a.rfLevelOrdering(this.pk).then((function(t){Object(n.p)((function(){return e._levelsLevelOrder=t.level_pks_level_order||[],e._levelsChainOrder=t.level_pks_chain_order||[],e._unassignedIndicators=t.unassigned_indicator_pks||[],e._updateLevelIndicatorsOrder(t.indicator_pks_for_level),!0}))}))},get levelsInLevelOrder(){var e=this;return this._levelsLevelOrder.map((function(t){return e.levels.get(t)}))||[]},get levelsInChainOrder(){var e=this;return this.hasOwnProperty("resultsFramework")&&!1===this.resultsFramework?this.levelsInLevelOrder:this._levelsChainOrder.map((function(t){return e.levels.get(t)}))||[]},get unassignedIndicators(){var e=this;return this._unassignedIndicators.map((function(t){return e.indicators.get(t)}))||[]},get indicatorsInLevelOrder(){var e=this;return this.resultsFramework?Array.prototype.concat.apply([],this.levelsInLevelOrder.map((function(t){return e.levelIndicators.get(t.pk).filter((function(t){return e.indicators.has(t)})).map((function(t){return e.indicators.get(t)}))}))).concat(this.unassignedIndicators):this.unassignedIndicators},get indicatorsInChainOrder(){var e=this;return this.resultsFramework?Array.prototype.concat.apply([],this.levelsInChainOrder.map((function(t){return e.levelIndicators.get(t.pk).filter((function(t){return e.indicators.has(t)})).map((function(t){return e.indicators.get(t)}))}))).concat(this.unassignedIndicators):this.unassignedIndicators},_updateLevelIndicatorsOrder:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(n.p)((function(){e.levelIndicators.clear(),t.forEach((function(t){var r=t.pk,n=t.indicator_pks;e.levelIndicators.set(r,n)}))}))}}}},"5/4V":function(e,t,r){"use strict";var n=r("vDqi"),o=r.n(n),i=r("Qyje"),a=r.n(i),c={apiInstance:o.a.create({withCredentials:!0,baseURL:"/indicators/api/",responseType:"json",headers:{"X-CSRFToken":document.cookie.replace(/(?:(?:^|.*;\s*)csrftoken\s*\=\s*([^;]*).*$)|^.*$/,"$1")}}),documentInstance:o.a.create({withCredentials:!0,baseURL:"/indicators/api/",responseType:"document",headers:{"X-CSRFToken":document.cookie.replace(/(?:(?:^|.*;\s*)csrftoken\s*\=\s*([^;]*).*$)|^.*$/,"$1")},transformResponse:[function(e){return(new XMLSerializer).serializeToString(e)}]}),formPostInstance:o.a.create({withCredentials:!0,baseURL:"/indicators/api/",responseType:"json",headers:{"X-CSRFToken":document.cookie.replace(/(?:(?:^|.*;\s*)csrftoken\s*\=\s*([^;]*).*$)|^.*$/,"$1"),"content-type":"application/x-www-form-urlencoded"}}),logFailure:function(e){console.log("api call failed:",e)},getProgramPageUrl:function(e){return!isNaN(parseInt(e))&&"/program/".concat(e,"/")},programLevelOrdering:function(e){return this.apiInstance.get("/program/ordering/".concat(e,"/")).then((function(e){return e.data})).catch(this.logFailure)},rfLevelOrdering:function(e){return this.apiInstance.get("/program/level_ordering/".concat(e,"/")).then((function(e){return e.data})).catch(this.logFailure)},indicatorResultsTable:function(e,t){return this.documentInstance.get("/result_table/".concat(e,"/"),{params:{raw:!0,edit:t}}).then((function(e){return e.data})).catch(this.logFailure)},updateProgramPageIndicator:function(e){return this.apiInstance.get("/program_page/indicator/".concat(e,"/")).then((function(e){return e.data})).catch(this.logFailure)},updateAllProgramPageIndicators:function(e){return this.apiInstance.get("/program_page/".concat(e,"/")).then((function(e){return e.data})).catch(this.logFailure)},ipttFilterData:function(e){return this.apiInstance.get("/iptt/".concat(e,"/filter_data/")).then((function(e){return e.data})).catch(this.logFailure)},getIPTTReportData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.programPk,r=e.frequency,n=e.reportType;return this.apiInstance.get("/iptt/".concat(t,"/report_data/"),{params:{frequency:r,report_type:n}}).then((function(e){return e.data})).catch(this.logFailure)},savePinnedReport:function(e){return this.formPostInstance.post("/pinned_report/",a.a.stringify(e)).catch(this.logFailure)},updateIPTTIndicator:function(e){return this.apiInstance.get("/iptt/indicator/".concat(e,"/")).then((function(e){return e.data})).catch(this.logFailure)}};t.a=c},OtFd:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("2vnA"),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{frequency:parseInt(e.frequency),get periodCount(){return this.periods.length},get currentPeriod(){return[1,2,8].includes(this.frequency)?null:this.periods.filter((function(e){return e.past})).length-1},getLabel:function(e){return[3,4,5,6].includes(this.frequency)?"".concat(e.name," (").concat(e.label,")"):7==this.frequency?e.name:void 0},get options(){var e=this;return this.periods.map((function(t,r){return{value:r,label:e.getLabel(t),year:t.year}}))}}},i=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return[o].concat(t).reduce((function(t,r){return Object(n.i)(t,r(e))}),{})}}}},[["+aul",0,1]]]);
//# sourceMappingURL=iptt_quickstart-717477e70b1e990f9428.js.map