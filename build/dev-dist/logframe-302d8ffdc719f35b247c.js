(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"+uhY":function(e,t,r){"use strict";r.r(t);var n,a,l=r("q1tI"),o=r.n(l),i=r("i8i4"),s=r.n(i),u=r("okNM"),c=r("wgi2"),p=r("0pHI"),f=r("2vnA"),m=r("v38i");function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t,r,n,a){var l={};return Object.keys(n).forEach((function(e){l[e]=n[e]})),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),l),a&&void 0!==l.initializer&&(l.value=l.initializer?l.initializer.call(a):void 0,l.initializer=void 0),void 0===l.initializer&&(Object.defineProperty(e,t,l),l=null),l}var v=(a=g((n=function(){function e(){var t,r,n,l,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r="groupBy",l=this,(n=a)&&Object.defineProperty(t,r,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(l):void 0}),this.routes=[{name:"logframe",path:"/:programId<\\d+>/logframe/?groupby",defaultParams:{groupby:1}},{name:"logframe-excel",path:"/:programId<\\d+>/logframe_excel/?groupby"}],this.updateState=function(e){var t=e.route;e.prevRoute;o.groupBy=t.params.groupby},this.router=Object(c.b)(this.routes,{trailingSlashMode:"always"}),this.router.usePlugin(Object(p.a)({useHash:!1,base:"/program"})),this.router.subscribe(this.updateState),this.router.start(),this.headerColumns=[gettext("Result level"),gettext("Indicators"),gettext("Means of verification"),gettext("Assumptions")]}var t,r,n;return t=e,(r=[{key:"setGroupBy",value:function(e){e=parseInt(e);var t=this.router.getState(),r=t.name,n=t.params;[m.d,m.e].includes(e)&&(n.groupby=e),this.router.navigate(r,n,{reload:!0})}},{key:"programId",get:function(){return this.router.getState().params.programId||null}},{key:"excelUrl",get:function(){var e=this.router.getState(),t=(e.name,e.params);return this.router.buildUrl("logframe-excel",t)}}])&&d(t.prototype,r),n&&d(t,n),e}()).prototype,"groupBy",[f.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g(n.prototype,"programId",[f.f],Object.getOwnPropertyDescriptor(n.prototype,"programId"),n.prototype),g(n.prototype,"excelUrl",[f.f],Object.getOwnPropertyDescriptor(n.prototype,"excelUrl"),n.prototype),n);function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h=function e(t){y(this,e),this.pk=t.pk,this.level_order=t.level_order,this.level=t.level||!1,this.name=t.name,this.level_order_display=t.level_order_display,this.means_of_verification=t.means_of_verification,this.manualNumbering=!t.auto_number_indicators,this.number=t.number||!1},_=function e(t){y(this,e),this.pk=t.pk,this.display_name=t.display_name,this.level_depth=t.level_depth,this.ontology=t.ontology,this.display_ontology=t.display_ontology,this.indicators=[],t.indicators&&Array.isArray(t.indicators)&&(this.indicators=t.indicators.map((function(e){return new h(e)}))),this.indicators.sort((function(e,t){return e.level_order<t.level_order?-1:t.level_order<e.level_order?1:0})),this.assumptions=t.assumptions,this.child_levels=t.child_levels||[]},x=function(){function e(t){var r=this;if(y(this,e),this._levelsByPk={},this._levelsByChain=[],this._levelsByTier=[],this._unassignedIndicators=[],this.getChildLevels=function(e){var t=[e];return r._levelsByPk[e].child_levels.forEach((function(e){t=t.concat(r.getChildLevels(e))})),t},this.getLevelsGroupedBy=function(e){return parseInt(e)===m.d?r._levelsByChain.map((function(e){return r._levelsByPk[e]})):parseInt(e)===m.e?r._levelsByTier.map((function(e){return r._levelsByPk[e]})):Object.values(r._levelsByPk)},this.name=t.name,this.results_framework=t.results_framework,this.results_framework_url=!!this.results_framework&&t.results_framework_url,this.program_page_url=t.program_page_url,this.rf_chain_sort_label=!!this.results_framework&&t.rf_chain_sort_label,t.unassigned_indicators&&Array.isArray(t.unassigned_indicators)&&(this._unassignedIndicators=t.unassigned_indicators.map((function(e){return new h(e)}))),t.levels&&Array.isArray(t.levels)){t.levels.forEach((function(e){var t=new _(e);r._levelsByPk[t.pk]=t,r._levelsByChain.push(t.pk),r._levelsByTier.push(t.pk)})),this._levelsByTier.sort((function(e,t){return r._levelsByPk[e].level_depth<r._levelsByPk[t].level_depth?-1:r._levelsByPk[t].level_depth<r._levelsByPk[e].level_depth?1:r._levelsByPk[e].ontology<r._levelsByPk[t].ontology?-1:r._levelsByPk[t].ontology<r._levelsByPk[e].ontology?1:0}));var n=[];this._levelsByChain.filter((function(e){return 1==r._levelsByPk[e].level_depth})).forEach((function(e){n=n.concat(r.getChildLevels(e))})),this._levelsByChain=n}}var t,r,n;return t=e,(r=[{key:"unassignedIndicators",get:function(){return this._unassignedIndicators&&0!=this._unassignedIndicators.length?this._unassignedIndicators:[]}}])&&b(t.prototype,r),n&&b(t,n),e}(),E=Object(u.b)("filterStore")((function(e){var t=e.filterStore,r=t.excelUrl?function(){window.open(t.excelUrl,"_blank")}:function(e){e.preventDefault()};return o.a.createElement("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:r,disabled:!t.excelUrl},o.a.createElement("i",{className:"fas fa-download"})," Excel")})),w=Object(u.b)("dataStore")((function(e){var t=e.dataStore;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"logframe--header"},o.a.createElement("h1",{className:"page-title h2"},o.a.createElement("a",{href:t.program_page_url},t.name,":")," ",o.a.createElement("span",{className:"font-weight-normal text-muted text-nowrap"},gettext("Logframe")," ",o.a.createElement("small",null,o.a.createElement("i",{className:"fas fa-table"}))))),o.a.createElement(E,null))})),O=r("Ez0T"),k=Object(u.b)("dataStore","filterStore")(Object(u.c)((function(e){var t=e.dataStore,r=e.filterStore;return o.a.createElement("div",{className:"logframe__subheader"},t.results_framework&&o.a.createElement("a",{href:t.results_framework_url},o.a.createElement("i",{className:"fas fa-sitemap"})," ",gettext("View results framework")),t.results_framework&&o.a.createElement(O.b,{chainLabel:t.rf_chain_sort_label,value:r.groupBy,update:function(e){r.setGroupBy(e.target.value)},labelClass:"col-form-label text-append-colon",formGroupClass:"form-row inline-select"}))}))),S=function(e){var t=e.label;return o.a.createElement("th",{className:"text-nowrap"},t)},j=function(e){var t=e.headers;return o.a.createElement("thead",null,o.a.createElement("tr",{className:"logframe__table__header"},t.map((function(e,t){return o.a.createElement(S,{label:e,key:t})}))))};var P,B;gettext("Mercy Corps"),gettext("Goal"),gettext("Outcome"),gettext("Output"),gettext("Activity"),gettext("Department for International Development (DFID)"),gettext("Impact"),gettext("Outcome"),gettext("Output"),gettext("Input"),gettext("European Commission (EC)"),gettext("Overall Objective"),gettext("Specific Objective"),gettext("Purpose"),gettext("Result"),gettext("Activity"),gettext("USAID 1"),gettext("Goal"),gettext("Purpose"),gettext("Sub-Purpose"),gettext("Output"),gettext("Input"),gettext("USAID 2"),gettext("Strategic Objective"),gettext("Intermediate Result"),gettext("Sub-Intermediate Result"),gettext("Output"),gettext("Input"),gettext("USAID FFP"),gettext("Goal"),gettext("Purpose"),gettext("Sub-Purpose"),gettext("Intermediate Outcome"),gettext("Output");function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=z(e);if(t){var a=z(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return D(this,r)}}function D(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t,r,n,a){var l={};return Object.keys(n).forEach((function(e){l[e]=n[e]})),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),l),a&&void 0!==l.initializer&&(l.value=l.initializer?l.initializer.call(a):void 0,l.initializer=void 0),void 0===l.initializer&&(Object.defineProperty(e,t,l),l=null),l}var T=function(e){var t=e.name,r=e.rowCount;return o.a.createElement("td",{className:"logframe__cell--level",rowSpan:r<1?1:r},t)},G=function(e){var t,r=e.indicator,n=e.ontology;if(null==r)return o.a.createElement("td",{className:"logframe__cell--indicator"});var a,l=!1;return r.manualNumbering?l=!!r.number&&"".concat(r.number):(n||r.level_order_display)&&(l="".concat((a=n,a.split(".").slice(1).filter((function(e){return e>0})).join("."))).concat(r.level_order_display)),t=l?"".concat(gettext("Indicator")," ").concat(l,": ").concat(r.name):r.name,o.a.createElement("td",{className:"logframe__cell--indicator"},t)},R=function(e){var t=e.indicator;return null==t?o.a.createElement("td",{className:"logframe__cell--means"}):o.a.createElement("td",{className:"logframe__cell--means"},t.means_of_verification)},F=function(e){var t=e.assumptions,r=e.rowCount;return o.a.createElement("td",{className:"logframe__cell--assumptions",rowSpan:r},t)},U=function(e){var t=e.level,r=t.indicators[0]||null,n=t.indicators.slice(1)||null,a=t.indicators.length;return o.a.createElement("tbody",{className:"logframe__level-set"},o.a.createElement("tr",null,o.a.createElement(T,{name:t.display_name,rowCount:a}),o.a.createElement(G,{indicator:r,ontology:t.ontology}),o.a.createElement(R,{indicator:r}),o.a.createElement(F,{assumptions:t.assumptions,rowCount:a})),n.map((function(e,r){return o.a.createElement("tr",{key:r},o.a.createElement(G,{indicator:e,ontology:t.ontology,key:"ind".concat(r)}),o.a.createElement(R,{indicator:e,key:"means".concat(r)}))})))},M=Object(u.b)("dataStore","filterStore")(P=Object(u.c)((A((B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(l,e);var t,r,n,a=L(l);function l(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.call(this,e)}return t=l,(r=[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(j,{headers:this.props.filterStore.headerColumns}),this.levels.map((function(e,t){return o.a.createElement(U,{level:e,key:t})})),this.unassignedLevel&&o.a.createElement(U,{level:this.unassignedLevel}))}},{key:"levels",get:function(){return this.props.dataStore.results_framework?this.props.dataStore.getLevelsGroupedBy(this.props.filterStore.groupBy):[]}},{key:"unassignedLevel",get:function(){return this.props.dataStore.unassignedIndicators.length>0&&{display_name:gettext("Indicators unassigned to  a results framework level"),indicators:this.props.dataStore.unassignedIndicators,ontology:!1,assumptions:null}}}])&&I(t.prototype,r),n&&I(t,n),l}(o.a.Component)).prototype,"levels",[f.f],Object.getOwnPropertyDescriptor(B.prototype,"levels"),B.prototype),A(B.prototype,"unassignedLevel",[f.f],Object.getOwnPropertyDescriptor(B.prototype,"unassignedLevel"),B.prototype),P=B))||P)||P,J=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(k,null),o.a.createElement("table",{className:"logframe__table table table-sm table-bordered bg-white text-small"},o.a.createElement(M,null)))},q=new v,H=new x(jsContext);s.a.render(o.a.createElement(u.a,{filterStore:q,dataStore:H},o.a.createElement(w,null)),document.querySelector(".region-header")),s.a.render(o.a.createElement(u.a,{filterStore:q,dataStore:H},o.a.createElement(J,null)),document.querySelector("#id_div_content"))},Ez0T:function(e,t,r){"use strict";r.d(t,"d",(function(){return v})),r.d(t,"a",(function(){return b})),r.d(t,"c",(function(){return _})),r.d(t,"b",(function(){return x}));var n=r("q1tI"),a=r.n(n),l=r("Cs6D"),o=r("VCnP"),i=r.n(o),s=0;function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";return s++,"".concat(e).concat(s)}var c=r("v38i");function p(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){var t=u("react-select"),r=e.labelClasses||"col-form-label text-uppercase",n=e.formRowClasses||"form-row mb-3",o=e.selectClasses||"tola-react-select";return a.a.createElement("div",{className:n},a.a.createElement("label",{htmlFor:t,className:r},e.label),a.a.createElement(l.a,{onChange:e.update,value:e.value,id:t,className:o,isDisabled:e.disabled,options:e.options}))},b=function(e){var t=u("date-select"),r=e.options&&1==e.options.length&&void 0!==e.options[0].value?a.a.createElement("option",{value:e.options[0].value},e.options[0].label):e.options&&e.options.length>0&&e.options[0].options&&void 0!==e.options[0].options?e.options.map((function(e,t){return a.a.createElement("optgroup",{label:e.label,key:t},e.options.map((function(e){return a.a.createElement("option",{value:e.value,key:e.value},e.label)})))})):e.options.map((function(e,t){return a.a.createElement("option",{value:e.value,key:t},e.label)}));return a.a.createElement("div",{className:"form-row mb-3"},a.a.createElement("label",{htmlFor:t,className:"col-form-label text-uppercase"},e.label),a.a.createElement("select",{className:"form-control",id:t,value:e.value,onChange:e.update,disabled:e.disabled},r))},y=function(e){var t=u("react-select"),r=e.formGroupClass||"form-row mb-3",n=e.labelClass||"col-form-label text-uppercase",l=e.selectClass||"form-control";return a.a.createElement("div",{className:r},a.a.createElement("label",{htmlFor:t,className:n},e.label),a.a.createElement("select",{onChange:e.update,value:e.value,id:t,className:l,disabled:e.disabled},e.options))},h=function(e){return""==e.children?a.a.createElement("div",null):a.a.createElement(a.a.Fragment,null,a.a.createElement("hr",{style:{margin:"3px 0px 0px 0px"}}),a.a.createElement("div",{className:"text-muted",style:{textTransform:"uppercase",paddingLeft:"4px",marginBottom:"2px"}},e.children))},_=function(e){var t=u("multiselect"),r=!e.options||0==e.options.length||1==e.options.length&&null===e.options[0].value,n=r?{getDropdownButtonLabel:function(){return gettext("None available")},isDisabled:!0,menuIsOpen:!1,options:[]}:{isMulti:!0,options:e.options,getDropdownButtonLabel:function(e){if(!e.value)return gettext("None selected");if(Array.isArray(e.value)){var t=e.value.filter((function(e){return!e.noList}));return 0==t.length?gettext("None selected"):1==t.length?t[0].label:"".concat(t.length,"  ").concat(gettext("selected"))}return e.value.label}},l={dropdownButton:function(e){return r?d(d({},e),{},{backgroundColor:"#E5E6E8",background:""}):e},option:function(e,t){return d(d({},e),{},{padding:"1px 12px",display:"inline-block"})},container:function(e,t){return d(d({},e),{},{backgroundColor:"#f5f5f5"})}};return a.a.createElement("div",{className:"form-row mb-2 tola-react-multiselect-row"},a.a.createElement("label",{htmlFor:t,className:"col-form-label text-uppercase"},e.label),a.a.createElement(i.a,f({id:t,styles:l,formatOptionLabel:function(e){return a.a.createElement("div",{style:{display:"inline-block",float:"right",width:"90%"}},e.label)},components:{GroupHeading:h},value:e.value,onChange:e.update},n)))},x=function(e){var t=e.chainLabel,r=p(e,["chainLabel"]),n=[a.a.createElement("option",{value:c.d,key:1},t),a.a.createElement("option",{value:c.e,key:2},gettext("by Level"))];return a.a.createElement(y,f({label:gettext("Group indicators"),options:n},r))}},v38i:function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return l})),r.d(t,"l",(function(){return i})),r.d(t,"i",(function(){return s})),r.d(t,"k",(function(){return u})),r.d(t,"f",(function(){return c})),r.d(t,"m",(function(){return p})),r.d(t,"j",(function(){return f})),r.d(t,"d",(function(){return m})),r.d(t,"e",(function(){return d})),r.d(t,"g",(function(){return v})),r.d(t,"h",(function(){return b}));var a={value:null,label:"---------"},l="—",o=l,i=1,s=2,u=[3,4,5,6,7],c=[1,2],p=Object.freeze({1:gettext("Life of Program (LoP) only"),2:gettext("Midline and endline"),3:gettext("Annual"),4:gettext("Semi-annual"),5:gettext("Tri-annual"),6:gettext("Quarterly"),7:gettext("Monthly")}),f=Object.freeze({3:gettext("Years"),4:gettext("Semi-annual periods"),5:gettext("Tri-annual periods"),6:gettext("Quarters"),7:gettext("Months")}),m=1,d=2;"undefined"!=typeof gettext&&gettext;var g,v=Object.freeze({noFilter:0,missingTarget:1,missingResults:2,missingEvidence:3,aboveTarget:5,belowTarget:6,onTarget:7,nonReporting:8}),b=null!==(g="reason_for_change_options",n="undefined"!=typeof JS_GLOBALS&&JS_GLOBALS.hasOwnProperty(g)?JS_GLOBALS[g]:null)&&void 0!==n?n:[]}},[["+uhY",0,1]]]);
//# sourceMappingURL=logframe-302d8ffdc719f35b247c.js.map