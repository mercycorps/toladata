(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"+uhY":function(e,t,r){"use strict";r.r(t);var n,o,a=r("q1tI"),l=r.n(a),i=r("i8i4"),s=r.n(i),u=r("okNM"),c=r("wgi2"),p=r("0pHI"),f=r("2vnA"),m=r("v38i");function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(r,n,e,t,a){var l={};return Object.keys(t).forEach(function(e){l[e]=t[e]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},l),a&&void 0!==l.initializer&&(l.value=l.initializer?l.initializer.call(a):void 0,l.initializer=void 0),void 0===l.initializer&&(Object.defineProperty(r,n,l),l=null),l}var v=(o=g((n=function(){function l(){var e,t,r,n,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t="groupBy",n=e=this,(r=o)&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0}),this.routes=[{name:"logframe",path:"/:programId<\\d+>/logframe/?groupby",defaultParams:{groupby:1}},{name:"logframe-excel",path:"/:programId<\\d+>/logframe_excel/?groupby"}],this.updateState=function(e){var t=e.route;e.prevRoute;a.groupBy=t.params.groupby},this.router=Object(c.b)(this.routes,{trailingSlashMode:"always"}),this.router.usePlugin(Object(p.a)({useHash:!1,base:"/program"})),this.router.subscribe(this.updateState),this.router.start(),this.headerColumns=[gettext("Result level"),gettext("Indicators"),gettext("Means of verification"),gettext("Assumptions")]}var e,t,r;return e=l,(t=[{key:"setGroupBy",value:function(e){e=parseInt(e);var t=this.router.getState(),r=t.name,n=t.params;[m.d,m.e].includes(e)&&(n.groupby=e),this.router.navigate(r,n,{reload:!0})}},{key:"programId",get:function(){return this.router.getState().params.programId||null}},{key:"excelUrl",get:function(){var e=this.router.getState(),t=(e.name,e.params);return this.router.buildUrl("logframe-excel",t)}}])&&d(e.prototype,t),r&&d(e,r),l}()).prototype,"groupBy",[f.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g(n.prototype,"programId",[f.f],Object.getOwnPropertyDescriptor(n.prototype,"programId"),n.prototype),g(n.prototype,"excelUrl",[f.f],Object.getOwnPropertyDescriptor(n.prototype,"excelUrl"),n.prototype),n);function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e){var t=e.label;return l.a.createElement("th",{className:"text-nowrap"},t)}function _(e){var t=e.headers;return l.a.createElement("thead",null,l.a.createElement("tr",{className:"logframe__table__header"},t.map(function(e,t){return l.a.createElement(h,{label:e,key:t})})))}var x=function e(t){y(this,e),this.pk=t.pk,this.level_order=t.level_order,this.level=t.level||!1,this.name=t.name,this.level_order_display=t.level_order_display,this.means_of_verification=t.means_of_verification,this.manualNumbering=!t.auto_number_indicators,this.number=t.number||!1},E=function e(t){y(this,e),this.pk=t.pk,this.display_name=t.display_name,this.level_depth=t.level_depth,this.ontology=t.ontology,this.display_ontology=t.display_ontology,this.indicators=[],t.indicators&&Array.isArray(t.indicators)&&(this.indicators=t.indicators.map(function(e){return new x(e)})),this.indicators.sort(function(e,t){return e.level_order<t.level_order?-1:t.level_order<e.level_order?1:0}),this.assumptions=t.assumptions,this.child_levels=t.child_levels||[]},w=function(){function n(e){var t,r=this;y(this,n),this._levelsByPk={},this._levelsByChain=[],this._levelsByTier=[],this._unassignedIndicators=[],this.getChildLevels=function(e){var t=[e];return r._levelsByPk[e].child_levels.forEach(function(e){t=t.concat(r.getChildLevels(e))}),t},this.getLevelsGroupedBy=function(e){return parseInt(e)===m.d?r._levelsByChain.map(function(e){return r._levelsByPk[e]}):parseInt(e)===m.e?r._levelsByTier.map(function(e){return r._levelsByPk[e]}):Object.values(r._levelsByPk)},this.name=e.name,this.results_framework=e.results_framework,this.results_framework_url=!!this.results_framework&&e.results_framework_url,this.program_page_url=e.program_page_url,this.rf_chain_sort_label=!!this.results_framework&&e.rf_chain_sort_label,e.unassigned_indicators&&Array.isArray(e.unassigned_indicators)&&(this._unassignedIndicators=e.unassigned_indicators.map(function(e){return new x(e)})),e.levels&&Array.isArray(e.levels)&&(e.levels.forEach(function(e){var t=new E(e);r._levelsByPk[t.pk]=t,r._levelsByChain.push(t.pk),r._levelsByTier.push(t.pk)}),this._levelsByTier.sort(function(e,t){return r._levelsByPk[e].level_depth<r._levelsByPk[t].level_depth?-1:r._levelsByPk[t].level_depth<r._levelsByPk[e].level_depth?1:r._levelsByPk[e].ontology<r._levelsByPk[t].ontology?-1:r._levelsByPk[t].ontology<r._levelsByPk[e].ontology?1:0}),t=[],this._levelsByChain.filter(function(e){return 1==r._levelsByPk[e].level_depth}).forEach(function(e){t=t.concat(r.getChildLevels(e))}),this._levelsByChain=t)}var e,t,r;return e=n,(t=[{key:"unassignedIndicators",get:function(){return this._unassignedIndicators&&0!=this._unassignedIndicators.length?this._unassignedIndicators:[]}}])&&b(e.prototype,t),r&&b(e,r),n}(),O=Object(u.b)("filterStore")(function(e){var t=e.filterStore,r=t.excelUrl?function(){window.open(t.excelUrl,"_blank")}:function(e){e.preventDefault()};return l.a.createElement("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:r,disabled:!t.excelUrl},l.a.createElement("i",{className:"fas fa-download"})," Excel")}),k=Object(u.b)("dataStore")(function(e){var t=e.dataStore;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"logframe--header"},l.a.createElement("h1",{className:"page-title h2"},l.a.createElement("a",{href:t.program_page_url},t.name,":")," ",l.a.createElement("span",{className:"font-weight-normal text-muted text-nowrap"},gettext("Logframe")," ",l.a.createElement("small",null,l.a.createElement("i",{className:"fas fa-table"}))))),l.a.createElement(O,null))}),S=r("Ez0T"),j=Object(u.b)("dataStore","filterStore")(Object(u.c)(function(e){var t=e.dataStore,r=e.filterStore;return l.a.createElement("div",{className:"logframe__subheader"},t.results_framework&&l.a.createElement("a",{href:t.results_framework_url},l.a.createElement("i",{className:"fas fa-sitemap"})," ",gettext("View results framework")),t.results_framework&&l.a.createElement(S.b,{chainLabel:t.rf_chain_sort_label,value:r.groupBy,update:function(e){r.setGroupBy(e.target.value)},labelClass:"col-form-label text-append-colon",formGroupClass:"form-row inline-select"}))}));var P,B;gettext("Mercy Corps"),gettext("Goal"),gettext("Outcome"),gettext("Output"),gettext("Activity"),gettext("Department for International Development (DFID)"),gettext("Impact"),gettext("Outcome"),gettext("Output"),gettext("Input"),gettext("European Commission (EC)"),gettext("Overall Objective"),gettext("Specific Objective"),gettext("Purpose"),gettext("Result"),gettext("Activity"),gettext("USAID 1"),gettext("Goal"),gettext("Purpose"),gettext("Sub-Purpose"),gettext("Output"),gettext("Input"),gettext("USAID 2"),gettext("Strategic Objective"),gettext("Intermediate Result"),gettext("Sub-Intermediate Result"),gettext("Output"),gettext("Input"),gettext("USAID FFP"),gettext("Goal"),gettext("Purpose"),gettext("Sub-Purpose"),gettext("Intermediate Outcome"),gettext("Output");function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(l){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=D(l);return t=o?(e=D(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==C(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(r,n,e,t,a){var l={};return Object.keys(t).forEach(function(e){l[e]=t[e]}),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},l),a&&void 0!==l.initializer&&(l.value=l.initializer?l.initializer.call(a):void 0,l.initializer=void 0),void 0===l.initializer&&(Object.defineProperty(r,n,l),l=null),l}function A(e){var t=e.name,r=e.rowCount;return l.a.createElement("td",{className:"logframe__cell--level",rowSpan:r<1?1:r},t)}function T(e){var t,r=e.indicator,n=e.ontology;if(null==r)return l.a.createElement("td",{className:"logframe__cell--indicator"});var a=!1;return r.manualNumbering?a=!!r.number&&"".concat(r.number):(n||r.level_order_display)&&(a="".concat(n.split(".").slice(1).filter(function(e){return 0<e}).join(".")).concat(r.level_order_display)),t=a?"".concat(gettext("Indicator")," ").concat(a,": ").concat(r.name):r.name,l.a.createElement("td",{className:"logframe__cell--indicator"},t)}function G(e){var t=e.indicator;return null==t?l.a.createElement("td",{className:"logframe__cell--means"}):l.a.createElement("td",{className:"logframe__cell--means"},t.means_of_verification)}function R(e){var t=e.assumptions,r=e.rowCount;return l.a.createElement("td",{className:"logframe__cell--assumptions",rowSpan:r},t)}function F(e){var r=e.level,t=r.indicators[0]||null,n=r.indicators.slice(1)||null,a=r.indicators.length;return l.a.createElement("tbody",{className:"logframe__level-set"},l.a.createElement("tr",null,l.a.createElement(A,{name:r.display_name,rowCount:a}),l.a.createElement(T,{indicator:t,ontology:r.ontology}),l.a.createElement(G,{indicator:t}),l.a.createElement(R,{assumptions:r.assumptions,rowCount:a})),n.map(function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement(T,{indicator:e,ontology:r.ontology,key:"ind".concat(t)}),l.a.createElement(G,{indicator:e,key:"means".concat(t)}))}))}function U(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(j,null),l.a.createElement("table",{className:"logframe__table table table-sm table-bordered bg-white text-small"},l.a.createElement(M,null)))}var M=Object(u.b)("dataStore","filterStore")(P=Object(u.c)((z((B=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(a,l.a.Component);var e,t,r,n=L(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.call(this,e)}return e=a,(t=[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(_,{headers:this.props.filterStore.headerColumns}),this.levels.map(function(e,t){return l.a.createElement(F,{level:e,key:t})}),this.unassignedLevel&&l.a.createElement(F,{level:this.unassignedLevel}))}},{key:"levels",get:function(){return this.props.dataStore.results_framework?this.props.dataStore.getLevelsGroupedBy(this.props.filterStore.groupBy):[]}},{key:"unassignedLevel",get:function(){return 0<this.props.dataStore.unassignedIndicators.length&&{display_name:gettext("Indicators unassigned to  a results framework level"),indicators:this.props.dataStore.unassignedIndicators,ontology:!1,assumptions:null}}}])&&I(e.prototype,t),r&&I(e,r),a}()).prototype,"levels",[f.f],Object.getOwnPropertyDescriptor(B.prototype,"levels"),B.prototype),z(B.prototype,"unassignedLevel",[f.f],Object.getOwnPropertyDescriptor(B.prototype,"unassignedLevel"),B.prototype),P=B))||P)||P,J=new v,q=new w(jsContext);s.a.render(l.a.createElement(u.a,{filterStore:J,dataStore:q},l.a.createElement(k,null)),document.querySelector(".region-header")),s.a.render(l.a.createElement(u.a,{filterStore:J,dataStore:q},l.a.createElement(U,null)),document.querySelector("#id_div_content"))},Ez0T:function(e,t,r){"use strict";r.d(t,"d",function(){return b}),r.d(t,"a",function(){return y}),r.d(t,"c",function(){return h}),r.d(t,"b",function(){return _});var n=r("q1tI"),l=r.n(n),o=r("Cs6D"),a=r("VCnP"),i=r.n(a),s=0;function u(e){return s++,"".concat(0<arguments.length&&void 0!==e?e:"id").concat(s)}var c=r("v38i");function p(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),l=0;l<a.length;l++)r=a[l],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function m(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function d(a){for(var e=1;e<arguments.length;e++){var l=null!=arguments[e]?arguments[e]:{};e%2?m(Object(l),!0).forEach(function(e){var t,r,n;t=a,n=l[r=e],r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):m(Object(l)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(l,e))})}return a}function g(e){var t=u("react-select"),r=e.formGroupClass||"form-row mb-3",n=e.labelClass||"col-form-label text-uppercase",a=e.selectClass||"form-control";return l.a.createElement("div",{className:r},l.a.createElement("label",{htmlFor:t,className:n},e.label),l.a.createElement("select",{onChange:e.update,value:e.value,id:t,className:a,disabled:e.disabled},e.options))}function v(e){return""==e.children?l.a.createElement("div",null):l.a.createElement(l.a.Fragment,null,l.a.createElement("hr",{style:{margin:"3px 0px 0px 0px"}}),l.a.createElement("div",{className:"text-muted",style:{textTransform:"uppercase",paddingLeft:"4px",marginBottom:"2px"}},e.children))}var b=function(e){var t=u("react-select"),r=e.labelClasses||"col-form-label text-uppercase",n=e.formRowClasses||"form-row mb-3",a=e.selectClasses||"tola-react-select";return l.a.createElement("div",{className:n},l.a.createElement("label",{htmlFor:t,className:r},e.label),l.a.createElement(o.a,{onChange:e.update,value:e.value,id:t,className:a,isDisabled:e.disabled,options:e.options}))},y=function(e){var t=u("date-select"),r=e.options&&1==e.options.length&&void 0!==e.options[0].value?l.a.createElement("option",{value:e.options[0].value},e.options[0].label):e.options&&0<e.options.length&&e.options[0].options&&void 0!==e.options[0].options?e.options.map(function(e,t){return l.a.createElement("optgroup",{label:e.label,key:t},e.options.map(function(e){return l.a.createElement("option",{value:e.value,key:e.value},e.label)}))}):e.options.map(function(e,t){return l.a.createElement("option",{value:e.value,key:t},e.label)});return l.a.createElement("div",{className:"form-row mb-3"},l.a.createElement("label",{htmlFor:t,className:"col-form-label text-uppercase"},e.label),l.a.createElement("select",{className:"form-control",id:t,value:e.value,onChange:e.update,disabled:e.disabled},r))},h=function(e){var t=u("multiselect"),r=!e.options||0==e.options.length||1==e.options.length&&null===e.options[0].value,n=r?{getDropdownButtonLabel:function(){return gettext("None available")},isDisabled:!0,menuIsOpen:!1,options:[]}:{isMulti:!0,options:e.options,getDropdownButtonLabel:function(e){if(!e.value)return gettext("None selected");if(Array.isArray(e.value)){var t=e.value.filter(function(e){return!e.noList});return 0==t.length?gettext("None selected"):1==t.length?t[0].label:"".concat(t.length,"  ").concat(gettext("selected"))}return e.value.label}},a={dropdownButton:function(e){return r?d(d({},e),{},{backgroundColor:"#E5E6E8",background:""}):e},option:function(e){return d(d({},e),{},{padding:"1px 12px",display:"inline-block"})},container:function(e){return d(d({},e),{},{backgroundColor:"#f5f5f5"})}};return l.a.createElement("div",{className:"form-row mb-2 tola-react-multiselect-row"},l.a.createElement("label",{htmlFor:t,className:"col-form-label text-uppercase"},e.label),l.a.createElement(i.a,f({id:t,styles:a,formatOptionLabel:function(e){return l.a.createElement("div",{style:{display:"inline-block",float:"right",width:"90%"}},e.label)},components:{GroupHeading:v},value:e.value,onChange:e.update},n)))},_=function(e){var t=e.chainLabel,r=p(e,["chainLabel"]),n=[l.a.createElement("option",{value:c.d,key:1},t),l.a.createElement("option",{value:c.e,key:2},gettext("by Level"))];return l.a.createElement(g,f({label:gettext("Group indicators"),options:n},r))}},v38i:function(e,t,r){"use strict";var n;r.d(t,"a",function(){return a}),r.d(t,"b",function(){return o}),r.d(t,"c",function(){return l}),r.d(t,"l",function(){return i}),r.d(t,"i",function(){return s}),r.d(t,"k",function(){return u}),r.d(t,"f",function(){return c}),r.d(t,"m",function(){return p}),r.d(t,"j",function(){return f}),r.d(t,"d",function(){return m}),r.d(t,"e",function(){return d}),r.d(t,"g",function(){return v}),r.d(t,"h",function(){return b});var a={value:null,label:"---------"},l="—",o=l,i=1,s=2,u=[3,4,5,6,7],c=[1,2],p=Object.freeze({1:gettext("Life of Program (LoP) only"),2:gettext("Midline and endline"),3:gettext("Annual"),4:gettext("Semi-annual"),5:gettext("Tri-annual"),6:gettext("Quarterly"),7:gettext("Monthly")}),f=Object.freeze({3:gettext("Years"),4:gettext("Semi-annual periods"),5:gettext("Tri-annual periods"),6:gettext("Quarters"),7:gettext("Months")}),m=1,d=2;var g,v=Object.freeze({noFilter:0,missingTarget:1,missingResults:2,missingEvidence:3,aboveTarget:5,belowTarget:6,onTarget:7,nonReporting:8}),b=null!==(g="reason_for_change_options",n="undefined"!=typeof JS_GLOBALS&&JS_GLOBALS.hasOwnProperty(g)?JS_GLOBALS[g]:null)&&void 0!==n?n:[]}},[["+uhY",0,1]]]);