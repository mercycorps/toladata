(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"1d5Q":function(e,t,r){"use strict";r.d(t,"a",function(){return s}),r.d(t,"d",function(){return c}),r.d(t,"b",function(){return u}),r.d(t,"c",function(){return p});var i=r("2vnA"),n=r("5/4V");function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l="undefined"!=typeof gettext?gettext:function(e){return e},s=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return[function(e){var t=0<arguments.length&&void 0!==e?e:{};return{pk:parseInt(t.pk),name:t.name,resultsFramework:Boolean(t.results_framework),_resultChainFilterLabel:t.by_result_chain||l("by Outcome chain"),get resultChainFilterLabel(){return this.resultsFramework?this._resultChainFilterLabel:null}}}].concat(t).reduce(function(e,t){return Object(i.i)(e,t(r))},{})}},c=function(e){var t=0<arguments.length&&void 0!==e?e:{};return{reportingPeriodStart:new Date(t.reporting_period_start_iso),reportingPeriodEnd:new Date(t.reporting_period_end_iso)}},u=function(e){var t=0<arguments.length&&void 0!==e?e:{};return{_indicatorsLevelOrder:Object(i.n)(t.indicator_pks_level_order||[]),_indicatorsChainOrder:Object(i.n)(t.indicator_pks_chain_order||[]),_applyOrderUpdate:function(e){var a=this;Object(i.p)(function(){return a._indicatorsLevelOrder=e.indicator_pks_level_order||[],a._indicatorsChainOrder=e.indicator_pks_chain_order||[],Object.entries(e.indicators||{}).forEach(function(e){var t=o(e,2),r=t[0],n=t[1];!isNaN(parseInt(r))&&a.indicators.has(parseInt(r))&&a.indicators.get(parseInt(r)).updateData(n)}),e})},updateOrder:function(){return n.a.programLevelOrdering(this.pk).then(this._applyOrderUpdate.bind(this))},get indicatorsInLevelOrder(){var t=this;return this._indicatorsLevelOrder.map(function(e){return t.indicators.get(e)})},get indicatorsInChainOrder(){var t=this;return this.hasOwnProperty("resultsFramework")&&!1===this.resultsFramework?this.indicatorsInLevelOrder:this._indicatorsChainOrder.map(function(e){return t.indicators.get(e)})}}},p=function(e){var t=0<arguments.length&&void 0!==e?e:{};return{_levelsLevelOrder:Object(i.n)(t.level_pks_level_order||[]),_levelsChainOrder:Object(i.n)(t.level_pks_chain_order||[]),_unassignedIndicators:Object(i.n)(t.unassigned_indicator_pks||[]),levelIndicators:Object(i.n)(new Map((t.indicator_pks_for_level||[]).map(function(e){return[e.pk,e.indicator_pks]}))),updateOrder:function(){var t=this;return n.a.rfLevelOrdering(this.pk).then(function(e){Object(i.p)(function(){return t._levelsLevelOrder=e.level_pks_level_order||[],t._levelsChainOrder=e.level_pks_chain_order||[],t._unassignedIndicators=e.unassigned_indicator_pks||[],t._updateLevelIndicatorsOrder(e.indicator_pks_for_level),!0})})},get levelsInLevelOrder(){var t=this;return this._levelsLevelOrder.map(function(e){return t.levels.get(e)})||[]},get levelsInChainOrder(){var t=this;return this.hasOwnProperty("resultsFramework")&&!1===this.resultsFramework?this.levelsInLevelOrder:this._levelsChainOrder.map(function(e){return t.levels.get(e)})||[]},get unassignedIndicators(){var t=this;return this._unassignedIndicators.map(function(e){return t.indicators.get(e)})||[]},get indicatorsInLevelOrder(){var t=this;return this.resultsFramework?Array.prototype.concat.apply([],this.levelsInLevelOrder.map(function(e){return t.levelIndicators.get(e.pk).filter(function(e){return t.indicators.has(e)}).map(function(e){return t.indicators.get(e)})})).concat(this.unassignedIndicators):this.unassignedIndicators},get indicatorsInChainOrder(){var t=this;return this.resultsFramework?Array.prototype.concat.apply([],this.levelsInChainOrder.map(function(e){return t.levelIndicators.get(e.pk).filter(function(e){return t.indicators.has(e)}).map(function(e){return t.indicators.get(e)})})).concat(this.unassignedIndicators):this.unassignedIndicators},_updateLevelIndicatorsOrder:function(e){var n=this,t=0<arguments.length&&void 0!==e?e:[];Object(i.p)(function(){n.levelIndicators.clear(),t.forEach(function(e){var t=e.pk,r=e.indicator_pks;n.levelIndicators.set(t,r)})})}}}},"4L+s":function(e,t,r){"use strict";r.d(t,"b",function(){return m}),r.d(t,"a",function(){return g});var n=r("q1tI"),o=r.n(n),a=r("i8i4"),l=r.n(a);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(i){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=f(i);return t=o?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==s(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(){u(a,o.a.Component);var e,t,r,n=d(a);function a(e){var t;return c(this,a),(t=n.call(this,e)).placement=e.placement||null,t.popoverRef=e.innerRef||o.a.createRef(),t.iconClass=e.iconClass||"far fa-question-circle",t.iconStyle=e.iconStyle||{},t.linkStyle={},e.linkHeight&&(t.linkStyle.height=e.linkHeight),t}return e=a,(t=[{key:"render",value:function(){return o.a.createElement("a",{tabIndex:"0",style:this.linkStyle,"data-toggle":"popover","data-trigger":"focus","data-html":"true","data-placement":this.placement,"data-content":this.props.content,className:this.props.className,ref:this.popoverRef},o.a.createElement("i",{"aria-label":this.props.ariaText,style:this.iconStyle,className:this.iconClass}))}}])&&i(e.prototype,t),r&&i(e,r),a}(),g=function(){u(i,o.a.Component);var a=d(i);function i(){var t;c(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=a.call.apply(a,[this].concat(r))).popoverName="base",t.componentDidMount=function(){t.bodyClickHandler=function(e){0==$("#".concat(t.popoverName,"_popover_content")).parent().find($(e.target)).length&&$(t.refs.target).popover("hide")};function e(){$("body").on("click",t.bodyClickHandler),$(t.refs.target).popover("update").on("hide.bs.popover",function(){$("body").off("click",t.bodyClickHandler)})}$(t.refs.target).popover({content:'<div id="'.concat(t.popoverName,'_popover_content"></div>'),html:!0,placement:"bottom"}).on("shown.bs.popover",function(){l.a.render(t.getPopoverContent(),document.querySelector("#".concat(t.popoverName,"_popover_content")),e)})},t.getPopoverContent=function(){throw new Error("not implemented")},t}return i}()},"5/4V":function(e,t,r){"use strict";var n=r("vDqi"),a=r.n(n),i=r("Qyje"),o=r.n(i),l={apiInstance:a.a.create({withCredentials:!0,baseURL:"/indicators/api/",responseType:"json",headers:{"X-CSRFToken":document.cookie.replace(/(?:(?:^|.*;\s*)csrftoken\s*\=\s*([^;]*).*$)|^.*$/,"$1")}}),documentInstance:a.a.create({withCredentials:!0,baseURL:"/indicators/api/",responseType:"document",headers:{"X-CSRFToken":document.cookie.replace(/(?:(?:^|.*;\s*)csrftoken\s*\=\s*([^;]*).*$)|^.*$/,"$1")},transformResponse:[function(e){return(new XMLSerializer).serializeToString(e)}]}),formPostInstance:a.a.create({withCredentials:!0,baseURL:"/indicators/api/",responseType:"json",headers:{"X-CSRFToken":document.cookie.replace(/(?:(?:^|.*;\s*)csrftoken\s*\=\s*([^;]*).*$)|^.*$/,"$1"),"content-type":"application/x-www-form-urlencoded"}}),logFailure:function(){},getProgramPageUrl:function(e){return!isNaN(parseInt(e))&&"/program/".concat(e,"/")},programLevelOrdering:function(e){return this.apiInstance.get("/program/ordering/".concat(e,"/")).then(function(e){return e.data}).catch(this.logFailure)},rfLevelOrdering:function(e){return this.apiInstance.get("/program/level_ordering/".concat(e,"/")).then(function(e){return e.data}).catch(this.logFailure)},indicatorResultsTable:function(e,t){return this.documentInstance.get("/result_table/".concat(e,"/"),{params:{raw:!0,edit:t}}).then(function(e){return e.data}).catch(this.logFailure)},updateProgramPageIndicator:function(e){return this.apiInstance.get("/program_page/indicator/".concat(e,"/")).then(function(e){return e.data}).catch(this.logFailure)},updateAllProgramPageIndicators:function(e){return this.apiInstance.get("/program_page/".concat(e,"/")).then(function(e){return e.data}).catch(this.logFailure)},ipttFilterData:function(e){return this.apiInstance.get("/iptt/".concat(e,"/filter_data/")).then(function(e){return e.data}).catch(this.logFailure)},getIPTTReportData:function(e){var t=0<arguments.length&&void 0!==e?e:{},r=t.programPk,n=t.frequency,a=t.reportType;return this.apiInstance.get("/iptt/".concat(r,"/report_data/"),{params:{frequency:n,report_type:a}}).then(function(e){return e.data}).catch(this.logFailure)},savePinnedReport:function(e){return this.formPostInstance.post("/pinned_report/",o.a.stringify(e)).catch(this.logFailure)},updateIPTTIndicator:function(e){return this.apiInstance.get("/iptt/indicator/".concat(e,"/")).then(function(e){return e.data}).catch(this.logFailure)}};t.a=l},Ez0T:function(e,t,r){"use strict";r.d(t,"d",function(){return v}),r.d(t,"a",function(){return b}),r.d(t,"c",function(){return y}),r.d(t,"b",function(){return _});var n=r("q1tI"),i=r.n(n),o=r("Cs6D"),a=r("VCnP"),l=r.n(a),s=0;function c(e){return s++,"".concat(0<arguments.length&&void 0!==e?e:"id").concat(s)}var u=r("v38i");function p(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),i=0;i<a.length;i++)r=a[i],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function m(a){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?f(Object(i),!0).forEach(function(e){var t,r,n;t=a,n=i[r=e],r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(i,e))})}return a}function g(e){var t=c("react-select"),r=e.formGroupClass||"form-row mb-3",n=e.labelClass||"col-form-label text-uppercase",a=e.selectClass||"form-control";return i.a.createElement("div",{className:r},i.a.createElement("label",{htmlFor:t,className:n},e.label),i.a.createElement("select",{onChange:e.update,value:e.value,id:t,className:a,disabled:e.disabled},e.options))}function h(e){return""==e.children?i.a.createElement("div",null):i.a.createElement(i.a.Fragment,null,i.a.createElement("hr",{style:{margin:"3px 0px 0px 0px"}}),i.a.createElement("div",{className:"text-muted",style:{textTransform:"uppercase",paddingLeft:"4px",marginBottom:"2px"}},e.children))}var v=function(e){var t=c("react-select"),r=e.labelClasses||"col-form-label text-uppercase",n=e.formRowClasses||"form-row mb-3",a=e.selectClasses||"tola-react-select";return i.a.createElement("div",{className:n},i.a.createElement("label",{htmlFor:t,className:r},e.label),i.a.createElement(o.a,{onChange:e.update,value:e.value,id:t,className:a,isDisabled:e.disabled,options:e.options}))},b=function(e){var t=c("date-select"),r=e.options&&1==e.options.length&&void 0!==e.options[0].value?i.a.createElement("option",{value:e.options[0].value},e.options[0].label):e.options&&0<e.options.length&&e.options[0].options&&void 0!==e.options[0].options?e.options.map(function(e,t){return i.a.createElement("optgroup",{label:e.label,key:t},e.options.map(function(e){return i.a.createElement("option",{value:e.value,key:e.value},e.label)}))}):e.options.map(function(e,t){return i.a.createElement("option",{value:e.value,key:t},e.label)});return i.a.createElement("div",{className:"form-row mb-3"},i.a.createElement("label",{htmlFor:t,className:"col-form-label text-uppercase"},e.label),i.a.createElement("select",{className:"form-control",id:t,value:e.value,onChange:e.update,disabled:e.disabled},r))},y=function(e){var t=c("multiselect"),r=!e.options||0==e.options.length||1==e.options.length&&null===e.options[0].value,n=r?{getDropdownButtonLabel:function(){return gettext("None available")},isDisabled:!0,menuIsOpen:!1,options:[]}:{isMulti:!0,options:e.options,getDropdownButtonLabel:function(e){if(!e.value)return gettext("None selected");if(Array.isArray(e.value)){var t=e.value.filter(function(e){return!e.noList});return 0==t.length?gettext("None selected"):1==t.length?t[0].label:"".concat(t.length,"  ").concat(gettext("selected"))}return e.value.label}},a={dropdownButton:function(e){return r?m(m({},e),{},{backgroundColor:"#E5E6E8",background:""}):e},option:function(e){return m(m({},e),{},{padding:"1px 12px",display:"inline-block"})},container:function(e){return m(m({},e),{},{backgroundColor:"#f5f5f5"})}};return i.a.createElement("div",{className:"form-row mb-2 tola-react-multiselect-row"},i.a.createElement("label",{htmlFor:t,className:"col-form-label text-uppercase"},e.label),i.a.createElement(l.a,d({id:t,styles:a,formatOptionLabel:function(e){return i.a.createElement("div",{style:{display:"inline-block",float:"right",width:"90%"}},e.label)},components:{GroupHeading:h},value:e.value,onChange:e.update},n)))},_=function(e){var t=e.chainLabel,r=p(e,["chainLabel"]),n=[i.a.createElement("option",{value:u.d,key:1},t),i.a.createElement("option",{value:u.e,key:2},gettext("by Level"))];return i.a.createElement(g,d({label:gettext("Group indicators"),options:n},r))}},"My+N":function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"b",function(){return l});var n=r("2vnA"),a=r("NHe6"),i=r("v38i"),o=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(r){return[function(e){var t=0<arguments.length&&void 0!==e?e:{};return{pk:parseInt(t.pk),name:t.name,levelPk:!isNaN(parseInt(t.level_pk))&&parseInt(t.level_pk),oldLevelDisplay:t.old_level_name||!1,meansOfVerification:t.means_of_verification||!1}}].concat(t).reduce(function(e,t){return Object(n.i)(e,t(r))},{})}},l=function(e){var t=0<arguments.length&&void 0!==e?e:{};return{_formatDecimal:a.a,frequency:parseInt(t.target_frequency),get timeAware(){return i.k.includes(this.frequency)},unitOfMeasure:t.unit_of_measure||!1,isPercent:Boolean(t.is_percent),isCumulative:Boolean(t.is_cumulative),directionOfChange:t.direction_of_change||!1,baseline:t.baseline||null,_lopTarget:t.lop_target||null,_lopActual:t.lop_actual||null,_lopMet:t.lop_met||null,_lopTargetProgress:t.lop_target_progress||null,_lopActualProgress:t.lop_actual_progress||null,_lopMetProgress:t.lop_met_progress||null,get lopTarget(){return this._formatDecimal(this._lopTarget)},get lopActual(){return this._formatDecimal(this._lopActual)},get lopMet(){return this._formatDecimal(this._lopMet)},get lopTargetProgress(){return this._formatDecimal(this._lopTargetProgress)},get lopActualProgress(){return this._formatDecimal(this._lopActualProgress)},get lopMetProgress(){return this._formatDecimal(this._lopMetProgress)}}}},NHe6:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function(e){return!isNaN(parseFloat(e))&&(e=parseFloat(e),Number.isInteger(e)?parseInt(e):e)}},OtFd:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("2vnA"),a=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(r){return[function(e){return{frequency:parseInt((0<arguments.length&&void 0!==e?e:{}).frequency),get periodCount(){return this.periods.length},get currentPeriod(){return[1,2,8].includes(this.frequency)?null:this.periods.filter(function(e){return e.past}).length-1},getLabel:function(e){return[3,4,5,6].includes(this.frequency)?"".concat(e.name," (").concat(e.label,")"):7==this.frequency?e.name:void 0},get options(){var r=this;return this.periods.map(function(e,t){return{value:t,label:r.getLabel(e),year:e.year}})}}}].concat(t).reduce(function(e,t){return Object(n.i)(e,t(r))},{})}}},mYfJ:function(e,t,r){"use strict";r.r(t);var n,a=r("q1tI"),c=r.n(a),i=r("i8i4"),o=r.n(i),l=r("okNM"),s=r("Ez0T");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(i){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=m(i);return t=o?(e=m(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){return c.a.createElement("button",{type:"reset",className:"btn btn-block btn-reset"+(e.isDisabled?" disabled":""),onClick:e.action},e.label)}function h(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(j,null),c.a.createElement(N,null),c.a.createElement(C,null),c.a.createElement(A,null),c.a.createElement(D,null),c.a.createElement(R,null))}function v(){return c.a.createElement("div",{className:"sidebar_wrapper"},c.a.createElement("div",{className:"collapse width show",id:"sidebar"},c.a.createElement(L,null)),c.a.createElement("div",{className:"sidebar-toggle"},c.a.createElement("a",{href:"#","data-target":"#sidebar","data-toggle":"collapse",title:gettext("Show/Hide Filters")},c.a.createElement("i",{className:"fa fa-chevron-left"}))))}var b,y,_,O,S,P=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return c.a.createElement(s.d,{label:gettext("Program"),options:t.programOptions,value:t.selectedProgramOption,update:function(e){t.selectedProgramOption=e}})})),E=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return c.a.createElement(s.d,{label:t.isTVA?gettext("Target periods"):gettext("Time periods"),options:t.frequencyOptions,disabled:t.frequencyDisabled,value:t.selectedFrequencyOption,update:function(e){t.selectedFrequencyOption=e}})})),F=Object(l.b)("filterStore")(n=Object(l.c)(n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,c.a.Component);var e,t,r,n=f(a);function a(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=n.call(this,e)).checkMostRecent=function(e){var t=isNaN(parseInt(r.state.mostRecentValue))?2:parseInt(r.state.mostRecentValue);r.setState({mostRecentValue:t}),r.mostRecentInputRef.current.focus()},r.handleChange=function(e){!/^[0-9]+$/.exec(e.target.value)&&e.target.value||r.setState({mostRecentValue:e.target.value})},r.handleBlur=function(e){r.state.revert||(r.props.filterStore.mostRecentValue=r.state.mostRecentValue),r.setState({focus:!1,revert:!1,mostRecentValue:r.props.filterStore.mostRecentValue})},r.handleKeyDown=function(e){13===e.keyCode?e.target.blur():27===e.keyCode&&r.setState({revert:!0},function(){r.mostRecentInputRef.current.blur()})},r.handleFocus=function(e){r.setState({focus:!0,revert:!1,mostRecentValue:r.props.filterStore.mostRecentValue})},r.mostRecentInputRef=c.a.createRef(),r.state={focus:!1,revert:!1,mostRecentValue:r.props.filterStore.mostRecentValue},r}return e=a,(t=[{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"form-row mb-3"},c.a.createElement("div",{className:"col-sm-4"},c.a.createElement("div",{className:"form-check form-check-inline pt-1"},c.a.createElement("span",{className:"form-check-input"},c.a.createElement("input",{type:"radio",checked:!this.state.focus&&this.props.filterStore.showAll,disabled:this.props.filterStore.periodsDisabled,onChange:function(){e.props.filterStore.showAll=!0}})),c.a.createElement("label",{onClick:function(){e.props.filterStore.showAll=!0},className:"form-check-label text-nowrap"},gettext("Show all")))),c.a.createElement("div",{className:"col-sm-4 p-0"},c.a.createElement("div",{className:"form-check form-check-inline mr-1 pt-1 float-right"},c.a.createElement("span",{className:"form-check-input"},c.a.createElement("input",{type:"radio",checked:this.state.focus||this.props.filterStore.mostRecentChecked,disabled:this.props.filterStore.periodsDisabled,onChange:this.checkMostRecent})),c.a.createElement("label",{onClick:this.checkMostRecent,className:"form-check-label text-nowrap"},gettext("Most recent")))),c.a.createElement("div",{className:"col-sm-3"},c.a.createElement("input",{className:"form-control pl-3",value:this.state.focus?this.state.mostRecentValue:this.props.filterStore.mostRecentValue,ref:this.mostRecentInputRef,disabled:this.props.filterStore.periodsDisabled,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown})))}}])&&p(e.prototype,t),r&&p(e,r),a}())||n)||n,k=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return c.a.createElement(s.a,{label:gettext("Start"),disabled:t.periodsDisabled,value:t.startPeriodValue||"",update:function(e){t.startPeriodValue=e.target.value},options:t.startOptions})})),w=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return c.a.createElement(s.a,{label:gettext("End"),disabled:t.periodsDisabled,value:t.endPeriodValue||"",update:function(e){t.endPeriodValue=e.target.value},options:t.endOptions})})),I=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return c.a.createElement(s.b,{chainLabel:t.resultChainFilterLabel,value:t.groupBy,update:function(e){t.groupBy=e.target.value}})})),j=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return c.a.createElement(s.c,{label:gettext("Levels"),options:t.levelTierOptions,value:t.levelTierFilters,update:function(e){t.levelTierFilters={levels:e.filter(function(e){return"level"===e.category}).map(function(e){return e.value}),tiers:e.filter(function(e){return"tier"===e.category}).map(function(e){return e.value}),oldLevels:e.filter(function(e){return"oldLevel"===e.category}).map(function(e){return e.value})}}})})),N=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return c.a.createElement(s.c,{label:gettext("Disaggregations"),options:t.disaggregationOptions,value:t.disaggregationFilters,update:function(e){t.disaggregationFilters=e.map(function(e){return e.value})}})})),x=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return c.a.createElement(s.c,{label:gettext("Hide columns"),options:t.hideColumnOptions,value:t.hiddenColumns,update:function(e){t.hiddenColumns=e.map(function(e){return e.value})}})})),C=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return c.a.createElement(s.c,{label:gettext("Sites"),options:t.siteOptions,value:t.siteFilters,update:function(e){t.siteFilters=e.map(function(e){return e.value})}})})),A=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return c.a.createElement(s.c,{label:gettext("Types"),options:t.indicatorTypeOptions,value:t.indicatorTypeFilters,update:function(e){t.indicatorTypeFilters=e.map(function(e){return e.value})}})})),D=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return c.a.createElement(s.c,{label:gettext("Sectors"),options:t.sectorOptions,value:t.sectorFilters,update:function(e){t.sectorFilters=e.map(function(e){return e.value})}})})),R=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return c.a.createElement(s.c,{label:gettext("Indicators"),options:t.indicatorOptions,value:t.indicatorFilters,update:function(e){t.indicatorFilters=e.map(function(e){return e.value})}})})),T=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return c.a.createElement(c.a.Fragment,null,c.a.createElement(P,null),c.a.createElement(E,null),c.a.createElement(F,null),c.a.createElement(k,null),c.a.createElement(w,null),t.resultsFramework&&c.a.createElement(I,null),c.a.createElement(x,null))})),L=Object(l.b)("filterStore")(Object(l.c)(function(e){var t=e.filterStore;return c.a.createElement("nav",{id:"id_iptt_report_filter"},c.a.createElement("div",{className:"p-3",id:"filter-top"},c.a.createElement("h3",{className:"filter-title text-title-case"},gettext("Report Options")),c.a.createElement(T,null)),c.a.createElement("div",{id:"filter-middle",className:"px-3 pt-3 pb-2"},c.a.createElement(h,null)),c.a.createElement("div",{id:"filter-bottom"},c.a.createElement(g,{label:gettext("Clear filters"),action:t.clearFilters.bind(t),isDisabled:!t.filtersActive})),t.programFilterData&&c.a.createElement("div",{id:"filter-extra",className:" d-flex justify-content-between no-gutters p-3"},c.a.createElement("a",{href:"/tola_management/audit_log/".concat(t.selectedProgramId,"/"),className:"btn-link"},c.a.createElement("i",{className:"fas fa-history"})," ",gettext("Change log"))))})),V=r("4L+s");function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function U(a){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?M(Object(i),!0).forEach(function(e){var t,r,n;t=a,n=i[r=e],r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):M(Object(i)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(i,e))})}return a}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function W(e,t,r){return t&&H(e.prototype,t),r&&H(e,r),e}function G(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(i){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=Q(i);return t=o?(e=Q(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==q(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var X=Object(l.c)(b=function(){G(n,c.a.Component);var r=J(n);function n(e){var t;return B(this,n),(t=r.call(this,e)).NOT_SENT=0,t.SENDING=1,t.SENT=2,t.FAILED=3,t.handleChange=function(e){t.setState({reportName:e.target.value})},t.isDisabled=function(){return!t.props.rootStore.pinAPI.pinReady||!t.state.reportName},t.handleClick=function(){t.setState({status:t.SENDING}),t.props.rootStore.pinAPI.savePin(U({name:t.state.reportName},t.props.rootStore.pinParams)).then(function(){t.setState({status:t.SENT}),t.props.updatePosition()}).catch(function(){t.setState({status:t.FAILED})})},t.state={reportName:"",status:t.NOT_SENT},t}return W(n,[{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,function(){switch(e.state.status){case e.SENT:return c.a.createElement("div",{className:"form-group"},c.a.createElement("p",null,c.a.createElement("span",null,gettext("Success!  This report is now pinned to the program page"))),c.a.createElement("p",null,c.a.createElement("a",{href:e.props.rootStore.pinAPI.programPageUrl},gettext("Visit the program page now."))));case e.FAILED:return c.a.createElement("div",{className:"form-group"},c.a.createElement("p",null,c.a.createElement("span",null,gettext("Something went wrong when attempting to pin this report"))));case e.NOT_SENT:return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:""},gettext("Report name")),c.a.createElement("input",{type:"text",className:"form-control",value:e.state.reportName,onChange:e.handleChange,disabled:e.state.sending})),c.a.createElement("button",{type:"button",onClick:e.handleClick,disabled:e.isDisabled(),className:"btn btn-primary btn-block"},gettext("Pin to program page")));case e.SENDING:return c.a.createElement("div",{className:"btn btn-primary",disabled:!0},c.a.createElement("img",{src:"/static/img/ajax-loader.gif"})," ",gettext("Sending"))}}())}}]),n}())||b,K=Object(l.b)("rootStore")(y=Object(l.c)(y=function(){G(i,V["a"]);var a=J(i);function i(){var e;B(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=a.call.apply(a,[this].concat(r))).popoverName="pin",e.getPopoverContent=function(){return c.a.createElement(X,{rootStore:e.props.rootStore,updatePosition:function(){$(e.refs.target).popover("update")}})},e}return W(i,[{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{href:"#",className:"btn btn-sm btn-secondary",ref:"target"},c.a.createElement("i",{className:"fas fa-thumbtack"}),gettext("Pin")))}}]),i}())||y)||y,Y=Object(l.c)(_=function(){G(i,c.a.Component);var a=J(i);function i(){var e;B(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=a.call.apply(a,[this].concat(r))).getCurrent=function(){e.props.excelUrl&&window.open(e.props.excelUrl,"_blank")},e.getAll=function(){e.props.fullExcelUrl&&window.open(e.props.fullExcelUrl,"_blank")},e}return W(i,[{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement("button",{type:"button",className:"btn btn-primary btn-block",onClick:this.getCurrent},gettext("Current view")),c.a.createElement("button",{type:"button",className:"btn btn-primary btn-block",onClick:this.getAll},gettext("All program data")))}}]),i}())||_,Z=Object(l.c)(O=function(){G(i,V["a"]);var a=J(i);function i(){var e;B(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=a.call.apply(a,[this].concat(r))).popoverName="excel",e.getPopoverContent=function(){return c.a.createElement(Y,e.props)},e}return W(i,[{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{type:"button",className:"btn btn-sm btn-secondary",ref:"target"},c.a.createElement("i",{className:"fas fa-download"})," Excel"))}}]),i}())||O,ee=Object(l.c)(S=function(){G(i,c.a.Component);var a=J(i);function i(){var e;B(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=a.call.apply(a,[this].concat(r))).handleClick=function(){e.props.excelUrl&&window.open(e.props.excelUrl,"_blank")},e}return W(i,[{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{type:"button",className:"btn btn-sm btn-secondary",onClick:this.handleClick},c.a.createElement("i",{className:"fas fa-download"})," Excel"))}}]),i}())||S,te=Object(l.b)("filterStore","rootStore")(Object(l.c)(function(e){var t=e.filterStore,r=e.rootStore;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"page-subheader"},c.a.createElement("div",{id:"id_span_iptt_date_range",className:"subheader__title"},c.a.createElement("h2",{className:"text-title-case"},gettext("Indicator Performance Tracking Table")),c.a.createElement("h4",null,t.startPeriod&&t.endPeriod?t.startPeriod.startLabel+" - "+t.endPeriod.endLabel:"")),c.a.createElement("div",{className:"subheader__actions"},c.a.createElement("div",{className:"btn-row"},c.a.createElement(K,null),t.isTVA?c.a.createElement(Z,r.excelAPI):c.a.createElement(ee,{excelUrl:r.excelAPI.excelUrl})))),r.currentProgram&&c.a.createElement("h3",null,c.a.createElement("a",{href:r.currentProgramPageUrl},r.currentProgram.name)))})),re=r("7O5W"),ne=r("IP2g"),ae=r("wHSu"),ie=r("ma3e");function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ce(i){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=ue(i);return t=o?(e=ue(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==oe(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e){var t=e.styleWidth?{minWidth:"".concat(e.styleWidth,"px")}:{};return c.a.createElement("th",{scope:"col",colSpan:e.colSpan,className:e.className,style:t},e.label)}function de(e){return c.a.createElement("td",{scope:"colgroup",colSpan:e.isTVA?3:1,className:"iptt-period-header"},c.a.createElement("span",{className:"text-uppercase"},e.period.name),e.period.range&&c.a.createElement(c.a.Fragment,null,c.a.createElement("br",null),c.a.createElement("small",null,e.period.range)))}function fe(){return c.a.createElement("th",{scope:"col",className:"iptt-period-subheader",style:{minWidth:"110px"}},gettext("Target"))}function me(){return c.a.createElement("th",{scope:"col",className:"iptt-period-subheader",style:{minWidth:"110px"}},pgettext("report (long) header","Actual"))}function ge(){return c.a.createElement("th",{scope:"col",className:"iptt-period-subheader",style:{minWidth:"110px"}},gettext("% Met"))}function he(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(fe,null),c.a.createElement(me,null),c.a.createElement(ge,null))}var ve=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(a,c.a.Component);var e,t,r,n=ce(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n.apply(this,arguments)}return e=a,(t=[{key:"render",value:function(){var e=gettext("All values in this report are rounded to two decimal places.");return c.a.createElement("span",{className:"text-uppercase"},this.props.children,c.a.createElement("a",{href:"#",className:"popover-icon",tabIndex:"0","data-toggle":"popover","data-placement":"right","data-trigger":"focus","data-content":e},c.a.createElement(ie.a,null)))}}])&&le(e.prototype,t),r&&le(e,r),a}();re.b.add(ae.f,ae.d);function be(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(_e,null),c.a.createElement("thead",null,c.a.createElement(Oe,null),c.a.createElement(Se,null)))}var ye,_e=Object(l.b)("rootStore")(Object(l.c)(function(e){var r=e.rootStore;return c.a.createElement(c.a.Fragment,null,c.a.createElement("colgroup",{span:r.baseColumns+1,className:"iptt-base-columns"}),c.a.createElement("colgroup",{span:3,className:"iptt-lop-columns"}),r.reportPeriods.map(function(e,t){return c.a.createElement("colgroup",{key:t,span:r.isTVA?3:1,className:"iptt-period-columns",id:"period-"+t})}))})),Oe=Object(l.b)("rootStore")(Object(l.c)(function(e){var r=e.rootStore;return r.currentProgram?c.a.createElement("tr",{className:"title-row"},c.a.createElement("td",{colSpan:r.baseColumns+1,className:"base-column"},c.a.createElement("button",{className:"btn btn-medium text-action btn-sm",onClick:r.expandAllRows.bind(r),disabled:r.allExpanded},c.a.createElement(ne.a,{icon:"plus-square"}),gettext("Expand all")),c.a.createElement("button",{className:"btn btn-medium text-action btn-sm",onClick:r.collapseAllRows.bind(r),disabled:r.allCollapsed},c.a.createElement(ne.a,{icon:"minus-square"}),gettext("Collapse all"))),c.a.createElement("td",{colSpan:3,className:"iptt-period-header"},c.a.createElement(ve,null,gettext("Life of program"))),r.reportPeriods.map(function(e,t){return c.a.createElement(de,{isTVA:r.isTVA,key:t,period:e})})):c.a.createElement("tr",null,c.a.createElement("td",null,"Loading"))})),Se=Object(l.b)("rootStore")(Object(l.c)(function(e){var r=e.rootStore;return c.a.createElement("tr",null,c.a.createElement(pe,{styleWidth:110,className:"base-column",label:gettext("No.")}),c.a.createElement(pe,{className:"base-column",styleWidth:600,colSpan:2,label:gettext("Indicator")}),c.a.createElement(pe,{className:"base-column"}),!r.filterStore.resultsFramework&&c.a.createElement(pe,{className:"base-column",styleWidth:90,label:gettext("Level")}),r.hasUOMColumn&&c.a.createElement(pe,{className:"base-column",styleWidth:250,label:gettext("Unit of measure")}),r.hasChangeColumn&&c.a.createElement(pe,{className:"base-column",label:gettext("Change")}),r.hasCNCColumn&&c.a.createElement(pe,{className:"base-column",styleWidth:130,label:gettext("C / NC")}),r.hasUOMTypeColumn&&c.a.createElement(pe,{className:"base-column",styleWidth:50,label:gettext("# / %")}),r.hasBaselineColumn&&c.a.createElement(pe,{className:"base-column",label:gettext("Baseline")}),c.a.createElement(pe,{styleWidth:110,className:"lop-column",label:gettext("Target")}),c.a.createElement(pe,{styleWidth:110,className:"lop-column",label:pgettext("report (long) header","Actual")}),c.a.createElement(pe,{styleWidth:110,className:"lop-column",label:gettext("% Met")}),r.reportPeriods.map(function(e,t){return r.isTVA?c.a.createElement(he,{key:t}):c.a.createElement(me,{key:t})}))})),Pe=r("v38i");function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function we(i){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=Ie(i);return t=o?(e=Ie(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==Ee(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function je(){return(je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Ne(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),i=0;i<a.length;i++)r=a[i],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}re.b.add(ae.b,ae.c);function xe(e){var t=e.value,r=e.resultCell,n=Ne(e,["value","resultCell"]),a=t||0===t?t:c.a.createElement("span",{className:"empty-value"},Pe.b);return r&&!0===r?c.a.createElement("td",je({className:"indicator-cell result-cell"},n),a):c.a.createElement("td",je({className:"indicator-cell "},n),a)}function Ce(e){var t=e.value,r=Ne(e,["value"]),t=null!=t?"".concat(We(t),"%"):null;return c.a.createElement(xe,je({className:"indicator-cell percent-cell",value:t},r))}function Ae(e){var t=e.value,r=Ne(e,["value"]),t=null!=t?We(t):null;return c.a.createElement(xe,je({className:"indicator-cell number-cell",value:t},r))}function De(e){var t=e.value;return e.resultCell,Ne(e,["value","resultCell"]),c.a.createElement(c.a.Fragment,null,c.a.createElement(Ae,{value:t.target}),c.a.createElement(Ae,{value:t.actual}),c.a.createElement(Ce,{value:t.met}))}function Re(e){var t=e.value;return e.resultCell,Ne(e,["value","resultCell"]),c.a.createElement(c.a.Fragment,null,c.a.createElement(Ce,{value:t.target}),c.a.createElement(Ce,{value:t.actual}),c.a.createElement(Ce,{value:t.met}))}function Te(e){var t=e.level;return c.a.createElement(Je,null,t.tierNumber,": ",t.name)}function Le(){return c.a.createElement(Je,null,gettext("Indicators unassigned to a results framework level"))}function Ve(e){var t=e.level,r=e.indicators;return c.a.createElement(c.a.Fragment,null,t?c.a.createElement(Te,{level:t}):r&&0<r.length&&c.a.createElement(Le,null),r.map(function(e,t){return c.a.createElement(ze,{indicator:e,levelCol:!1,key:t})}))}function qe(){return c.a.createElement("main",{className:"iptt_table_wrapper"},c.a.createElement("div",{id:"id_div_top_iptt_report"},c.a.createElement(te,null),c.a.createElement("table",{className:"table table-sm table-hover table__iptt",id:"iptt_table"},c.a.createElement(be,null),c.a.createElement(Qe,null))))}function Me(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(v,null),c.a.createElement(qe,null))}var Ue=Object(l.b)("rootStore")(Object(l.c)(function(e){var r=e.rootStore,n=e.indicator;return c.a.createElement("td",{className:"indicator-edit-modal-cell "},c.a.createElement("button",{type:"button",className:"btn btn-link p-1 float-right",onClick:function(e){e.preventDefault();var t="/indicators/indicator_update/".concat(n.pk,"/?modal=true");$("#indicator_modal_content").empty(),$("#modalmessages").empty(),$("#indicator_modal_content").load(t),$("#indicator_modal_div").modal("show").on("updated.tola.indicator.save",r.indicatorUpdate.bind(r)).on("deleted.tola.indicator.save",r.indicatorDelete.bind(r)).one("hidden.bs.modal",function(e){$(e.target).off(".tola.save")})}},c.a.createElement("i",{className:"fas fa-cog"})))})),Be=Object(l.b)("rootStore")(Object(l.c)(function(e){var t=e.indicator,r=e.rootStore;return c.a.createElement("td",{className:"indicator-result-modal-cell "},c.a.createElement("button",{type:"button",className:"btn btn-link p-1 indicator-ajax-popup indicator-data",onClick:function(e){e.preventDefault(),r.loadResultsModal(t.pk)}},c.a.createElement("i",{className:"fas fa-table"})))})),$e=Object(l.c)(function(e){var t=e.value,r=e.expanded,n=e.clickHandler,a=Ne(e,["value","expanded","clickHandler"]),i=t||0===t?t:c.a.createElement("span",{className:"empty-value"},Pe.b);return c.a.createElement("td",je({className:"expando-cell "},a,{onClick:n}),c.a.createElement(ne.a,{icon:r?"caret-down":"caret-right"})," ",i)}),He=Object(l.c)(function(e){var t=e.value,r=(e.expanded,e.clickHandler),n=Ne(e,["value","expanded","clickHandler"]),a=t||0===t?t:Pe.b;return c.a.createElement("td",je({className:"indicator-cell expando-cell "},n,{onClick:r}),a)}),We=window.localizeNumber,Ge=Object(l.b)("rootStore")(Object(l.c)(function(e){var a=e.indicator,t=e.disaggregationPk,i=e.rootStore,o=i.getDisaggregationLabels(t);if(!o)return null;var l=Ae;a.isPercent&&(l=Ce);var s=i.hiddenCategories?o.labels.filter(function(e){return i.disaggregatedLop(a.pk,e.pk)}):o.labels;return s?c.a.createElement(c.a.Fragment,null,s.map(function(e,t){return c.a.createElement("tr",{className:t==s.length-1?"disaggregation-end-row":"",key:t},0==t&&c.a.createElement("td",{className:"disaggregation-name-cell",colSpan:2,rowSpan:s.length},o.name),c.a.createElement("td",{colSpan:i.hasBaselineColumn?i.baseColumns-2:i.baseColumns-1,className:"disaggregation-label-cell"},e.name),i.hasBaselineColumn&&c.a.createElement("td",{className:"disaggregation-value-cell base-column empty-value"},"—"),c.a.createElement("td",{className:"disaggregation-value-cell lop-column empty-value"},"—"),c.a.createElement(l,{className:"disaggregation-value-cell lop-column",value:(r=i.disaggregatedLop(a.pk,e.pk),n=!1,r==gettext("N/A")?r:""===r||isNaN(parseFloat(r))?null:(r=Number.isInteger(r)?String(r):(r=Number.parseFloat(r).toFixed(2)).endsWith("00")?parseInt(r):r.endsWith("0")?r.slice(0,-1):r,!0===n?"".concat(r,"%"):r))}),c.a.createElement("td",{className:"disaggregation-value-cell lop-column empty-value"},"—"),i.disaggregatedPeriodValues(a.pk,e.pk).map(function(e,t){return i.isTVA?c.a.createElement(c.a.Fragment,{key:t},c.a.createElement("td",{className:"disaggregation-value-cell empty-value"},"—"),c.a.createElement(l,{key:t,value:e.actual}),c.a.createElement("td",{className:"disaggregation-value-cell empty-value"},"—")):c.a.createElement(l,{key:t,value:e})}));var r,n})):c.a.createElement(c.a.Fragment,null)})),ze=Object(l.b)("rootStore")(ye=Object(l.c)(ye=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(a,c.a.Component);var e,t,r,n=we(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=n.call(this,e)).handleExpandoClick=function(e){t.setState({expanded:!t.state.expanded})},t.expandRow=function(){t.setState({expanded:!0})},t.collapseRow=function(){t.setState({expanded:!1})},t.state={expanded:!1},t}return e=a,(t=[{key:"componentDidMount",value:function(){this.props.rootStore._expandoRows.push(this)}},{key:"componentWillUnmount",value:function(){var t=this;this.props.rootStore._expandoRows=this.props.rootStore._expandoRows.filter(function(e){return e!=t})}},{key:"render",value:function(){var e,t=this.props.indicator,r=this.props.rootStore,n=t.isPercent?(e=Ce,r.isTVA?Re:Ce):(e=Ae,r.isTVA?De:Ae),a=null===t.isCumulative?null:t.isCumulative?gettext("Cumulative"):gettext("Non-cumulative"),i=t.number;i&&0<i.length&&":"==i.slice(-1)&&(i=i.slice(0,-1));var o=r.getReportData(t.pk);return c.a.createElement(c.a.Fragment,null,c.a.createElement("tr",null,r.indicatorHasActiveDisaggregations(t)?c.a.createElement($e,{value:i,expanded:this.state.expanded,clickHandler:this.handleExpandoClick}):c.a.createElement(xe,{className:"indicator-cell ",value:i}),c.a.createElement(Be,{indicator:t}),r.indicatorHasActiveDisaggregations(t)?c.a.createElement(He,{value:t.name,expanded:this.state.expanded,clickHandler:this.handleExpandoClick}):c.a.createElement(xe,{className:"indicator-cell ",value:t.name}),c.a.createElement(Ue,{indicator:t}),!r.resultsFramework&&c.a.createElement(xe,{className:"indicator-cell ",value:t.oldLevelDisplay}),r.hasUOMColumn&&c.a.createElement(xe,{className:"indicator-cell ",value:t.unitOfMeasure}),r.hasChangeColumn&&c.a.createElement(xe,{className:"indicator-cell ",value:t.directionOfChange||gettext("N/A")}),r.hasCNCColumn&&c.a.createElement(xe,{className:"indicator-cell ",value:a||gettext("N/A")}),r.hasUOMTypeColumn&&c.a.createElement(xe,{className:"indicator-cell is-percent-column ",value:t.isPercent?"%":"#"}),r.hasBaselineColumn&&(null===t.baseline?c.a.createElement(xe,{className:"indicator-cell baseline-column",value:gettext("N/A")}):c.a.createElement(e,{value:t.baseline,className:"lop-column"})),o&&c.a.createElement(c.a.Fragment,null,c.a.createElement(e,{value:o.lopTarget,className:"lop-column "}),c.a.createElement(e,{value:o.lopActual,className:"lop-column"}),c.a.createElement(Ce,{value:o.lopMet,className:"lop-column"}),o.periodValues&&r.periodValues(t.pk).map(function(e,t){return c.a.createElement(n,{value:e,key:t,resultCell:!0})}))),this.state.expanded&&c.a.createElement(c.a.Fragment,null,r.activeDisaggregationPks.filter(function(e){return t.hasDisaggregation(e)}).map(function(e){return c.a.createElement(c.a.Fragment,{key:e},c.a.createElement(Ge,{indicator:t,disaggregationPk:e}))})))}}])&&Fe(e.prototype,t),r&&Fe(e,r),a}())||ye)||ye,Je=Object(l.b)("rootStore")(Object(l.c)(function(e){var t=e.rootStore,r=e.children;return c.a.createElement("tr",null,c.a.createElement("td",{colSpan:t.reportColumnWidth+1,className:"iptt-level-row"},r))})),Qe=Object(l.b)("rootStore","filterStore")(Object(l.c)(function(e){var t=e.rootStore;e.filterStore;return c.a.createElement("tbody",null,t.levelRows?t.levelRows.map(function(e,t){return c.a.createElement(Ve,{level:e.level,indicators:e.indicators,key:t})}):t.indicatorRows.map(function(e,t){return c.a.createElement(ze,{indicator:e,key:t})}))})),Xe=r("2vnA"),Ke=r("1d5Q"),Ye=r("OtFd"),Ze=r("My+N"),et=Object(Ze.a)(Ze.b,function(e){var t=0<arguments.length&&void 0!==e?e:{};return{number:t.number||null,sectorPk:t.sector_pk||null,_typePks:Object(Xe.n)(new Set(t.indicator_type_pks||[])),hasIndicatorType:function(e){return!isNaN(parseInt(e))&&this._typePks.has(parseInt(e))},_sitePks:Object(Xe.n)(new Set(t.site_pks||[])),hasSite:function(e){return!isNaN(parseInt(e))&&this._sitePks.has(parseInt(e))},_disaggregationPks:Object(Xe.n)(new Set(t.disaggregation_pks||[])),hasDisaggregation:function(e){return!isNaN(parseInt(e))&&this._disaggregationPks.has(parseInt(e))},hasDisaggregations:function(e){var t=this;return 0<e.filter(function(e){return t._disaggregationPks.has(e)}).length}}}),tt=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return[function(e){var t=0<arguments.length&&void 0!==e?e:{};return{pk:parseInt(t.pk),name:t.name,ontology:t.ontology||null,tierName:t.tier_name}}].concat(t).reduce(function(e,t){return Object(Xe.i)(e,t(r))},{})}}(function(e){var t=0<arguments.length&&void 0!==e?e:{};return{tierPk:isNaN(parseInt(t.tier_pk))?null:parseInt(t.tier_pk),tierDepth:parseInt(t.tier_depth),showForTier:function(e){return!isNaN(parseInt(e))&&parseInt(e)===this.tierPk},chainPk:isNaN(parseInt(t.chain_pk))?null:parseInt(t.chain_pk),_alwaysShowChain:!1,showForChain:function(e){return this._alwaysShowChain||!isNaN(parseInt(e))&&parseInt(e)===this.chainPk},get isResultChainLevel(){return this.chainPk&&this.chainPk==this.pk},get tierNumber(){return"".concat(this.tierName)+(this.ontology?" ".concat(this.ontology):"")},get resultChainLabel(){var e=gettext("%(this_level_number)s and sub-levels: %(this_level_full_name)s");return interpolate(e,{this_level_number:this.tierNumber,this_level_full_name:this.name},!0)}}});function rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r}(e,t)||at(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e){return function(e){if(Array.isArray(e))return it(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||at(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){if(e){if("string"==typeof e)return it(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?it(e,t):void 0}}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ot(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function lt(a){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(i),!0).forEach(function(e){var t,r,n;t=a,n=i[r=e],r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):ot(Object(i)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(i,e))})}return a}var st=Object(Ye.a)(function(e){var t=0<arguments.length&&void 0!==e?e:{};return{periods:t.periods.map(function(e){return function(e){var t=0<arguments.length&&void 0!==e?e:{};return{_frequency:parseInt(t.frequency),_name:t.name,label:t.label,start:new Date(t.start),startLabel:t.start_label,end:new Date(t.end),endLabel:t.end_label,past:Boolean(t.past),year:t.year,get range(){return[2,7].includes(this._frequency)?null:"".concat(this.startLabel," – ").concat(this.endLabel)},get name(){return 7==this._frequency?"".concat(this._name," ").concat(this.year):this._name}}}(lt(lt({},e),{},{frequency:t.frequency}))}),years:nt(new Set(t.periods.map(function(e){return e.year}))).sort()}}),ct=Object(Ke.a)(Ke.d,Ke.c,function(e){var t=0<arguments.length&&void 0!==e?e:{};return{frequencies:Object(Xe.n)(new Set((t.frequencies||[]).map(function(e){return parseInt(e)}).filter(function(e){return!isNaN(e)}))),periodRanges:Object(Xe.n)(new Map(Object.entries(t.period_date_ranges||{}).map(function(e){var t=rt(e,2),r=t[0],n=t[1],a=parseInt(r);return[a,st({frequency:a,periods:n})]}))),validFrequency:function(e){return!isNaN(parseInt(e))&&this.frequencies.has(parseInt(e))},resultChainLabel:t.result_chain_label,indicators:Object(Xe.n)(new Map((t.indicators||[]).map(function(e){return et(e)}).map(function(e){return[e.pk,e]}))),levels:Object(Xe.n)(new Map((t.levels||[]).map(function(e){return tt(e)}).map(function(e){return[e.pk,e]}))),tiers:Object(Xe.n)(new Map((t.tiers||[]).map(function(e){return[parseInt(e.pk),{pk:parseInt(e.pk),name:e.name,depth:e.tier_depth}]}))),oldLevels:Object(Xe.n)(new Map((t.old_levels||[]).map(function(e){return[parseInt(e.pk),{pk:e.pk,name:e.name}]}))),sectors:Object(Xe.n)(new Map((t.sectors||[]).map(function(e){return[parseInt(e.pk),{pk:parseInt(e.pk),name:e.name}]}))),sites:Object(Xe.n)(new Map((t.sites||[]).map(function(e){return[parseInt(e.pk),{pk:parseInt(e.pk),name:e.name}]}))),disaggregations:Object(Xe.n)(new Map((t.disaggregations||[]).map(function(e){return[parseInt(e.pk),{pk:parseInt(e.pk),name:e.country?e.name:gettext(e.name),country:e.country||null,labels:(e.labels||[]).map(function(e){return{pk:parseInt(e.pk),name:e.name}})}]}).filter(function(e){var t=rt(e,2),r=(t[0],t[1]);return r.labels&&0<r.labels.length}))),indicatorTypes:Object(Xe.n)(new Map((t.indicator_types||[]).map(function(e){return[parseInt(e.pk),{pk:parseInt(e.pk),name:e.name}]}))),deleteIndicator:function(t){var r=this;return isNaN(parseInt(t))?this.updateOrder():this.updateOrder().then(function(e){r.indicators.delete(parseInt(t))})}}}),ut=r("wgi2"),pt=r("0pHI");function dt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ft(a){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?dt(Object(i),!0).forEach(function(e){var t,r,n;t=a,n=i[r=e],r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):dt(Object(i)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(i,e))})}return a}function mt(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),i=0;i<a.length;i++)r=a[i],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function gt(e){return"string"==typeof e||e instanceof String?[parseInt(e)]:Array.isArray(e)?e.map(function(e){return parseInt(e)}):Number.isInteger(e)?[e]:isNaN(parseInt(e))?[]:[parseInt(e)]}var ht="?"+[].concat(["frequency","start","end","levels","types","sites","disaggregations","sectors","indicators","tiers","groupby","mr","columns"],["timeframe","numrecentperiods","numrecentcount","start_period","end_period"]).join("&"),vt=[{name:"iptt",path:"/iptt_report/:programId<\\d+>",children:[{name:"timeperiods",path:"/timeperiods?timeperiods"},{name:"tva",path:"/targetperiods?targetperiods"}]},{name:"ipttExcel",path:"/iptt_api/iptt_excel?fullTVA&reportType&programId"}],bt=r("5/4V");function yt(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),i=0;i<a.length;i++)r=a[i],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function _t(e){return function(e){if(Array.isArray(e))return Pt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||St(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r}(e,t)||St(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(e,t){if(e){if("string"==typeof e)return Pt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pt(e,t):void 0}}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Et(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=((e=Object(ut.b)(vt,{trailingSlashMode:"always"})).setRootPath(ht),e.usePlugin(Object(pt.a)({useHash:!1,base:"/indicators"})),e.start(),Xe.n.object({_router:e,get isTVA(){return"iptt.tva"===this._router.getState().name},get programId(){return this._router.getState().params.programId},get frequency(){var e=this._router.getState().params,t=e.frequency,r=e.timeperiods,n=e.targetperiods;return mt(e,["frequency","timeperiods","targetperiods"]),isNaN(parseInt(t))?isNaN(parseInt(r))?isNaN(parseInt(n))?null:parseInt(n):parseInt(r):parseInt(t)},get start(){return this._router.getState().params.start},get end(){return this._router.getState().params.end},get timeframe(){return 2==this._router.getState().params.timeframe?{mostRecent:this._router.getState().params.numrecentperiods}:1==this._router.getState().params.timeframe&&{showAll:!0}},get mr(){return 1==this._router.getState().params.mr},get groupBy(){return this._router.getState().params.groupby},get levels(){return gt(this._router.getState().params.levels)},get tiers(){return gt(this._router.getState().params.tiers)},get sectors(){return gt(this._router.getState().params.sectors)},get sites(){return gt(this._router.getState().params.sites)},get disaggregations(){return gt(this._router.getState().params.disaggregations)},get hiddenCategories(){var e=this._router.getState().params.disaggregations;return Array.isArray(e)?e.includes("hide-categories"):e&&"hide-categories"==e},get columns(){return gt(this._router.getState().params.columns)},get types(){return gt(this._router.getState().params.types)},get indicators(){return gt(this._router.getState().params.indicators)},updateParams:function(e){var t=e.tva,r=mt(e,["tva"]),n=t?"iptt.tva":"iptt.timeperiods";this._router.buildPath(n,r)!==this._router.getState().path&&this._router.navigate(n,r,{replace:!0})},get queryParams(){return this._router.getState().params},getExcelUrl:function(e){var t=e.tva,r=mt(e,["tva"]);return this._router.buildUrl("ipttExcel",ft(ft({},r),{},{reportType:t?Pe.l:Pe.i,fullTVA:!1}))},getFullExcelUrl:function(e){var t=e.programId,r=e.groupby;return mt(e,["programId","groupby"]),this._router.buildUrl("ipttExcel",{programId:t,groupBy:r,fullTVA:!0})}})),n=Xe.n.object({_programsListStore:function(e){var t=0<arguments.length&&void 0!==e?e:[];return Xe.n.object({_allPrograms:new Map(t.filter(function(e){var t=Ot(e,3),r=t[0];t[1],t[2];return!isNaN(parseInt(r))}).map(function(e){var t=Ot(e,3),r=t[0],n=t[1],a=t[2];return[parseInt(r),{pk:parseInt(r),name:n,tvaCount:parseInt(a)}]})),listPrograms:function(){return Array.from(this._allPrograms.values())},listTvaPrograms:function(){return this.listPrograms().filter(function(e){return 0<e.tvaCount})},getProgram:function(e){return isNaN(parseInt(e))?null:this._allPrograms.get(parseInt(e))},hasProgram:function(e){return!isNaN(parseInt(e))&&this._allPrograms.has(parseInt(e))}})}(t.programs_list||[]),_programFilterDataStore:function(e){var t=ct(0<arguments.length&&void 0!==e?e:{});return Xe.n.object({_programs:new Map([[t.pk,t]]),getProgramFilterData:function(e){return this._programs.has(parseInt(e))?this._programs.get(parseInt(e)):null},loadProgramFilterData:function(e){var t=this;return isNaN(parseInt(e))?Promise.reject("invalid program Id"):bt.a.ipttFilterData(e).then(function(e){return ct(e)}).then(function(e){Object(Xe.p)(function(){return t._programs.set(e.pk,e),e})})}})}(t.program_data),_router:r,_reportType:null,_selectedProgramId:null,_selectedFrequency:null,_start:null,_end:null,_mostRecentForce:null,_groupBy:Pe.d,_indicatorFilters:{},_hiddenColumns:[],_hiddenCategories:!1,get isTVA(){return this._reportType===Pe.l},get selectedProgramId(){return this._programsListStore.hasProgram(this._selectedProgramId)?this._selectedProgramId:null},setProgramId:function(e){var t=this;if(e=parseInt(e),isNaN(e))this._selectedProgramId=null;else if(e!==this._selectedProgramId){this.clearFilters();var r=this.selectedFrequency,n={mostRecent:""!=this.mostRecentValue?this.mostRecentValue:null,showAll:this.showAll,start:this.startPeriodValue,end:this.endPeriodValue};return this._selectedProgramId=e,this.updateProgramFilterData().then(function(){t.setFrequency(r),t.setPeriods(n)})}},get programOptions(){return(this.isTVA?this._programsListStore.listTvaPrograms():this._programsListStore.listPrograms()).map(function(e){return{value:e.pk,label:e.name}})},get selectedProgramOption(){var e=this._programsListStore.getProgram(this.selectedProgramId);return e&&null!==e?{value:e.pk,label:e.name}:Pe.a},set selectedProgramOption(e){this.setProgramId(e.value)},get programFilterData(){return this._programFilterDataStore.getProgramFilterData(this.selectedProgramId)},updateProgramFilterData:function(){return this._programFilterDataStore.loadProgramFilterData(this.selectedProgramId)},get _frequencyLabels(){return this.isTVA?Pe.m:Pe.j},get frequencyDisabled(){return null===this.selectedProgramId},get frequencyOptions(){var t=this;return this.programFilterData?(this.isTVA?Array.from(this.programFilterData.frequencies).sort():Pe.k).map(function(e){return{value:e,label:t._frequencyLabels[e]}}):[Pe.a]},get selectedFrequency(){return this.selectedProgramId&&!isNaN(parseInt(this._selectedFrequency))?parseInt(this._selectedFrequency):null},setFrequency:function(e){if(e=parseInt(e),isNaN(e))return this._selectedFrequency=null,!1;if(this.isTVA&&!this.programFilterData.frequencies.has(e)?e=parseInt(Array.from(this.programFilterData.frequencies).sort()[0]):this.isTVA||Pe.k.includes(e)||(e=parseInt(Pe.k[0])),e!==this._selectedFrequency){var t={mostRecent:""!=this.mostRecentValue?this.mostRecentValue:null,showAll:this.showAll,start:this.startPeriodValue,end:this.endPeriodValue};return this._selectedFrequency=e,this.setPeriods(t),!0}},get selectedFrequencyOption(){return this.programFilterData&&null!==this.selectedFrequency?{value:this.selectedFrequency,label:this._frequencyLabels[this.selectedFrequency]}:Pe.a},set selectedFrequencyOption(e){this.setFrequency(e.value)},get periodsDisabled(){return!this.programFilterData||!Pe.k.includes(this.selectedFrequency)},get periodRange(){return this.periodsDisabled?{years:[],options:[Pe.a]}:this.programFilterData.periodRanges.get(this.selectedFrequency)},get startOptions(){var e=this;if(Pe.f.includes(this.selectedFrequency))return[Pe.a];if(3==this.selectedFrequency)return this.periodRange.options;var t=this.periodRange.years.map(function(t){return{label:t,options:e.periodRange.options.filter(function(e){return e.year==t})}}).filter(function(e){return 0<e.options.length});return 0==t.length?[Pe.a]:1==t.length?t[0].options:t},get endOptions(){var t=this;if(Pe.f.includes(this.selectedFrequency))return[Pe.a];var e=this.periodRange.options.filter(function(e){return!t.startPeriodValue||e.value>=t.startPeriodValue});if(3==this.selectedFrequency)return e;var r=this.periodRange.years.map(function(t){return{label:t,options:e.filter(function(e){return e.year==t})}}).filter(function(e){return 0<e.options.length});return 0==r.length?[Pe.a]:1==r.length?r[0].options:r},get _lastPeriod(){return this.periodsDisabled?null:this.programFilterData.periodRanges.get(this.selectedFrequency).periodCount-1},get _currentPeriod(){return this.periodsDisabled?null:this.programFilterData.periodRanges.get(this.selectedFrequency).currentPeriod},get mostRecentChecked(){return""!==this.mostRecentValue},get mostRecentValue(){return this.periodsDisabled||this.showAll||this.endPeriodValue!==this._currentPeriod?"":this.endPeriodValue-this.startPeriodValue+1},get showAll(){return!this.periodsDisabled&&!this._mostRecentForce&&(0===this.startPeriodValue&&this._lastPeriod&&this.endPeriodValue==this._lastPeriod)},set showAll(e){this._mostRecentForce=!1,this.startPeriodValue=0,this.endPeriodValue=this._lastPeriod},set mostRecentValue(e){var r;this.startPeriodValue=0,this.endPeriodValue=this._currentPeriod,this.startPeriodValue=this.endPeriodValue-e+1,this.showAll&&(this._mostRecentForce=!0,r=this,Object(Xe.o)(function(){return[r.mostRecentChecked,r.startPeriodValue,r.endPeriodValue]},function(e,t){r._mostRecentForce=!1,t.dispose()}))},get startPeriod(){return this.programFilterData&&Pe.f.includes(this.selectedFrequency)?this.programFilterData.periodRanges.get(this.selectedFrequency).periods[0]:this.programFilterData&&this.selectedFrequency&&null!==this._start?this.programFilterData.periodRanges.get(this.selectedFrequency).periods[this._start]:null},get startPeriodValue(){return this.periodsDisabled?null:this._start},set startPeriodValue(e){e=isNaN(parseInt(e))?0:parseInt(e),null!==this._lastPeriod&&(this._start=Math.max(0,Math.min(this._lastPeriod,e))),this.endPeriodValue&&this.startPeriodValue>this.endPeriodValue&&(this.endPeriodValue=this.startPeriodValue)},get endPeriod(){return this.programFilterData&&Pe.f.includes(this.selectedFrequency)?this.programFilterData.periodRanges.get(this.selectedFrequency).periods.slice(-1).pop():this.programFilterData&&this.selectedFrequency&&null!==this._end?this.programFilterData.periodRanges.get(this.selectedFrequency).periods[this._end]:null},get endPeriodValue(){return this.periodsDisabled?null:this._end},set endPeriodValue(e){e=isNaN(parseInt(e))?this._lastPeriod:parseInt(e),null!==this._lastPeriod&&(this._end=Math.max(this.startPeriodValue||0,Math.min(this._lastPeriod,e)))},setTimeframe:function(e){var t=0<arguments.length&&void 0!==e?e:{},r=t.mostRecent,n=void 0===r?null:r,a=t.showAll,i=void 0===a?null:a;n&&(this.mostRecentValue=n),i&&(this.showAll=!0)},setPeriods:function(e){var t=e.mostRecent,r=void 0===t?null:t,n=e.showAll,a=void 0===n?null:n,i=e.start,o=void 0===i?null:i,l=e.end,s=void 0===l?null:l;r?this.mostRecentValue=r:a?this.showAll=!0:(this.startPeriodValue=o,this.endPeriodValue=s)},get resultsFramework(){return this.programFilterData&&this.programFilterData.resultsFramework},get resultChainFilterLabel(){return this.programFilterData?this.programFilterData.resultChainFilterLabel:null},get groupBy(){return this.resultsFramework?this._groupBy:null},set groupBy(e){this._groupBy=parseInt(e)===Pe.e?Pe.e:Pe.d},get allLevels(){return(this.resultsFramework?this.groupBy===Pe.d?this.programFilterData.levelsInChainOrder:this.programFilterData.levelsInLevelOrder:[])||[]},get levels(){return this.allLevels},get _levelOptions(){var t=this.resultsFramework?[].concat(_t(this.getAllIndicators("levels").map(function(e){return e.levelPk})),_t(this._indicatorFilters.levels)):[];return this.levels.filter(function(e){return e.isResultChainLevel&&t.includes(e.pk)}).map(function(e){return{value:e.pk,label:e.resultChainLabel,category:"level"}})},get _tierOptions(){var t=this,r=this.resultsFramework?[].concat(_t(this.getAllIndicators("levels").filter(function(e){return e.levelPk}).map(function(e){return t.programFilterData.levels.get(e.levelPk).tierPk})),_t(this._indicatorFilters.tiers)):[];return this.programFilterData?(Array.from(this.programFilterData.tiers.values())||[]).filter(function(e){return r.includes(e.pk)}).map(function(e){return{value:e.pk,label:e.name,category:"tier"}}):[]},get _oldLevelOptions(){var t=this.resultsFramework?[]:[].concat(_t(this.getAllIndicators("levels").map(function(e){return e.levelPk})),_t(this._indicatorFilters.oldLevels));return this.programFilterData?(Array.from(this.programFilterData.oldLevels.values())||[]).filter(function(e){return t.includes(e.pk)}).map(function(e){return{value:e.pk,label:e.name,category:"oldLevel"}}):[Pe.a]},get levelTierOptions(){if(!this.programFilterData)return[Pe.a];if(this.programFilterData.resultsFramework){var e=[{label:"",options:this._tierOptions},{label:this.programFilterData.resultChainLabel,options:this._levelOptions}].filter(function(e){return e.options&&0<e.options.length});return e&&0<e.length?e:[Pe.a]}return this._oldLevelOptions&&0<this._oldLevelOptions.length?this._oldLevelOptions:[Pe.a]},get levelTierFilters(){var t=this;return[].concat(_t(this._tierOptions.filter(function(e){return t._indicatorFilters.tiers.includes(e.value)})),_t(this._levelOptions.filter(function(e){return t._indicatorFilters.levels.includes(e.value)})),_t(this._oldLevelOptions.filter(function(e){return t._indicatorFilters.oldLevels.includes(e.value)})))},set levelTierFilters(e){var t=void 0===e?{}:e,r=t.levels,n=void 0===r?[]:r,a=t.tiers,i=void 0===a?[]:a,o=t.oldLevels,l=void 0===o?[]:o;0<i.length&&0<n.length&&(0<this._indicatorFilters.levels.length?n=[]:i=[]),this._indicatorFilters.tiers=this.resultsFramework?i:[],this._indicatorFilters.levels=this.resultsFramework?n:[],this._indicatorFilters.oldLevels=this.resultsFramework?[]:l},get sectorOptions(){var t=[].concat(_t(new Set(this.getAllIndicators("sectors").filter(function(e){return e.sectorPk}).map(function(e){return e.sectorPk}))),_t(this._indicatorFilters.sectors));return this.programFilterData?Array.from(this.programFilterData.sectors.values()).filter(function(e){return t.includes(e.pk)}).map(function(e){return{value:e.pk,label:e.name}}):[Pe.a]},get sectorFilters(){var t=this;return this.sectorOptions.filter(function(e){return t._indicatorFilters.sectors.includes(e.value)})},set sectorFilters(e){void 0===e&&(e=[]),this._indicatorFilters.sectors=e.map(function(e){return parseInt(e)})},get siteOptions(){var t=[].concat(_t(new Set(this.getAllIndicators("sites").map(function(e){return Array.from(e._sitePks.values())}).reduce(function(e,t){return e.concat(t)},[]))),_t(this._indicatorFilters.sites));return this.programFilterData?Array.from(this.programFilterData.sites.values()).filter(function(e){return t.includes(e.pk)}).map(function(e){return{value:e.pk,label:e.name}}):[Pe.a]},get siteFilters(){var t=this;return this.siteOptions.filter(function(e){return t._indicatorFilters.sites.includes(e.value)})},set siteFilters(e){void 0===e&&(e=[]),this._indicatorFilters.sites=e.map(function(e){return parseInt(e)})},get disaggregationOptions(){var t=[].concat(_t(new Set(this.getAllIndicators("disaggregations").map(function(e){return Array.from(e._disaggregationPks.values())}).reduce(function(e,t){return e.concat(t)},[]))),_t(this._indicatorFilters.disaggregations));if(!this.programFilterData)return[Pe.a];var e=Array.from(this.programFilterData.disaggregations.values()).filter(function(e){return t.includes(e.pk)}).map(function(e){return{value:e.pk,label:e.name,country:e.country}}),r=_t(new Set(e.map(function(e){return e.country}))).filter(function(e){return null!==e}).sort(),n=[];return n.push({value:"hide-categories",label:gettext("Only show categories with results"),noList:!0}),0<e.filter(function(e){return null===e.country}).length&&n.push({label:gettext("Global disaggregations"),options:e.filter(function(e){return null===e.country})}),r.forEach(function(t){n.push({label:"".concat(t," ").concat(gettext("Disaggregations")),options:e.filter(function(e){return e.country===t})})}),n},get currentDisaggregations(){var t=this._indicatorFilters.disaggregations&&0<this._indicatorFilters.disaggregations.length?this._indicatorFilters.disaggregations:_t(new Set(this.getAllIndicators("disaggregations").map(function(e){return Array.from(e._disaggregationPks.values())}).reduce(function(e,t){return e.concat(t)},[])));return this.programFilterData?Array.from(this.programFilterData.disaggregations.values()).filter(function(e){return t.includes(e.pk)}).sort(function(e,t){return e.name>t.name?1:-1}).map(function(e){return e.pk}):[]},get disaggregationFilters(){var t=this,e=(e=[].concat.apply([],this.disaggregationOptions.slice(1).map(function(e){return e.options}))).filter(function(e){return e&&e.value&&t._indicatorFilters.disaggregations.includes(e.value)});return this._hiddenCategories&&(e=[this.disaggregationOptions[0]].concat(_t(e))),e},set disaggregationFilters(e){void 0===e&&(e=[]),this._indicatorFilters.disaggregations=e.filter(function(e){return"hide-categories"!=e&&"NaN"!=e&&!isNaN(parseInt(e))}).map(function(e){return parseInt(e)}),this._hiddenCategories=e.includes("hide-categories")},get indicatorTypeOptions(){var t=[].concat(_t(new Set(this.getAllIndicators("types").map(function(e){return Array.from(e._typePks.values())}).reduce(function(e,t){return e.concat(t)},[]))),_t(this._indicatorFilters.indicatorTypes));return this.programFilterData?Array.from(this.programFilterData.indicatorTypes.values()).filter(function(e){return t.includes(e.pk)}).map(function(e){return{value:e.pk,label:e.name}}):[Pe.a]},get indicatorTypeFilters(){var t=this;return this.indicatorTypeOptions.filter(function(e){return t._indicatorFilters.indicatorTypes.includes(e.value)})},set indicatorTypeFilters(e){void 0===e&&(e=[]),this._indicatorFilters.indicatorTypes=e.map(function(e){return parseInt(e)})},_filterFrequency:function(e){var t=this;return e=e||[],this.isTVA&&(e=e.filter(function(e){return e.frequency==t.selectedFrequency})),e},_filterLevelTiers:function(e){var r=this;return e=e||[],this.resultsFramework&&this._indicatorFilters.tiers&&0<this._indicatorFilters.tiers.length&&(e=e.filter(function(t){return t.levelPk&&r._indicatorFilters.tiers.some(function(e){return r.programFilterData.levels.get(t.levelPk).showForTier(e)})})),this.resultsFramework&&this._indicatorFilters.levels&&0<this._indicatorFilters.levels.length&&(e=e.filter(function(t){return t.levelPk&&r._indicatorFilters.levels.some(function(e){return r.programFilterData.levels.get(t.levelPk).showForChain(e)})})),!this.resultsFramework&&this._indicatorFilters.oldLevels&&0<this._indicatorFilters.oldLevels.length&&(e=e.filter(function(e){return e.levelPk&&r._indicatorFilters.oldLevels.includes(e.levelPk)})),e},_filterSites:function(e){var r=this;return this._indicatorFilters.sites&&0<this._indicatorFilters.sites.length&&(e=e.filter(function(t){return r._indicatorFilters.sites.some(function(e){return t.hasSite(e)})})),e},_filterDisaggregations:function(e){var r=this;return this._indicatorFilters.disaggregations&&0<this._indicatorFilters.disaggregations.length&&(e=e.filter(function(t){return r._indicatorFilters.disaggregations.some(function(e){return t.hasDisaggregation(e)})})),e},_filterIndicatorTypes:function(e){var r=this;return this._indicatorFilters.indicatorTypes&&0<this._indicatorFilters.indicatorTypes.length&&(e=e.filter(function(t){return r._indicatorFilters.indicatorTypes.some(function(e){return t.hasIndicatorType(e)})})),e},_filterSectors:function(e){var t=this;return this._indicatorFilters.sectors&&0<this._indicatorFilters.sectors.length&&(e=e.filter(function(e){return e.sectorPk&&t._indicatorFilters.sectors.includes(e.sectorPk)})),e},_filterIndicatorFilter:function(e){var t=this;return e=e||[],this._indicatorFilters.indicators&&0<this._indicatorFilters.indicators.length&&(e=e.filter(function(e){return t._indicatorFilters.indicators.includes(e.pk)})),e},filterIndicators:function(e,t){var r=1<arguments.length&&void 0!==t&&t;return e=e||[],e=this._filterFrequency(e),"levels"!=r&&(e=this._filterLevelTiers(e)),"disaggregations"!=r&&(e=this._filterDisaggregations(e)),"sites"!=r&&(e=this._filterSites(e)),"types"!=r&&(e=this._filterIndicatorTypes(e)),"sectors"!=r&&(e=this._filterSectors(e)),"indicators"!=r&&(e=this._filterIndicatorFilter(e)),e},getUnassignedIndicators:function(e){var t=0<arguments.length&&void 0!==e&&e;return this.filterIndicators(this.programFilterData.unassignedIndicators,t)},getLevelIndicators:function(e,t){var r=this,n=1<arguments.length&&void 0!==t&&t;return this.filterIndicators((this.programFilterData.levelIndicators.get(e)||[]).map(function(e){return r.programFilterData.indicators.get(e)}),n)||[]},getAllIndicators:function(e){var t=0<arguments.length&&void 0!==e&&e;if(this.programFilterData){var r=this.groupBy===Pe.d?this.programFilterData.indicatorsInChainOrder:this.programFilterData.indicatorsInLevelOrder;return this.filterIndicators(r,t)}return[]},getLevelIndicatorGroups:function(e){var r=this,n=0<arguments.length&&void 0!==e&&e;return this.resultsFramework?[].concat(_t(this.levels.map(function(e){return{level:e,indicators:r.getLevelIndicators(e.pk,n)}})),[{level:null,indicators:this.getUnassignedIndicators(n)}]):(Array.from(this.programFilterData.oldLevels.values())||[]).map(function(t){return{level:t,indicators:r.getAllIndicators(n).filter(function(e){return e.levelPk==t.pk})}})},get indicatorOptions(){if(this.programFilterData){var e=this.getLevelIndicatorGroups("indicators");return 0===(e=(e=this.resultsFramework?e.map(function(e){return{label:e.level?e.level.tierNumber:gettext("Indicators unassigned to  a results framework level"),options:e.indicators.map(function(e){return{value:e.pk,label:e.name}})}}):e.map(function(e){return{label:e.level.name,options:e.indicators.map(function(e){return{value:e.pk,label:e.name}})}})).filter(function(e){return e.options&&0<e.options.length})).length?[Pe.a]:1===e.length?e[0].options:e}return[Pe.a]},get indicatorFilters(){var t=this,e=this.indicatorOptions;return e&&0!=e.length?(e[0].options&&0<e[0].options.length&&(e=e.reduce(function(e,t){return[].concat(_t(e),_t(t.options))},[])),e.filter(function(e){return t._indicatorFilters.indicators.includes(e.value)})):[]},set indicatorFilters(e){void 0===e&&(e=[]),this._indicatorFilters.indicators=e.map(function(e){return parseInt(e)})},clearFilters:function(){this._indicatorFilters={levels:[],tiers:[],oldLevels:[],disaggregations:[],sectors:[],sites:[],indicatorTypes:[],indicators:[]},this._hiddenCategories=!1},get filtersActive(){return 0<Object.values(this._indicatorFilters).reduce(function(e,t){return e+t.length},0)||this._hiddenCategories},get hideColumnOptions(){return[{label:gettext("Unit of measure"),value:0},{label:gettext("Change"),value:1},{label:gettext("C / NC"),value:2},{label:"# / %",value:3},{label:gettext("Baseline"),value:4}]},get hiddenColumns(){var t=this;return this.hideColumnOptions.filter(function(e){return t._hiddenColumns.includes(e.value)})},set hiddenColumns(e){void 0===e&&(e=[]),this._hiddenColumns=e.map(function(e){return parseInt(e)})},get pathParams(){var t={tva:this.isTVA,programId:this.selectedProgramId,frequency:this.selectedFrequency,start:this.startPeriodValue,end:this.endPeriodValue,mr:this._mostRecentForce?1:null,groupby:this.groupBy,levels:(this.resultsFramework?this.levelTierFilters.filter(function(e){return"level"==e.category}):this.levelTierFilters.filter(function(e){return"oldLevel"==e.category})).map(function(e){return e.value}),tiers:this.resultsFramework?this.levelTierFilters.filter(function(e){return"tier"==e.category}).map(function(e){return e.value}):null,sectors:this.sectorFilters.map(function(e){return e.value}),sites:this.siteFilters.map(function(e){return e.value}),types:this.indicatorTypeFilters.map(function(e){return e.value}),indicators:this.indicatorFilters.map(function(e){return e.value}),disaggregations:this.disaggregationFilters.map(function(e){return e.value}),columns:this.hiddenColumns.map(function(e){return e.value})};return Object.keys(t).forEach(function(e){return null===t[e]&&delete t[e]}),t},updateParams:function(e){e.programId&&this._router.updateParams(e)},get queryString(){var e=this.pathParams,t=(e.tva,e.programId,yt(e,["tva","programId"]));return Object.entries(t).filter(function(e){var t=Ot(e,2),r=(t[0],t[1]);return(0===r||r)&&(!Array.isArray(r)||0<r.length)}).map(function(e){var t=Ot(e,2),r=t[0],n=t[1];return Array.isArray(n)?n.map(function(e){return"".concat(r,"=").concat(e)}).join("&"):"".concat(r,"=").concat(n)}).reduce(function(e,t){return e.concat(t)},[]).join("&")},get excelUrl(){return!!this.selectedFrequency&&this._router.getExcelUrl(this.pathParams)},get fullExcelUrl(){return!!this.selectedProgramId&&this._router.getFullExcelUrl(this.pathParams)}});return n._reportType=n._router.isTVA?Pe.l:Pe.i,n._selectedProgramId=n._router.programId,n._selectedFrequency=n._router.frequency,n._router.timeframe?n.setTimeframe(n._router.timeframe):(n.startPeriodValue=n._router.start,n.endPeriodValue=n._router.end),n._mostRecentForce=n._router.mr,n.groupBy=n._router.groupBy,n.sectorFilters=n._router.sectors,n.siteFilters=n._router.sites,n.disaggregationFilters=n._router.disaggregations,n.indicatorTypeFilters=n._router.types,n.indicatorFilters=n._router.indicators,n._hiddenColumns=n._router.columns,n._hiddenCategories=n._router.hiddenCategories,n.levelTierFilters={levels:n._router.levels,tiers:n._router.tiers,oldLevels:n._router.levels},Object(Xe.o)(function(){return n.pathParams},function(e){return n.updateParams(e)},{fireImmediately:!0}),n}function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r}(e,t)||kt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(e,t){if(e){if("string"==typeof e)return wt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wt(e,t):void 0}}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function It(e){var t=0<arguments.length&&void 0!==e?e:{},r=t.target,n=void 0===r?null:r,a=t.actual,i=void 0===a?null:a,o=t.met,l=void 0===o?null:o,s=t.disaggregations,c=void 0===s?{}:s;return{target:n,actual:i,met:l,disaggregations:new Map(Object.entries(c).map(function(e){var t=Ft(e,2),r=t[0],n=t[1];return[parseInt(r),{actual:n.actual}]}))}}var jt=function(e,t){var r=1<arguments.length&&void 0!==t?t:{};return Object(Xe.n)({pk:parseInt(r.pk),frequency:parseInt(e),_lopPeriod:It(r.lop_period),get lopTarget(){return this._lopPeriod.target},get lopActual(){return this._lopPeriod.actual},get lopMet(){return this._lopPeriod.met},_reportData:Object(Xe.n)(new Map((r.periods||[]).map(function(e){return[parseInt(e.count),It(e)]}))),get periodValues(){return Array.from(this._reportData.values())},_disaggregatedData:Object(Xe.n)(new Map(Object.entries(r.disaggregated_data||{}).map(function(e){var t=Ft(e,2),r=t[0],n=t[1];return[parseInt(r),n]}))),disaggregatedLop:function(e){return!isNaN(parseInt(e))&&this._lopPeriod.disaggregations.has(parseInt(e))?this._lopPeriod.disaggregations.get(parseInt(e)).actual:null},disaggregatedPeriodValues:function(t){return isNaN(parseInt(t))?[]:this.periodValues.map(function(e){return e.disaggregations.get(parseInt(t))})}})};function Nt(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),i=0;i<a.length;i++)r=a[i],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function xt(e){return function(e){if(Array.isArray(e))return Ct(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ct(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ct(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function At(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rt(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),i=0;i<a.length;i++)r=a[i],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}var Tt=new function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=Object(Xe.n)({_filterStore:Et(e),get filterStore(){return this._filterStore},_reportStore:function(){var t,r,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=Object(Xe.n)({_reportMap:Xe.n.map([].concat(xt(Pe.k),xt(Pe.f)).sort().map(function(e){return[e,Xe.n.map()]})),getReport:function(e){return this._reportMap.get(e)},programStatus:Xe.n.map([].concat(xt(Pe.k),xt(Pe.f)).sort().map(function(e){return[e,Xe.n.map()]})),callForReportData:function(e){var t=this,r=e.update,n=Nt(e,["update"]),a=parseInt(n.programPk),i=parseInt(n.frequency);return 1!==this.programStatus.get(i).get(a)&&(r||2!==this.programStatus.get(i).get(a))?(this.programStatus.get(i).set(a,1),bt.a.getIPTTReportData(n).then(function(e){Object(Xe.p)(function(){t.updateReportData(e)})})):Promise.resolve(!1)},updateReportData:function(e){var r=this,n=parseInt(e.report_frequency);return(e.report_data||[]).forEach(function(e){var t=jt(n,e);r._reportMap.get(n).set(t.pk,t)}),this.programStatus.get(n).set(parseInt(e.program_pk),2),e}});return e&&e.report_data&&(t=parseInt(e.report_frequency),r=n.getReport(t),(e.report_data||[]).map(function(e){return jt(t,e)}).forEach(function(e){return r.set(e.pk,e)}),n.programStatus.get(t).set(parseInt(e.program_pk),2)),n}(e.report||{}),_expandoRows:[],expandAllRows:function(){this._expandoRows.forEach(function(e){e.expandRow()})},get allExpanded(){return this._expandoRows.every(function(e){return e.state.expanded})},get allCollapsed(){return this._expandoRows.every(function(e){return!e.state.expanded})},collapseAllRows:function(){this._expandoRows.forEach(function(e){e.collapseRow()})},get reportStore(){return this._reportStore},get currentReport(){return this.reportStore.getReport(this.filterStore.selectedFrequency)},loadReportData:function(e){var t=(0<arguments.length&&void 0!==e?e:{}).update,r=void 0!==t&&t;return this.reportStore.callForReportData({programPk:this.filterStore.selectedProgramId,frequency:this.filterStore.selectedFrequency,reportType:this.filterStore.isTVA?Pe.l:Pe.i,update:r})},get pinParams(){return{program:this.filterStore.selectedProgramId,report_type:this.filterStore.isTVA?"targetperiods":"timeperiods",query_string:this.filterStore.queryString}},get pinAPI(){return{programPageUrl:bt.a.getProgramPageUrl(this.filterStore.selectedProgramId),pinReady:!0,pinParams:this.pinParams,savePin:function(e){return bt.a.savePinnedReport(e)}}},get excelAPI(){return{excelUrl:this.filterStore.excelUrl,fullExcelUrl:this.filterStore.fullExcelUrl}},get currentProgram(){return this.filterStore.programFilterData},get currentProgramPageUrl(){return this.currentProgram?bt.a.getProgramPageUrl(this.currentProgram.pk):null},get isTVA(){return this.filterStore.isTVA},get resultsFramework(){return this.filterStore.resultsFramework},get levelRows(){var t=this;return!!(this.filterStore.resultsFramework&&0<this.filterStore.allLevels.length)&&this.filterStore.getLevelIndicatorGroups().filter(function(e){return 0<e.indicators.length||!t.filterStore.filtersActive&&null!==e.level&&1===e.level.tierDepth})},get indicatorRows(){return this.filterStore.getAllIndicators()},get reportPeriods(){return this.currentProgram&&this.filterStore.selectedFrequency&&1!==this.filterStore.selectedFrequency?2==this.filterStore.selectedFrequency?this.currentProgram.periodRanges.get(this.filterStore.selectedFrequency).periods:this.currentProgram.periodRanges.get(this.filterStore.selectedFrequency).periods.slice(this.filterStore.startPeriodValue,this.filterStore.endPeriodValue+1):[]},getReportData:function(e){return this.currentReport&&this.currentReport.has(parseInt(e))?this.currentReport.get(parseInt(e)):{}},periodValues:function(e){var t=this.currentReport.has(parseInt(e))?2==this.filterStore.selectedFrequency?this.currentReport.get(parseInt(e)).periodValues:this.currentReport.get(parseInt(e)).periodValues.slice(this.filterStore.startPeriodValue,this.filterStore.endPeriodValue+1):[];return t&&!this.isTVA&&(t=t.map(function(e){return e.actual})),t},disaggregatedLop:function(e,t){return this.currentReport.has(parseInt(e))?this.currentReport.get(parseInt(e)).disaggregatedLop(parseInt(t)):null},disaggregatedPeriodValues:function(e,t){var r=this.currentReport.has(parseInt(e))?this.currentReport.get(parseInt(e)).disaggregatedPeriodValues(parseInt(t)):null;return r&&2!=this.filterStore.selectedFrequency&&(r=r.slice(this.filterStore.startPeriodValue,this.filterStore.endPeriodValue+1)),r&&!this.isTVA&&(r=r.map(function(e){return e.actual})),r||[]},get hiddenCategories(){return!0===this.filterStore._hiddenCategories},get baseColumns(){return 8+(this.filterStore.resultsFramework?0:1)-this.filterStore._hiddenColumns.length},get reportColumnWidth(){return this.baseColumns+(!this.resultsFramework&&1)+3+this.reportPeriods.length*(this.isTVA?3:1)},get activeDisaggregationPks(){return this.filterStore.currentDisaggregations},indicatorHasActiveDisaggregations:function(t){var r=this;return!!t.hasDisaggregations(this.activeDisaggregationPks)&&(!this.hiddenCategories||0<this.activeDisaggregationPks.map(function(e){return r.getDisaggregationLabels(e).labels||[]}).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return r.disaggregatedLop(t.pk,e.pk)}).length)},getDisaggregationLabels:function(e){return!(!this.currentProgram||!this.currentProgram.disaggregations.has(e))&&this.currentProgram.disaggregations.get(e)},get hasUOMColumn(){return!this.filterStore._hiddenColumns.includes(0)},get hasChangeColumn(){return!this.filterStore._hiddenColumns.includes(1)},get hasCNCColumn(){return!this.filterStore._hiddenColumns.includes(2)},get hasUOMTypeColumn(){return!this.filterStore._hiddenColumns.includes(3)},get hasBaselineColumn(){return!this.filterStore._hiddenColumns.includes(4)},loadResultsModal:function(e){bt.a.indicatorResultsTable(e,!1).then(function(e){$("#modalmessages").empty();var t=$("#indicator_modal_content");t.empty().html(e),$("#indicator_modal_div").modal("show"),t.find('[data-toggle="popover"]').popover({html:!0,placement:"right",container:t,template:'<div class="popover" style="width: 325px;" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'})})},indicatorUpdate:function(e,t){var r=this;t.indicatorId,Rt(t,["indicatorId"]);return this.filterStore.updateProgramFilterData().then(function(){r.loadReportData({update:!0})})},indicatorDelete:function(e,t){var r=t.indicatorId;Rt(t,["indicatorId"]);this.filterStore.programFilterData.deleteIndicator(r)}});Object(Xe.o)(function(){return[a.filterStore.selectedProgramId,a.filterStore.selectedFrequency]},function(e){var t=At(e,2),r=t[0],n=t[1];r&&n&&a.loadReportData()},{fireImmediately:!0});return a}(reactContext);o.a.render(c.a.createElement(l.a,{rootStore:Tt,filterStore:Tt.filterStore,reportStore:Tt.reportStore},c.a.createElement(Me,null)),document.querySelector("#id_div_content"))},v38i:function(e,t,r){"use strict";var n;r.d(t,"a",function(){return a}),r.d(t,"b",function(){return o}),r.d(t,"c",function(){return i}),r.d(t,"l",function(){return l}),r.d(t,"i",function(){return s}),r.d(t,"k",function(){return c}),r.d(t,"f",function(){return u}),r.d(t,"m",function(){return p}),r.d(t,"j",function(){return d}),r.d(t,"d",function(){return f}),r.d(t,"e",function(){return m}),r.d(t,"g",function(){return h}),r.d(t,"h",function(){return v});var a={value:null,label:"---------"},i="—",o=i,l=1,s=2,c=[3,4,5,6,7],u=[1,2],p=Object.freeze({1:gettext("Life of Program (LoP) only"),2:gettext("Midline and endline"),3:gettext("Annual"),4:gettext("Semi-annual"),5:gettext("Tri-annual"),6:gettext("Quarterly"),7:gettext("Monthly")}),d=Object.freeze({3:gettext("Years"),4:gettext("Semi-annual periods"),5:gettext("Tri-annual periods"),6:gettext("Quarters"),7:gettext("Months")}),f=1,m=2;var g,h=Object.freeze({noFilter:0,missingTarget:1,missingResults:2,missingEvidence:3,aboveTarget:5,belowTarget:6,onTarget:7,nonReporting:8}),v=null!==(g="reason_for_change_options",n="undefined"!=typeof JS_GLOBALS&&JS_GLOBALS.hasOwnProperty(g)?JS_GLOBALS[g]:null)&&void 0!==n?n:[]}},[["mYfJ",0,1]]]);