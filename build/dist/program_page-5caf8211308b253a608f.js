(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"1d5Q":function(e,t,r){"use strict";r.d(t,"a",function(){return c}),r.d(t,"d",function(){return s}),r.d(t,"b",function(){return u}),r.d(t,"c",function(){return d});var i=r("2vnA"),n=r("5/4V");function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l="undefined"!=typeof gettext?gettext:function(e){return e},c=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return[function(e){var t=0<arguments.length&&void 0!==e?e:{};return{pk:parseInt(t.pk),name:t.name,resultsFramework:Boolean(t.results_framework),_resultChainFilterLabel:t.by_result_chain||l("by Outcome chain"),get resultChainFilterLabel(){return this.resultsFramework?this._resultChainFilterLabel:null}}}].concat(t).reduce(function(e,t){return Object(i.i)(e,t(r))},{})}},s=function(e){var t=0<arguments.length&&void 0!==e?e:{};return{reportingPeriodStart:new Date(t.reporting_period_start_iso),reportingPeriodEnd:new Date(t.reporting_period_end_iso)}},u=function(e){var t=0<arguments.length&&void 0!==e?e:{};return{_indicatorsLevelOrder:Object(i.n)(t.indicator_pks_level_order||[]),_indicatorsChainOrder:Object(i.n)(t.indicator_pks_chain_order||[]),_applyOrderUpdate:function(e){var a=this;Object(i.p)(function(){return a._indicatorsLevelOrder=e.indicator_pks_level_order||[],a._indicatorsChainOrder=e.indicator_pks_chain_order||[],Object.entries(e.indicators||{}).forEach(function(e){var t=o(e,2),r=t[0],n=t[1];!isNaN(parseInt(r))&&a.indicators.has(parseInt(r))&&a.indicators.get(parseInt(r)).updateData(n)}),e})},updateOrder:function(){return n.a.programLevelOrdering(this.pk).then(this._applyOrderUpdate.bind(this))},get indicatorsInLevelOrder(){var t=this;return this._indicatorsLevelOrder.map(function(e){return t.indicators.get(e)})},get indicatorsInChainOrder(){var t=this;return this.hasOwnProperty("resultsFramework")&&!1===this.resultsFramework?this.indicatorsInLevelOrder:this._indicatorsChainOrder.map(function(e){return t.indicators.get(e)})}}},d=function(e){var t=0<arguments.length&&void 0!==e?e:{};return{_levelsLevelOrder:Object(i.n)(t.level_pks_level_order||[]),_levelsChainOrder:Object(i.n)(t.level_pks_chain_order||[]),_unassignedIndicators:Object(i.n)(t.unassigned_indicator_pks||[]),levelIndicators:Object(i.n)(new Map((t.indicator_pks_for_level||[]).map(function(e){return[e.pk,e.indicator_pks]}))),updateOrder:function(){var t=this;return n.a.rfLevelOrdering(this.pk).then(function(e){Object(i.p)(function(){return t._levelsLevelOrder=e.level_pks_level_order||[],t._levelsChainOrder=e.level_pks_chain_order||[],t._unassignedIndicators=e.unassigned_indicator_pks||[],t._updateLevelIndicatorsOrder(e.indicator_pks_for_level),!0})})},get levelsInLevelOrder(){var t=this;return this._levelsLevelOrder.map(function(e){return t.levels.get(e)})||[]},get levelsInChainOrder(){var t=this;return this.hasOwnProperty("resultsFramework")&&!1===this.resultsFramework?this.levelsInLevelOrder:this._levelsChainOrder.map(function(e){return t.levels.get(e)})||[]},get unassignedIndicators(){var t=this;return this._unassignedIndicators.map(function(e){return t.indicators.get(e)})||[]},get indicatorsInLevelOrder(){var t=this;return this.resultsFramework?Array.prototype.concat.apply([],this.levelsInLevelOrder.map(function(e){return t.levelIndicators.get(e.pk).filter(function(e){return t.indicators.has(e)}).map(function(e){return t.indicators.get(e)})})).concat(this.unassignedIndicators):this.unassignedIndicators},get indicatorsInChainOrder(){var t=this;return this.resultsFramework?Array.prototype.concat.apply([],this.levelsInChainOrder.map(function(e){return t.levelIndicators.get(e.pk).filter(function(e){return t.indicators.has(e)}).map(function(e){return t.indicators.get(e)})})).concat(this.unassignedIndicators):this.unassignedIndicators},_updateLevelIndicatorsOrder:function(e){var n=this,t=0<arguments.length&&void 0!==e?e:[];Object(i.p)(function(){n.levelIndicators.clear(),t.forEach(function(e){var t=e.pk,r=e.indicator_pks;n.levelIndicators.set(t,r)})})}}}},"5/4V":function(e,t,r){"use strict";var n=r("vDqi"),a=r.n(n),i=r("Qyje"),o=r.n(i),l={apiInstance:a.a.create({withCredentials:!0,baseURL:"/indicators/api/",responseType:"json",headers:{"X-CSRFToken":document.cookie.replace(/(?:(?:^|.*;\s*)csrftoken\s*\=\s*([^;]*).*$)|^.*$/,"$1")}}),documentInstance:a.a.create({withCredentials:!0,baseURL:"/indicators/api/",responseType:"document",headers:{"X-CSRFToken":document.cookie.replace(/(?:(?:^|.*;\s*)csrftoken\s*\=\s*([^;]*).*$)|^.*$/,"$1")},transformResponse:[function(e){return(new XMLSerializer).serializeToString(e)}]}),formPostInstance:a.a.create({withCredentials:!0,baseURL:"/indicators/api/",responseType:"json",headers:{"X-CSRFToken":document.cookie.replace(/(?:(?:^|.*;\s*)csrftoken\s*\=\s*([^;]*).*$)|^.*$/,"$1"),"content-type":"application/x-www-form-urlencoded"}}),logFailure:function(){},getProgramPageUrl:function(e){return!isNaN(parseInt(e))&&"/program/".concat(e,"/")},programLevelOrdering:function(e){return this.apiInstance.get("/program/ordering/".concat(e,"/")).then(function(e){return e.data}).catch(this.logFailure)},rfLevelOrdering:function(e){return this.apiInstance.get("/program/level_ordering/".concat(e,"/")).then(function(e){return e.data}).catch(this.logFailure)},indicatorResultsTable:function(e,t){return this.documentInstance.get("/result_table/".concat(e,"/"),{params:{raw:!0,edit:t}}).then(function(e){return e.data}).catch(this.logFailure)},updateProgramPageIndicator:function(e){return this.apiInstance.get("/program_page/indicator/".concat(e,"/")).then(function(e){return e.data}).catch(this.logFailure)},updateAllProgramPageIndicators:function(e){return this.apiInstance.get("/program_page/".concat(e,"/")).then(function(e){return e.data}).catch(this.logFailure)},ipttFilterData:function(e){return this.apiInstance.get("/iptt/".concat(e,"/filter_data/")).then(function(e){return e.data}).catch(this.logFailure)},getIPTTReportData:function(e){var t=0<arguments.length&&void 0!==e?e:{},r=t.programPk,n=t.frequency,a=t.reportType;return this.apiInstance.get("/iptt/".concat(r,"/report_data/"),{params:{frequency:n,report_type:a}}).then(function(e){return e.data}).catch(this.logFailure)},savePinnedReport:function(e){return this.formPostInstance.post("/pinned_report/",o.a.stringify(e)).catch(this.logFailure)},updateIPTTIndicator:function(e){return this.apiInstance.get("/iptt/indicator/".concat(e,"/")).then(function(e){return e.data}).catch(this.logFailure)}};t.a=l},LBcr:function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"b",function(){return l});var n=window.userLang,a="numeric",i={year:a,month:"short",day:a};function o(e){return new Date(e)}function l(e){return new Intl.DateTimeFormat(n,i).format(e)}},"My+N":function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"b",function(){return l});var n=r("2vnA"),a=r("NHe6"),i=r("v38i"),o=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(r){return[function(e){var t=0<arguments.length&&void 0!==e?e:{};return{pk:parseInt(t.pk),name:t.name,levelPk:!isNaN(parseInt(t.level_pk))&&parseInt(t.level_pk),oldLevelDisplay:t.old_level_name||!1,meansOfVerification:t.means_of_verification||!1}}].concat(t).reduce(function(e,t){return Object(n.i)(e,t(r))},{})}},l=function(e){var t=0<arguments.length&&void 0!==e?e:{};return{_formatDecimal:a.a,frequency:parseInt(t.target_frequency),get timeAware(){return i.k.includes(this.frequency)},unitOfMeasure:t.unit_of_measure||!1,isPercent:Boolean(t.is_percent),isCumulative:Boolean(t.is_cumulative),directionOfChange:t.direction_of_change||!1,baseline:t.baseline||null,_lopTarget:t.lop_target||null,_lopActual:t.lop_actual||null,_lopMet:t.lop_met||null,_lopTargetProgress:t.lop_target_progress||null,_lopActualProgress:t.lop_actual_progress||null,_lopMetProgress:t.lop_met_progress||null,get lopTarget(){return this._formatDecimal(this._lopTarget)},get lopActual(){return this._formatDecimal(this._lopActual)},get lopMet(){return this._formatDecimal(this._lopMet)},get lopTargetProgress(){return this._formatDecimal(this._lopTargetProgress)},get lopActualProgress(){return this._formatDecimal(this._lopActualProgress)},get lopMetProgress(){return this._formatDecimal(this._lopMetProgress)}}}},NHe6:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function(e){return!isNaN(parseFloat(e))&&(e=parseFloat(e),Number.isInteger(e)?parseInt(e):e)}},"WtQ/":function(e,t,r){"use strict";r.d(t,"c",function(){return n}),r.d(t,"a",function(){return a}),r.d(t,"b",function(){return i}),r.d(t,"d",function(){return o});function n(){$(function(){var e=0===window.performance.getEntriesByType("navigation")[0].transferSize,t="reload"===window.performance.getEntriesByType("navigation")[0].type;e&&!t&&window.location.reload()})}var a=function(e){if(null==e||isNaN(parseFloat(e)))return null;var t,r=e.toString(),n=null;switch(e.toString().includes(",")?(r=e.toString().split(",")[0],n=1<e.toString().split(",").length?e.toString().split(",")[1]:null):e.toString().includes(".")&&(r=e.toString().split(".")[0],n=1<e.toString().split(".").length?e.toString().split(".")[1]:null),n=n&&0<n.length?n:null,window.userLang){case"es":t=r.replace(/\B(?=(\d{3})+(?!\d))/g,"."),n&&(t+=",".concat(n));break;case"fr":t=r.replace(/\B(?=(\d{3})+(?!\d))/g,String.fromCharCode(160)),n&&(t+=",".concat(n));break;case"en":default:t=r.replace(/\B(?=(\d{3})+(?!\d))/g,","),n&&(t+=".".concat(n))}return t},i=function(e){if(null==e||isNaN(parseFloat(e)))return null;var t=a(Math.round(1e4*e)/100);return null===t?null:"".concat(t,"%")},o=function(e,t){var r=1<arguments.length&&void 0!==t?t:"label";return e.sort(function(e,t){return e[r].toUpperCase()>t[r].toUpperCase()?1:-1})}},aJgA:function(e,t,r){"use strict";r.r(t);var i=r("q1tI"),O=r.n(i),n=r("i8i4"),a=r.n(n),o=r("qtBC"),l=r("wgi2"),c=r("0pHI"),s=r("TSYQ"),k=r.n(s),u=r("okNM"),d=r("hzyr"),p=r("IP2g"),g=r("wHSu"),m=r("WtQ/"),w=r("v38i");function f(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),i=0;i<a.length;i++)r=a[i],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),e}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(i){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=N(i);return t=o?(e=N(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==h(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e){var t=e.result,r=e.noTarget,n=(f(e,["result","noTarget"]),Object(i.useContext)(D)),a=r?" bg-danger-lighter":"";return O.a.createElement(O.a.Fragment,null,O.a.createElement("td",{className:"results__result--date ".concat(a)},O.a.createElement("a",{href:"/indicators/result_update/".concat(t.pk,"/"),className:"results__link"},t.dateCollected)),O.a.createElement("td",{className:"results__result--value ".concat(a)},n(t.achieved)),O.a.createElement("td",{className:"td--stretch results__result--url"},t.evidenceUrl&&O.a.createElement("a",{href:t.evidenceUrl,target:"_blank"},t.recordName||t.evidenceUrl)))}function S(e){var r=e.target,n=e.indicator,t=(f(e,["target","indicator"]),Object(i.useContext)(D)),a=r.results.length||1;return O.a.createElement(O.a.Fragment,null,O.a.createElement("tr",{className:n.timeAware&&r.completed?"results__row--main pt-ended":"results__row--main"},O.a.createElement("td",{rowSpan:a,className:"results__row__target-period"},O.a.createElement("div",null,O.a.createElement("strong",{className:"text-uppercase"},r.periodName)),r.dateRange&&O.a.createElement("div",{className:"text-nowrap"},O.a.createElement("small",null,r.dateRange))),O.a.createElement("td",{rowSpan:a,className:"text-right"},t(r.target)||w.c),O.a.createElement("td",{rowSpan:a,className:"text-right"},t(r.actual)||w.c),O.a.createElement("td",{rowSpan:a,className:"text-right td--pad"},r.percentMet&&r.completed?O.a.createElement(M,{val:r.percentMet}):O.a.createElement("span",{className:"badge"},Object(m.b)(r.percentMet)||A)),r.results&&0<r.results.length?O.a.createElement(x,{result:r.results[0],noTarget:!1}):O.a.createElement(O.a.Fragment,null,O.a.createElement("td",{className:"results__result--nodata",colSpan:"2"},gettext("No results reported")),O.a.createElement("td",null))),1<r.results.length&&r.results.slice(1).map(function(e,t){return O.a.createElement("tr",{key:t,className:n.timeAware&&r.completed?"results__row--supplemental pt-ended":"results__row--supplemental"},O.a.createElement(x,{result:e,noTarget:!1}))}),r.mostRecentlyCompleted&&O.a.createElement("tr",{className:"results__row--subtotal"},O.a.createElement("td",null,O.a.createElement("div",null,O.a.createElement("em",null,O.a.createElement("strong",null,gettext("Program to date")))),O.a.createElement("div",{className:"text-nowrap"},O.a.createElement("small",null,n.reportingPeriod))),O.a.createElement("td",{className:"text-right"},O.a.createElement("strong",null,t(n.lopTargetProgress)||w.c)),O.a.createElement("td",{className:"text-right"},O.a.createElement("strong",null,t(n.lopActualProgress)||w.c)),O.a.createElement("td",{className:"text-right"},n.lopMetProgress?O.a.createElement(M,{val:n.lopMetProgress}):O.a.createElement("span",{className:"badge"},A)),O.a.createElement("td",{colSpan:"3",className:"bg-medium"})))}function T(e){var t=e.result;return f(e,["result"]),O.a.createElement("tr",null,O.a.createElement("td",null),O.a.createElement("td",null),O.a.createElement("td",null),O.a.createElement("td",null),O.a.createElement(x,{result:t,noTarget:!0}))}function j(e){var t=e.indicator,r=(f(e,["indicator"]),Object(i.useContext)(D)),n=t.noTargets?"":t.isPercent||t.isCumulative?gettext("Results are cumulative. The Life of Program result mirrors the latest period result."):gettext("Results are non-cumulative. The Life of Program result is the sum of target period results.");return O.a.createElement("tr",{className:"bg-white"},O.a.createElement("td",null,O.a.createElement("strong",null,gettext("Life of Program"))),O.a.createElement("td",{className:"text-right"},O.a.createElement("strong",null,r(t.lopTarget)||w.c)),O.a.createElement("td",{className:"text-right"},O.a.createElement("strong",null,r(t.lopActual)||w.c)),O.a.createElement("td",{className:"text-right"},O.a.createElement("span",{className:"badge"},Object(m.b)(t.lopMet)||A)),O.a.createElement("td",{colSpan:"3"},O.a.createElement("div",{className:"help-text"},n)))}function C(e){var r=e.indicator;return e.editable,f(e,["indicator","editable"]),O.a.createElement(D.Provider,{value:function(e){var t=Object(m.a)(e);return t&&r.isPercent?"".concat(t,"%"):t}},O.a.createElement("table",{className:"table results-table"},O.a.createElement("thead",null,O.a.createElement("tr",{className:"table-header"},O.a.createElement("th",null,gettext("Target period")),O.a.createElement("th",{className:"text-right"},gettext("Target")),O.a.createElement("th",{className:"text-right"},pgettext("table (short) header","Actual")),O.a.createElement("th",{className:"td--pad text-right"},gettext("% Met")),O.a.createElement("th",{colSpan:"2"},gettext("Results")),O.a.createElement("th",{className:"td--stretch"},gettext("Evidence")))),O.a.createElement("tbody",null,r.periodicTargets.map(function(e,t){return O.a.createElement(S,{key:"targetrow-".concat(t),target:e,indicator:r})}),r.noTargetResults.map(function(e,t){return O.a.createElement(T,{key:"notarget-".concat(t),result:e})}),O.a.createElement(j,{indicator:r}))))}function P(e){var t=e.indicator,r=e.editable,n=e.resultEditable;return f(e,["indicator","editable","resultEditable"]),O.a.createElement("div",{className:"results-table__actions"},O.a.createElement("div",{className:"cd-actions__message"},t.noTargets&&O.a.createElement("div",{className:"text-danger"},r&&O.a.createElement("a",{href:"/indicators/indicator_update/".concat(t.pk,"/"),"data-tab":"#targets",className:"indicator-link btn btn-success"},O.a.createElement(p.a,{icon:g.e}),gettext("Add targets")))),n&&O.a.createElement("div",{className:t.noTargets?"cd-actions__button disable-span":"cd-actions__button"},O.a.createElement("a",{href:"/indicators/result_add/".concat(t.pk,"/"),className:"btn-link btn-add results__link"},O.a.createElement(p.a,{icon:g.e}),gettext("Add result"))))}var R,F,L,A=gettext("N/A"),D=O.a.createContext(m.a),M=function(){_(t,O.a.Component);var e=I(t);function t(){return b(this,t),e.apply(this,arguments)}return y(t,[{key:"componentDidMount",value:function(){$('*[data-toggle="popover"]').popover({html:!0})}},{key:"render",value:function(){var e,t=Object(m.b)(this.props.val),r=interpolate(gettext("<p><strong>The actual value is %(percent)s of the target value.</strong> An indicator is on track if the result is no less than 85% of the target and no more than 115% of the target.</p><p><em>Remember to consider your direction of change when thinking about whether the indicator is on track.</em></p>"),{percent:t},!0),n=t&&.85<this.props.val&&this.props.val<1.15?(e="badge-success-light",gettext("On track")):(e="badge-warning-light",gettext("Not on track")),a='<h4 class="badge '.concat(e,'">').concat(n,"</h4>").concat(r);return O.a.createElement("strong",null,O.a.createElement("span",{tabIndex:"0",className:"badge ".concat(e),"data-toggle":"popover","data-placement":"right","data-trigger":"focus","data-content":a},t))}}]),t}(),B=function(){_(t,O.a.Component);var e=I(t);function t(){return b(this,t),e.apply(this,arguments)}return y(t,[{key:"render",value:function(){var e=!this.props.indicator.noTargets||0<this.props.indicator.noTargetResults.length;return O.a.createElement("div",{className:"results-table__wrapper"},e&&O.a.createElement(C,{indicator:this.props.indicator,editable:this.props.editable}),O.a.createElement(P,{indicator:this.props.indicator,editable:this.props.editable,resultEditable:this.props.resultEditable}))}}]),t}(),U=r("7O5W"),z=r("Cs6D");function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),i=0;i<a.length;i++)r=a[i],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function W(e,t,r){return t&&J(e.prototype,t),r&&J(e,r),e}function Q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(i){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=Y(i);return t=o?(e=Y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==q(n)&&"function"!=typeof n?K(r):n}}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}U.b.add(g.b,g.c);var Z,ee,te=Object(u.c)(R=function(){Q(n,O.a.Component);var r=X(n);function n(e){var t;return G(this,n),(t=r.call(this,e)).onShowAllClick=function(e){e.preventDefault(),o.a.emit("nav-clear-all-indicator-filters")},t}return W(n,[{key:"render",value:function(){var e=this.props,t=e.indicatorCount,r=(e.programId,e.currentIndicatorFilter),n=e.filterApplied;return O.a.createElement("div",{className:"indicators-list__header"},O.a.createElement("h3",{className:"no-bold"},O.a.createElement("span",{id:"indicators-list-title"},function(e,t){var r;switch(e){case w.g.missingTarget:return r=ngettext("%s indicator has missing targets","%s indicators have missing targets",t),interpolate(r,[t]);case w.g.missingResults:return r=ngettext("%s indicator has missing results","%s indicators have missing results",t),interpolate(r,[t]);case w.g.missingEvidence:return r=ngettext("%s indicator has missing evidence","%s indicators have missing evidence",t),interpolate(r,[t]);case w.g.aboveTarget:return r=ngettext("%s indicator is >15% above target","%s indicators are >15% above target",t),interpolate(r,[t]);case w.g.belowTarget:return r=ngettext("%s indicator is >15% below target","%s indicators are >15% below target",t),interpolate(r,[t]);case w.g.onTarget:return r=ngettext("%s indicator is on track","%s indicators are on track",t),interpolate(r,[t]);case w.g.nonReporting:return r=ngettext("%s indicator is unavailable","%s indicators are unavailable",t),interpolate(r,[t]);default:return r=ngettext("%s indicator","%s indicators",t),interpolate(r,[t])}}(r,t)),n&&O.a.createElement("small",{className:"ml-2 text-medium-dark text-nowrap"},"|",O.a.createElement("a",{className:"btn btn-sm btn-link btn-inline ml-2",href:"#",id:"show-all-indicators",onClick:this.onShowAllClick},gettext("Show all indicators")))))}}]),n}())||R,re=Object(u.c)(F=function(){Q(i,O.a.Component);var a=X(i);function i(){var t;G(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=a.call.apply(a,[this].concat(r))).onIndicatorSelection=function(e){var t=e?e.value:null;t&&o.a.emit("nav-select-indicator-to-filter",t)},t.onGroupingSelection=function(e){t.props.uiStore.setGroupBy(e.value)},t}return W(i,[{key:"render",value:function(){var t=this,e=this.props.rootStore.allIndicators.map(function(e){return{value:e.pk,label:e.name}}),r=this.props.uiStore.selectedIndicatorId?e.find(function(e){return e.value===t.props.uiStore.selectedIndicatorId}):null,n=this.props.uiStore.groupByOptions,a=this.props.uiStore.selectedGroupByOption;return O.a.createElement("nav",{className:"list__filters list__filters--block-label",id:"id_div_indicators"},O.a.createElement("div",{className:"form-group"},O.a.createElement("label",{className:""},gettext("Find an indicator:")),O.a.createElement("div",{className:""},O.a.createElement(z.a,{options:e,value:r,isClearable:!1,placeholder:gettext("None"),onChange:this.onIndicatorSelection}))),this.props.uiStore.resultChainFilterLabel&&O.a.createElement(O.a.Fragment,null,O.a.createElement("div",{className:"form-group"},O.a.createElement("label",{className:""},gettext("Group indicators:")),O.a.createElement("div",{className:""},O.a.createElement(z.a,{options:n,value:a,isClearable:!1,onChange:this.onGroupingSelection})))))}}]),i}())||F,ne=Object(u.c)(L=function(){Q(n,O.a.Component);var r=X(n);function n(e){var t;return G(this,n),(t=r.call(this,e)).onIndicatorUpdateClick=t.onIndicatorUpdateClick.bind(K(t)),t.onIndicatorResultsToggleClick=t.onIndicatorResultsToggleClick.bind(K(t)),t}return W(n,[{key:"onIndicatorUpdateClick",value:function(e,t){e.preventDefault(),o.a.emit("open-indicator-update-modal",t)}},{key:"onIndicatorResultsToggleClick",value:function(e,t){e.preventDefault(),this.props.program.isExpanded(t)?this.props.program.collapse(t):this.props.program.expand(t)}},{key:"render",value:function(){var l=this,e=this.props.indicators,c=this.props.program,s=!this.props.readOnly,u=!this.props.resultReadOnly;return O.a.createElement("table",{className:"table indicators-list"},O.a.createElement("thead",null,O.a.createElement("tr",{className:"table-header"},O.a.createElement("th",{className:"",id:"id_indicator_name_col_header"},gettext("Indicator")),O.a.createElement("th",{className:"",id:"id_indicator_buttons_col_header"}," "),O.a.createElement("th",{className:"",id:"id_indicator_unit_col_header"},gettext("Unit of measure")),O.a.createElement("th",{className:"text-right",id:"id_indicator_baseline_col_header"},gettext("Baseline")),O.a.createElement("th",{className:"text-right",id:"id_indicator_target_col_header"},gettext("Target")))),O.a.createElement("tbody",null,e.map(function(t){function e(e){return""==e||isNaN(parseFloat(e))?"":"00"==(e=parseFloat(e).toFixed(2)).slice(-2)?a(e.slice(0,-3)):"0"==e.slice(-1)?a(e.slice(0,-1)):a(e)}var r=t.targetPeriodLastEndDate,n=window.localizeNumber,a=t.isPercent?function(e){return e?"".concat(n(e),"%"):""}:function(e){return e?"".concat(n(e)):""},i=0<t.noTargetResults.length&&0<t.periodicTargets.length,o=0===t.periodicTargets.length;return O.a.createElement(O.a.Fragment,{key:t.pk},O.a.createElement("tr",{className:k()("indicators-list__row","indicators-list__indicator-header",{"is-highlighted":t.wasJustCreated,"is-expanded":c.isExpanded(t.pk)})},O.a.createElement("td",null,O.a.createElement("a",{href:"#",className:"indicator_results_toggle btn text-action text-left",tabIndex:"0",onClick:function(e){return l.onIndicatorResultsToggleClick(e,t.pk)}},O.a.createElement(p.a,{icon:c.isExpanded(t.pk)?"caret-down":"caret-right"}),O.a.createElement("strong",null,t.number?t.number+":":"")," ",O.a.createElement("span",{className:"indicator_name"},t.name)),i&&O.a.createElement("span",{className:"text-danger ml-3"},O.a.createElement("i",{className:"fas fa-bullseye"})," ",gettext("Results unassigned to targets")),o&&O.a.createElement("span",{className:"text-danger ml-3"},O.a.createElement("i",{className:"fas fa-bullseye"})," ",gettext("Indicator missing targets")),t.isKeyPerformanceIndicator&&O.a.createElement("span",{className:"badge"},"KPI"),r&&c.reportingPeriodEnd>r&&O.a.createElement("a",{href:"/indicators/indicator_update/".concat(t.pk,"/"),className:"indicator-link color-red missing_targets","data-toggle":"modal","data-target":"#indicator_modal_div","data-tab":"targets"},O.a.createElement("i",{className:"fas fa-bullseye"})," ",gettext("Missing targets"))),O.a.createElement("td",null,O.a.createElement("a",{href:"#",className:"indicator-link",onClick:function(e){return l.onIndicatorUpdateClick(e,t.pk)}},O.a.createElement("i",{className:"fas fa-cog"}))),O.a.createElement("td",null,t.unitOfMeasure),O.a.createElement("td",{className:"text-right"},null===t.baseline?gettext("N/A"):e(t.baseline)),O.a.createElement("td",{className:"text-right"},e(t.lopTarget))),c.isExpanded(t.pk)&&O.a.createElement("tr",{className:"indicators-list__row indicators-list__indicator-body"},O.a.createElement("td",{colSpan:"6"},O.a.createElement(B,{indicator:t,editable:s,resultEditable:u}))))})))}}]),n}())||L,ae=Object(u.c)(function(e){var t=e.program,r=e.rootStore;H(e,["program","rootStore"]);return O.a.createElement("div",{className:"indicator-list__buttons-row"},O.a.createElement("div",{className:"expand-collapse-buttons"},O.a.createElement(d.c,{clickHandler:function(){t.expandAll()},disabled:r.allExpanded}),O.a.createElement(d.b,{clickHandler:function(){t.collapseAll()},disabled:r.allCollapsed})),O.a.createElement("div",{className:"indicator-list__add-indicator-button"},!r.readOnly&&O.a.createElement(d.a,{readonly:r.readOnly,programId:t.pk})))}),ie=Object(u.c)(function(e){var t=e.rootStore.program;return O.a.createElement(O.a.Fragment,null,O.a.createElement(te,{indicatorCount:e.rootStore.indicators.length,programId:t.pk,currentIndicatorFilter:e.uiStore.currentIndicatorFilter,filterApplied:e.uiStore.filterApplied}),O.a.createElement(re,{uiStore:e.uiStore,rootStore:e.rootStore}),O.a.createElement(ae,{program:t,rootStore:e.rootStore}),t.needsAdditionalTargetPeriods&&O.a.createElement("div",{id:"id_missing_targets_msg",className:"color-red"},O.a.createElement("i",{className:"fas fa-bullseye"})," ",gettext("Some indicators have missing targets. To enter these values, click the target icon near the indicator name.")),O.a.createElement(ne,{indicators:e.rootStore.indicators,program:t,readOnly:e.rootStore.readOnly,resultReadOnly:e.rootStore.resultReadOnly}))});r("LBcr");function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e){return function(e){if(Array.isArray(e))return se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return se(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function de(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pe(e,t,r){return t&&de(e.prototype,t),r&&de(e,r),e}function ge(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(i){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,a=he(i);return t=o?(e=he(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),r=this,!(n=t)||"object"!==le(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e){var t=0<arguments.length&&void 0!==e?e:{};return Object(we.n)({_formatDecimal:Te.a,pk:t.pk,dateCollected:t.date_collected,_achieved:t.achieved,evidenceUrl:t.evidence_url||!1,recordName:t.record_name||!1,get achieved(){return this._formatDecimal(this._achieved)}})}var ve,ye,_e,Ee,Ie=Object(u.c)(Z=function(){ge(i,O.a.Component);var a=fe(i);function i(){var t;ue(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=a.call.apply(a,[this].concat(r))).handleClick=function(e){e.preventDefault(),t.props.disabled||0==t.unfilledPercent||o.a.emit("nav-apply-gauge-tank-filter",t.props.filterType)},t}return pe(i,[{key:"render",value:function(){var e=this.props,t=e.allIndicatorsLength,r=e.filteredIndicatorsLength,n=e.title,a=e.filledLabel,i=e.unfilledLabel,o=e.cta,l=e.emptyLabel,c=e.disabled,s=this.props.filterType===this.props.currentIndicatorFilter,u=t<=0||t==r?100:0==r?0:Math.max(1,Math.min(Math.round(r/t*100),99)),d=100-(this.unfilledPercent=u);return O.a.createElement("div",{className:k()("gauge",{"filter-trigger":0<u&&!c,"is-highlighted":s}),onClick:this.handleClick},O.a.createElement("h6",{className:"gauge__title"},n),O.a.createElement("div",{className:"gauge__overview"},O.a.createElement("div",{className:"gauge__graphic gauge__graphic--tank ".concat(0==d?"gauge__graphic--empty":"")},O.a.createElement("div",{className:"graphic__tick-marks"},ce(Array(10)).map(function(e,t){return O.a.createElement("div",{key:t,className:"graphic__tick"})})),O.a.createElement("div",{className:"graphic__tank--unfilled",style:{height:"".concat(u,"%")}}),O.a.createElement("div",{className:"graphic__tank--filled",style:{height:"".concat(d,"%")}})),O.a.createElement("div",{className:"gauge__labels"},0<d?O.a.createElement(O.a.Fragment,null,O.a.createElement("div",{className:"gauge__label text-muted"},u,"% ",i),O.a.createElement("div",{className:"gauge__label"},O.a.createElement("span",{className:"gauge__value"},d,"% ",a))):O.a.createElement("div",{className:"gauge__label"},O.a.createElement("span",{className:"text-danger"},O.a.createElement("strong",null,l))))),0<u&&!c&&O.a.createElement("div",{className:"gauge__cta"},O.a.createElement("span",{className:"btn-link btn-inline"},O.a.createElement("i",{className:"fas fa-exclamation-triangle text-warning"})," ",o)," "))}}]),i}())||Z,Oe=Object(u.c)(ee=function(){ge(n,O.a.Component);var r=fe(n);function n(e){var t;return ue(this,n),(t=r.call(this,e)).onFilterLinkClick=function(e,t){e.preventDefault(),o.a.emit("nav-apply-gauge-tank-filter",t)},t.handledFilterTypes=new Set([w.g.aboveTarget,w.g.belowTarget,w.g.onTarget,w.g.nonReporting]),t}return pe(n,[{key:"componentDidUpdate",value:function(){$(this.el).find('[data-toggle="popover"]').popover({html:!0})}},{key:"render",value:function(){function e(e){return O.a.createElement("div",{className:k()("gauge",{"is-highlighted":l}),ref:function(e){return r.el=e}},O.a.createElement("h6",{className:"gauge__title"},gettext("Indicators on track")),O.a.createElement("div",{className:"gauge__overview"},e.children))}function t(){return O.a.createElement("div",{className:"gauge__labels"},O.a.createElement("div",{className:"gauge__label"},O.a.createElement("span",{className:"text-muted filter-trigger--band",onClick:function(e){return r.onFilterLinkClick(e,w.g.nonReporting)}},interpolate(gettext("%(percentNonReporting)s% unavailable"),{percentNonReporting:b},!0))," ",O.a.createElement("a",{href:"#",tabIndex:"0","data-toggle":"popover","data-placement":"right","data-trigger":"focus","data-content":gettext("The indicator has no targets, no completed target periods, or no results reported."),onClick:function(e){return e.preventDefault()}},O.a.createElement("i",{className:"far fa-question-circle"}))),O.a.createElement("div",{className:"gauge__label"},O.a.createElement("span",{className:"gauge__value--above filter-trigger--band",onClick:function(e){return r.onFilterLinkClick(e,w.g.aboveTarget)},dangerouslySetInnerHTML:_()})),O.a.createElement("div",{className:"gauge__label"},O.a.createElement("span",{className:"gauge__value filter-trigger--band",onClick:function(e){return r.onFilterLinkClick(e,w.g.onTarget)},dangerouslySetInnerHTML:E()})," ",O.a.createElement("a",{href:"#",tabIndex:"0","data-toggle":"popover","data-placement":"right","data-trigger":"focus","data-content":gettext("The actual value matches the target value, plus or minus 15%. So if your target is 100 and your result is 110, the indicator is 10% above target and on track.  <br><br>Please note that if your indicator has a decreasing direction of change, then “above” and “below” are switched. In that case, if your target is 100 and your result is 200, your indicator is 50% below target and not on track.<br><br><a href='https://docs.google.com/document/d/1Gl9bxJJ6hdhCXeoOCoR1mnVKZa2FlEOhaJcjexiHzY0' target='_blank'>See our documentation for more information.</a>"),onClick:function(e){return e.preventDefault()}},O.a.createElement("i",{className:"far fa-question-circle"}))),O.a.createElement("div",{className:"gauge__label"},O.a.createElement("span",{className:"gauge__value--below filter-trigger--band",onClick:function(e){return r.onFilterLinkClick(e,w.g.belowTarget)},dangerouslySetInnerHTML:I()})))}var r=this,n=this.props,a=n.rootStore,i=n.currentIndicatorFilter,o=n.program,l=this.handledFilterTypes.has(i),c=a.allIndicators.length,s=a.getIndicatorsNotReporting.length,u=a.getIndicatorsAboveTarget.length,d=a.getIndicatorsBelowTarget.length,p=a.getIndicatorsOnTarget.length,g=0<c?function(e){return e==c?100:0==e?0:Math.max(1,Math.min(Math.round(e/c*100),99))}:function(e){return 0},m=g(u),f=g(p),h=g(d),b=g(s),v=100*this.props.rootStore.onScopeMargin,y=(o.reportingPeriodStart,0===a.getIndicatorsReporting.length||0===a.getTotalResultsCount),_=function(){var e=gettext("<strong>%(percentHigh)s%</strong> are >%(marginPercent)s% above target");return{__html:interpolate(e,{percentHigh:m,marginPercent:v},!0)}},E=function(){var e=gettext("<strong>%s%</strong> are on track");return{__html:interpolate(e,[f])}},I=function(){var e=gettext("<strong>%(percentBelow)s%</strong> are >%(marginPercent)s% below target");return{__html:interpolate(e,{percentBelow:h,marginPercent:v},!0)}};return O.a.createElement(e,null,O.a.createElement("div",{className:"gauge__graphic gauge__graphic--performance-band ".concat(y?"gauge__graphic--empty":"")},O.a.createElement("div",{className:"graphic__tick-marks"},ce(Array(10)).map(function(e,t){return O.a.createElement("div",{key:t,className:"graphic__tick"})})),O.a.createElement("div",{className:"graphic__performance-band--above-target",style:{height:"".concat(m,"%")}}),O.a.createElement("div",{className:"graphic__performance-band--on-target",style:{height:"".concat(f,"%")}}),O.a.createElement("div",{className:"graphic__performance-band--below-target",style:{height:"".concat(h,"%")}})),y?O.a.createElement("div",{className:"gauge__labels"},O.a.createElement("div",{className:"gauge__label"},O.a.createElement("p",{className:"text-muted"},gettext("Unavailable until the first target period ends with results reported.")))):O.a.createElement(t,null))}}]),n}())||ee,ke=Object(u.c)(function(e){var t=e.rootStore.program,r=e.rootStore.allIndicators,n=e.uiStore.currentIndicatorFilter,a=e.rootStore.indicatorOnScopeMargin,i={title:gettext("Indicators with targets"),filledLabel:gettext("have targets"),unfilledLabel:gettext("no targets"),cta:gettext("Indicators missing targets"),emptyLabel:gettext("No targets")},o={title:gettext("Indicators with results"),filledLabel:gettext("have results"),unfilledLabel:gettext("no results"),cta:gettext("Indicators missing results"),emptyLabel:gettext("No results")},l={title:gettext("Results with evidence"),filledLabel:gettext("have evidence"),unfilledLabel:gettext("no evidence"),cta:gettext("Indicators missing evidence"),emptyLabel:gettext("No evidence")},c=r.map(function(e){return e.hasAllTargetsDefined}).some(function(e){return e}),s=r.map(function(e){return e.resultsCount}).some(function(e){return 0<e});return 0===r.length?null:O.a.createElement("div",{className:"status__gauges"},O.a.createElement(Oe,{currentIndicatorFilter:n,indicatorOnScopeMargin:a,rootStore:e.rootStore,program:t}),O.a.createElement(Ie,oe({filterType:w.g.missingTarget,currentIndicatorFilter:n,allIndicatorsLength:r.length,filteredIndicatorsLength:e.rootStore.getIndicatorsNeedingTargets.length},i)),O.a.createElement(Ie,oe({filterType:w.g.missingResults,currentIndicatorFilter:n,allIndicatorsLength:r.length,filteredIndicatorsLength:e.rootStore.getIndicatorsNeedingResults.length,disabled:!c},o)),O.a.createElement(Ie,oe({filterType:w.g.missingEvidence,currentIndicatorFilter:n,allIndicatorsLength:e.rootStore.getTotalResultsCount,filteredIndicatorsLength:e.rootStore.getTotalResultsCount-e.rootStore.getTotalResultsWithEvidenceCount,disabled:!c||!s},l)))}),we=r("2vnA"),Ne=r("5/4V"),xe=r("1d5Q"),Se=r("My+N"),Te=r("NHe6"),je=Object(Se.a)(Se.b,function(e){var t=0<arguments.length&&void 0!==e?e:{};return{number:t.number||!1,wasJustCreated:Boolean(t.was_just_created),isKeyPerformanceIndicator:Boolean(t.is_key_performance_indicator),isReporting:Boolean(t.is_reporting),hasAllTargetsDefined:Boolean(t.has_all_targets_defined),resultsCount:!isNaN(parseInt(t.results_count))&&parseInt(t.results_count),hasResults:Boolean(t.has_results),resultsWithEvidenceCount:!isNaN(parseInt(t.results_with_evidence_count))&&parseInt(t.results_with_evidence_count),missingEvidence:Boolean(t.missing_evidence),mostRecentlyCompletedTargetEndDate:t.target_frequency&&t.most_recent_completed_target_end_date?new Date(t.most_recent_completed_target_end_date):null,targetPeriodLastEndDate:t.target_frequency&&t.target_period_last_end_date?new Date(t.target_period_last_end_date):null,_overUnder:!isNaN(parseInt(t.over_under))&&parseInt(t.over_under),get belowTarget(){return this.isReporting&&!1!==this._overUnder&&this._overUnder<0},get aboveTarget(){return this.isReporting&&!1!==this._overUnder&&0<this._overUnder},get inScope(){return this.isReporting&&!1!==this._overUnder&&0==this._overUnder},reportingPeriod:t.reporting_period||!1,periodicTargets:(t.periodic_targets||[]).map(function(e){return function(e){var t=0<arguments.length&&void 0!==e?e:{};return Object(we.n)({_formatDecimal:Te.a,periodName:t.period_name,dateRange:t.date_range||null,completed:Boolean(t.completed),mostRecentlyCompleted:Boolean(t.most_recently_completed),_target:t.target,_actual:t.actual,_percentMet:t.percent_met,results:(t.results||[]).map(function(e){return be(e)}),get target(){return this._formatDecimal(this._target)},get actual(){return this._formatDecimal(this._actual)},get percentMet(){return this._formatDecimal(this._percentMet)}})}(e)}),noTargetResults:(t.no_target_results||[]).map(function(e){return be(e)}),get noTargets(){return!(this.frequency&&this.periodicTargets&&0<this.periodicTargets.length)},updateData:function(e){e.pk&&!isNaN(parseInt(e.pk))&&parseInt(e.pk)===this.pk&&(this.number=e.number||!1)}}}),Ce=Object(xe.a)(xe.d,xe.b,function(e){var t=0<arguments.length&&void 0!==e?e:{};return{indicators:t.indicators?new Map(Object.values(t.indicators).map(function(e){return new je(e)}).map(function(e){return[e.pk,e]})):new Map,needsAdditionalTargetPeriods:Boolean(t.needs_additional_target_periods),_expandedIndicators:new Set,isExpanded:function(e){return this._expandedIndicators.has(parseInt(e))},expand:Object(we.d)(function(e){this._expandedIndicators.add(parseInt(e))}),collapse:Object(we.d)(function(e){this._expandedIndicators.delete(parseInt(e))}),expandAll:Object(we.d)(function(){this._expandedIndicators=new Set(this.indicators.keys())}),collapseAll:Object(we.d)(function(){this._expandedIndicators.clear()}),updateIndicator:Object(we.d)(function(e){var r=this,t=parseInt(e);return Ne.a.updateProgramPageIndicator(t).then(function(e){var t;return e.indicator&&(t=je(e.indicator),r.indicators.set(t.pk,t)),e}).then(this._applyOrderUpdate.bind(this))}),reloadIndicators:Object(we.d)(function(){var t=this;return Ne.a.updateAllProgramPageIndicators(this.pk).then(function(e){return t.indicators=new Map((e.indicators||[]).map(je).map(function(e){return[e.pk,e]})),e}).then(this._applyOrderUpdate.bind(this))}),deleteIndicator:Object(we.d)(function(t){var r=this;return this.updateOrder().then(function(e){return r.indicators.delete(parseInt(t))})})}});function Pe(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fe(r,n,e,t,a){var i={};return Object.keys(t).forEach(function(e){i[e]=t[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(r,n,i),i=null),i}var Le,Ae,De,Me=(ye=Fe((ve=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Pe(this,"currentIndicatorFilter",ye,this),Pe(this,"selectedIndicatorId",_e,this),Pe(this,"groupByChain",Ee,this),this.setIndicatorFilter=this.setIndicatorFilter.bind(this),this.clearIndicatorFilter=this.clearIndicatorFilter.bind(this),this.setSelectedIndicatorId=this.setSelectedIndicatorId.bind(this),this.rootStore=e}var e,r,n;return e=t,(r=[{key:"setIndicatorFilter",value:function(e){this.currentIndicatorFilter=e}},{key:"clearIndicatorFilter",value:function(){this.currentIndicatorFilter=null,this.selectedIndicatorId=null,this.rootStore.program.collapseAll()}},{key:"setSelectedIndicatorId",value:function(e){this.clearIndicatorFilter(),this.selectedIndicatorId=e,this.rootStore.program.expand(e)}},{key:"setGroupBy",value:function(e){this.groupByChain=1==e}},{key:"filterApplied",get:function(){return!(!this.currentIndicatorFilter&&!this.selectedIndicatorId)}},{key:"resultChainFilterLabel",get:function(){return this.rootStore.program.resultChainFilterLabel}},{key:"groupByOptions",get:function(){return[{value:1,label:this.resultChainFilterLabel},{value:2,label:gettext("by Level")}]}},{key:"selectedGroupByOption",get:function(){return this.groupByChain?this.groupByOptions[0]:this.groupByOptions[1]}}])&&Re(e.prototype,r),n&&Re(e,n),t}()).prototype,"currentIndicatorFilter",[we.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=Fe(ve.prototype,"selectedIndicatorId",[we.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ee=Fe(ve.prototype,"groupByChain",[we.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Fe(ve.prototype,"setIndicatorFilter",[we.d],Object.getOwnPropertyDescriptor(ve.prototype,"setIndicatorFilter"),ve.prototype),Fe(ve.prototype,"clearIndicatorFilter",[we.d],Object.getOwnPropertyDescriptor(ve.prototype,"clearIndicatorFilter"),ve.prototype),Fe(ve.prototype,"setSelectedIndicatorId",[we.d],Object.getOwnPropertyDescriptor(ve.prototype,"setSelectedIndicatorId"),ve.prototype),Fe(ve.prototype,"filterApplied",[we.f],Object.getOwnPropertyDescriptor(ve.prototype,"filterApplied"),ve.prototype),Fe(ve.prototype,"resultChainFilterLabel",[we.f],Object.getOwnPropertyDescriptor(ve.prototype,"resultChainFilterLabel"),ve.prototype),Fe(ve.prototype,"groupByOptions",[we.f],Object.getOwnPropertyDescriptor(ve.prototype,"groupByOptions"),ve.prototype),Fe(ve.prototype,"selectedGroupByOption",[we.f],Object.getOwnPropertyDescriptor(ve.prototype,"selectedGroupByOption"),ve.prototype),Fe(ve.prototype,"setGroupBy",[we.d],Object.getOwnPropertyDescriptor(ve.prototype,"setGroupBy"),ve.prototype),ve);function Be(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function $e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ue(r,n,e,t,a){var i={};return Object.keys(t).forEach(function(e){i[e]=t[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(r,n,i),i=null),i}var ze,qe=(Ae=Ue((Le=function(){function d(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.programJSON,r=void 0===t?{}:t,n=e.onScopeMargin,a=void 0===n?.15:n,i=e.deletePinnedReportURL,o=void 0===i?null:i,l=e.readOnly,c=void 0===l||l,s=e.resultReadOnly,u=void 0===s||s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),Be(this,"program",Ae,this),Be(this,"uiStore",De,this),this.readOnly=c,this.resultReadOnly=u,this.onScopeMargin=a,this.deletePinnedReportURL=o,this.program=Ce(r),this.uiStore=new Me(this)}var e,t,r;return e=d,(t=[{key:"filterIndicators",value:function(e,t){var r,n=1<arguments.length&&void 0!==t?t:null;switch(e){case w.g.missingTarget:r=this.getIndicatorsNeedingTargets;break;case w.g.missingResults:r=this.getIndicatorsNeedingResults;break;case w.g.missingEvidence:r=this.getIndicatorsNeedingEvidence;break;case w.g.aboveTarget:r=this.getIndicatorsAboveTarget;break;case w.g.belowTarget:r=this.getIndicatorsBelowTarget;break;case w.g.onTarget:r=this.getIndicatorsOnTarget;break;case w.g.nonReporting:r=this.getIndicatorsNotReporting;break;case w.g.noFilter:default:r=this._sortedIndicators}return n&&!isNaN(parseInt(n))&&(r=r.filter(function(e){return e.pk==parseInt(n)})),r}},{key:"_sortedIndicators",get:function(){return this.program.resultsFramework&&this.uiStore.groupByChain?this.program.indicatorsInChainOrder:this.program.indicatorsInLevelOrder}},{key:"getIndicatorsNeedingTargets",get:function(){return this._sortedIndicators.filter(function(e){return!e.hasAllTargetsDefined})}},{key:"getIndicatorsNeedingResults",get:function(){return this._sortedIndicators.filter(function(e){return!e.hasResults})}},{key:"getIndicatorsNeedingEvidence",get:function(){return this._sortedIndicators.filter(function(e){return e.missingEvidence})}},{key:"getIndicatorsNotReporting",get:function(){return this._sortedIndicators.filter(function(e){return!e.isReporting})}},{key:"getIndicatorsAboveTarget",get:function(){return this._sortedIndicators.filter(function(e){return e.aboveTarget})}},{key:"getIndicatorsBelowTarget",get:function(){return this._sortedIndicators.filter(function(e){return e.belowTarget})}},{key:"getIndicatorsOnTarget",get:function(){return this._sortedIndicators.filter(function(e){return e.inScope})}},{key:"getIndicatorsReporting",get:function(){return this._sortedIndicators.filter(function(e){return e.isReporting})}},{key:"getTotalResultsCount",get:function(){return this.allIndicators.reduce(function(e,t){return e+t.resultsCount},0)}},{key:"getTotalResultsWithEvidenceCount",get:function(){return this.allIndicators.reduce(function(e,t){return e+t.resultsWithEvidenceCount},0)}},{key:"indicators",get:function(){return this.filterIndicators(this.uiStore.currentIndicatorFilter,this.uiStore.selectedIndicatorId)}},{key:"allExpanded",get:function(){var t=this;return this.indicators.every(function(e){return t.program.isExpanded(e.pk)})}},{key:"allCollapsed",get:function(){var t=this;return this.indicators.every(function(e){return!t.program.isExpanded(e.pk)})}},{key:"allIndicators",get:function(){return this._sortedIndicators}}])&&$e(e.prototype,t),r&&$e(e,r),d}()).prototype,"program",[we.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),De=Ue(Le.prototype,"uiStore",[we.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ue(Le.prototype,"_sortedIndicators",[we.f],Object.getOwnPropertyDescriptor(Le.prototype,"_sortedIndicators"),Le.prototype),Ue(Le.prototype,"getIndicatorsNeedingTargets",[we.f],Object.getOwnPropertyDescriptor(Le.prototype,"getIndicatorsNeedingTargets"),Le.prototype),Ue(Le.prototype,"getIndicatorsNeedingResults",[we.f],Object.getOwnPropertyDescriptor(Le.prototype,"getIndicatorsNeedingResults"),Le.prototype),Ue(Le.prototype,"getIndicatorsNeedingEvidence",[we.f],Object.getOwnPropertyDescriptor(Le.prototype,"getIndicatorsNeedingEvidence"),Le.prototype),Ue(Le.prototype,"getIndicatorsNotReporting",[we.f],Object.getOwnPropertyDescriptor(Le.prototype,"getIndicatorsNotReporting"),Le.prototype),Ue(Le.prototype,"getIndicatorsAboveTarget",[we.f],Object.getOwnPropertyDescriptor(Le.prototype,"getIndicatorsAboveTarget"),Le.prototype),Ue(Le.prototype,"getIndicatorsBelowTarget",[we.f],Object.getOwnPropertyDescriptor(Le.prototype,"getIndicatorsBelowTarget"),Le.prototype),Ue(Le.prototype,"getIndicatorsOnTarget",[we.f],Object.getOwnPropertyDescriptor(Le.prototype,"getIndicatorsOnTarget"),Le.prototype),Ue(Le.prototype,"getIndicatorsReporting",[we.f],Object.getOwnPropertyDescriptor(Le.prototype,"getIndicatorsReporting"),Le.prototype),Ue(Le.prototype,"getTotalResultsCount",[we.f],Object.getOwnPropertyDescriptor(Le.prototype,"getTotalResultsCount"),Le.prototype),Ue(Le.prototype,"getTotalResultsWithEvidenceCount",[we.f],Object.getOwnPropertyDescriptor(Le.prototype,"getTotalResultsWithEvidenceCount"),Le.prototype),Ue(Le.prototype,"indicators",[we.f],Object.getOwnPropertyDescriptor(Le.prototype,"indicators"),Le.prototype),Ue(Le.prototype,"allExpanded",[we.f],Object.getOwnPropertyDescriptor(Le.prototype,"allExpanded"),Le.prototype),Ue(Le.prototype,"allCollapsed",[we.f],Object.getOwnPropertyDescriptor(Le.prototype,"allCollapsed"),Le.prototype),Ue(Le.prototype,"allIndicators",[we.f],Object.getOwnPropertyDescriptor(Le.prototype,"allIndicators"),Le.prototype),Le);reactContext.deletePinnedReportURL&&(ze=reactContext.deletePinnedReportURL,$("[data-delete-pinned-report]").click(function(e){e.preventDefault();var t=$(this).data("deletePinnedReport"),r=$(this).closest(".pinned-report");ze&&window.confirm(gettext("Warning: This action cannot be undone. Are you sure you want to delete this pinned report?"))&&$.ajax({type:"POST",url:ze,data:{pinned_report_id:t},success:function(){r.remove()}})}));var He=new qe(reactContext),Ge=He.uiStore;function Je(e){e+="?modal=1",$("#indicator_modal_content").empty(),$("#modalmessages").empty(),$("#indicator_results_modal_content").load(e),$("#indicator_results_div").modal("show")}o.a.on("open-indicator-update-modal",function(e){var t="/indicators/indicator_update/".concat(e,"/");$("#indicator_modal_content").empty(),$("#modalmessages").empty(),$("#indicator_modal_content").load(t),$("#indicator_modal_div").modal("show")}),o.a.on("apply-gauge-tank-filter",function(e){o.a.emit("clear-all-indicator-filters"),Ge.setIndicatorFilter(e)}),o.a.on("clear-all-indicator-filters",function(){Ge.clearIndicatorFilter(),He.program.collapseAll()}),o.a.on("select-indicator-to-filter",function(e){Ge.clearIndicatorFilter(),Ge.setSelectedIndicatorId(e)}),a.a.render(O.a.createElement(ie,{rootStore:He,uiStore:Ge}),document.querySelector("#indicator-list-react-component")),a.a.render(O.a.createElement(ke,{rootStore:He,uiStore:Ge}),document.querySelector("#program-metrics-react-component")),$("#indicator-list-react-component").on("click",".results__link",function(e){e.preventDefault(),Je($(this).attr("href"))}),$("#indicator_results_div").on("review.tola.results.warning",function(e,t){Je(t.url)}),$("#indicator-list-react-component").on("click",".indicator-link[data-tab]",function(e){e.preventDefault();var t=$(this).attr("href");t+="?modal=1";var r=$(this).data("tab");r&&""!=r&&null!=r&&"undefined"!=r&&(t+="&targetsactive=true"),$("#indicator_modal_content").empty(),$("#modalmessages").empty(),$("#indicator_modal_content").load(t),$("#indicator_modal_div").modal("show")}),$("#indicator_modal_div").on("created.tola.indicator.save",function(e,t){He.program.updateIndicator(parseInt(t.indicatorId))}),$("#indicator_modal_div").on("updated.tola.indicator.save",function(e,t){var r=parseInt(t.indicatorId);He.program.updateIndicator(r)}),$("#indicator_modal_div").on("deleted.tola.indicator.save",function(e,t){He.program.deleteIndicator(t.indicatorId)}),$("#indicator_results_div").on("save.tola.result_form",function(e){var t=parseInt($(this).find("form #id_indicator").val());He.program.updateIndicator(t)});var We=[{name:"all",path:"/",filterType:w.g.noFilter},{name:"targets",path:"/targets",filterType:w.g.missingTarget},{name:"results",path:"/results",filterType:w.g.missingResults},{name:"evidence",path:"/evidence",filterType:w.g.missingEvidence},{name:"scope",path:"/scope",forwardTo:"scope.on"},{name:"scope.on",path:"/on",filterType:w.g.onTarget},{name:"scope.above",path:"/above",filterType:w.g.aboveTarget},{name:"scope.below",path:"/below",filterType:w.g.belowTarget},{name:"scope.nonreporting",path:"/nonreporting",filterType:w.g.nonReporting},{name:"indicator",path:"/indicator/:indicator_id<\\d+>",filterType:w.g.noFilter}],Qe=Object(l.b)(We,{defaultRoute:"all",defaultParams:{},trailingSlashMode:"always"});Qe.usePlugin(Object(c.a)({useHash:!0,base:"/program/"+He.program.pk+"/"})),Qe.subscribe(function(e){var t,r=e.route.name,n=e.route.params;"indicator"!==r?(t=We.find(function(e){return e.name===r}),o.a.emit("apply-gauge-tank-filter",t.filterType)):o.a.emit("select-indicator-to-filter",parseInt(n.indicator_id))}),Qe.start(),o.a.on("nav-apply-gauge-tank-filter",function(t){var e=We.find(function(e){return e.filterType===t});Qe.navigate(e.name)}),o.a.on("nav-clear-all-indicator-filters",function(){Qe.navigate("all")}),o.a.on("nav-select-indicator-to-filter",function(e){Qe.navigate("indicator",{indicator_id:e})}),Object(m.c)()},hzyr:function(e,t,r){"use strict";r.d(t,"a",function(){return l}),r.d(t,"d",function(){return c}),r.d(t,"c",function(){return s}),r.d(t,"b",function(){return u});var n=r("q1tI"),i=r.n(n),a=r("okNM");function o(e,t){if(null==e)return{};var r,n=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],0<=t.indexOf(r)||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols)for(var a=Object.getOwnPropertySymbols(e),i=0;i<a.length;i++)r=a[i],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}var l=Object(a.c)(function(e){var t=e.readonly,r=o(e,["readonly"]);return i.a.createElement("button",{type:"button",disabled:t,className:"btn btn-sm btn-link px-0 btn-add text-nowrap",onClick:function(){openCreateIndicatorFormModal(r)}},i.a.createElement("i",{className:"fas fa-plus-circle"})," ",gettext("Add indicator"))}),c=Object(a.c)(function(e){var t=e.readonly,r=e.label,n=void 0===r?null:r,a=o(e,["readonly","label"]);return i.a.createElement("button",{type:"button",disabled:t,className:"btn btn-link",onClick:function(){openUpdateIndicatorFormModal(a)}},i.a.createElement("i",{className:"fas fa-cog"}),n)}),s=Object(a.c)(function(e){var t=e.clickHandler,r=e.disabled;return i.a.createElement("button",{className:"btn btn-medium text-action btn-sm",onClick:t,disabled:r},i.a.createElement("i",{className:"fas fa-plus-square"}),gettext("Expand all"))}),u=Object(a.c)(function(e){var t=e.clickHandler,r=e.disabled;return i.a.createElement("button",{className:"btn btn-medium text-action btn-sm",onClick:t,disabled:r},i.a.createElement("i",{className:"fas fa-minus-square"}),gettext("Collapse all"))})},qtBC:function(e,t,r){"use strict";var n=r("7+Rn"),a=r.n(n)()();t.a=a},v38i:function(e,t,r){"use strict";var n;r.d(t,"a",function(){return a}),r.d(t,"b",function(){return o}),r.d(t,"c",function(){return i}),r.d(t,"l",function(){return l}),r.d(t,"i",function(){return c}),r.d(t,"k",function(){return s}),r.d(t,"f",function(){return u}),r.d(t,"m",function(){return d}),r.d(t,"j",function(){return p}),r.d(t,"d",function(){return g}),r.d(t,"e",function(){return m}),r.d(t,"g",function(){return h}),r.d(t,"h",function(){return b});var a={value:null,label:"---------"},i="—",o=i,l=1,c=2,s=[3,4,5,6,7],u=[1,2],d=Object.freeze({1:gettext("Life of Program (LoP) only"),2:gettext("Midline and endline"),3:gettext("Annual"),4:gettext("Semi-annual"),5:gettext("Tri-annual"),6:gettext("Quarterly"),7:gettext("Monthly")}),p=Object.freeze({3:gettext("Years"),4:gettext("Semi-annual periods"),5:gettext("Tri-annual periods"),6:gettext("Quarters"),7:gettext("Months")}),g=1,m=2;var f,h=Object.freeze({noFilter:0,missingTarget:1,missingResults:2,missingEvidence:3,aboveTarget:5,belowTarget:6,onTarget:7,nonReporting:8}),b=null!==(f="reason_for_change_options",n="undefined"!=typeof JS_GLOBALS&&JS_GLOBALS.hasOwnProperty(f)?JS_GLOBALS[f]:null)&&void 0!==n?n:[]}},[["aJgA",0,1]]]);